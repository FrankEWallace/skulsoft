import{u as j,i as ie,H as A,I as de,g as m,m as G,q as me,r as c,t as k,o as u,w as U,d as s,e as a,a as p,b as i,f as r,F as w,v as F,x as q,J as pe,K as M}from"./app-Cvm44xuh.js";import{u as be}from"./useCustomFields-B8b01gVh.js";const ce={class:"grid grid-cols-4 gap-6"},ye={class:"col-span-4 sm:col-span-2"},Ve={key:0,class:"col-span-4 sm:col-span-1"},ge={class:"mt-4 grid grid-cols-4 gap-6"},qe={class:"col-span-4 sm:col-span-1"},ve={class:"col-span-4 sm:col-span-1"},Ue={class:"col-span-4 sm:col-span-1"},Ne={class:"col-span-4 sm:col-span-1"},Ie={class:"mt-4 grid grid-cols-4 gap-6"},ke={class:"col-span-4 sm:col-span-1"},$e={class:"col-span-4 sm:col-span-1"},fe={class:"col-span-3 sm:col-span-1"},Fe={class:"col-span-3 sm:col-span-1"},De={key:0,class:"col-span-4 sm:col-span-1"},Ee={key:1,class:"col-span-3 sm:col-span-1"},Le={key:2,class:"col-span-3 sm:col-span-1"},Se={key:3,class:"col-span-3 sm:col-span-1"},Ce={key:4,class:"col-span-3 sm:col-span-1"},Re={key:5,class:"col-span-3 sm:col-span-1"},Be={key:6,class:"col-span-3 sm:col-span-1"},Te={class:"col-span-3 sm:col-span-1"},Ge={class:"col-span-3 sm:col-span-1"},Pe={class:"col-span-3 sm:col-span-1"},Oe={class:"col-span-3 sm:col-span-1"},He={key:7,class:"col-span-4 sm:col-span-1"},Ae={key:8,class:"col-span-3 sm:col-span-1"},Me={class:"col-span-3 sm:col-span-1"},je={key:9,class:"col-span-4 sm:col-span-1"},we={key:10,class:"col-span-4 sm:col-span-1"},ze={key:1,class:"col-span-4 sm:col-span-1"},Je={class:"col-span-4 sm:col-span-1"},Ke={class:"col-span-4"},We={class:"col-span-4"},Qe={class:"mt-4 grid grid-cols-4 gap-6"},Xe={class:"col-span-4"},Ye={name:"ReceptionEnquiryForm"},Ze=Object.assign(Ye,{setup(z){const N=j(),V=ie(),v={period:"",date:"",nature:"admission",stage:"",type:"",source:"",employee:"",course:"",name:"",gender:"",birthDate:"",anniversaryDate:"",uniqueIdNumber1:"",uniqueIdNumber2:"",uniqueIdNumber3:"",uniqueIdNumber4:"",uniqueIdNumber5:"",birthPlace:"",nationality:"",motherTongue:"",bloodGroup:"",maritalStatus:"",religion:"",locality:"",caste:"",category:"",email:"",contactNumber:"",description:"",remarks:"",media:[],mediaUpdated:!1,mediaToken:A(),mediaHash:[],customFields:[]},D="reception/enquiry/",t=de(D),T=m("student.isUniqueIdNumber1Enabled"),J=m("student.isUniqueIdNumber2Enabled"),K=m("student.isUniqueIdNumber3Enabled"),W=m("student.isUniqueIdNumber4Enabled"),Q=m("student.isUniqueIdNumber5Enabled"),X=m("student.uniqueIdNumber1Label"),Y=m("student.uniqueIdNumber2Label"),Z=m("student.uniqueIdNumber3Label"),x=m("student.uniqueIdNumber4Label"),_=m("student.uniqueIdNumber5Label"),h=m("contact.enableLocalityField"),ee=m("contact.enableCategoryField"),oe=m("contact.enableCasteField"),re=m("student.enableMaritalStatus"),le=m("student.enableAnniversaryDate"),d=G({natures:[],stages:[],types:[],sources:[],genders:[],periods:[],bloodGroups:[],religions:[],maritalStatuses:[],localities:[],castes:[],categories:[],customFields:[]}),l=G({...v}),g=G({isLoaded:!N.params.uuid}),{customFields:P,setCustomFields:O}=be(),te=n=>{Object.assign(d,n),O(d.customFields),v.customFields=P.value,Object.assign(l,M(v))},ne=()=>{l.mediaToken=A(),l.mediaHash=[]},ae=n=>{var o,E,y,I,b,L,S,$,f,C,R,B,e,H;Object.assign(v,{...n,date:n.date.value,period:n.period.uuid,nature:((o=n.nature)==null?void 0:o.value)||"",type:((E=n.type)==null?void 0:E.uuid)||"",source:((y=n.source)==null?void 0:y.uuid)||"",employee:((I=n.employee)==null?void 0:I.uuid)||"",course:((b=n.course)==null?void 0:b.uuid)||"",gender:((L=n.gender)==null?void 0:L.value)||"",birthDate:((S=n.birthDate)==null?void 0:S.value)||"",caste:(($=n.caste)==null?void 0:$.uuid)||"",category:((f=n.category)==null?void 0:f.uuid)||"",bloodGroup:((C=n.bloodGroup)==null?void 0:C.value)||"",maritalStatus:((R=n.maritalStatus)==null?void 0:R.value)||"",religion:((B=n.religion)==null?void 0:B.uuid)||"",anniversaryDate:((e=n.anniversaryDate)==null?void 0:e.value)||""}),O(d.customFields,n.customFields),v.customFields=P.value,Object.assign(l,M(v)),g.employee=(H=n.employee)==null?void 0:H.uuid,g.isLoaded=!0},se=()=>{g.isLoaded},ue=n=>{if(N.params.uuid){V.push({name:"ReceptionEnquiry"});return}n.enquiry.nature.value=="admission"?V.push({name:"ReceptionEnquiryWizard",params:{uuid:n.enquiry.uuid},query:{tab:"contact"}}):V.push({name:"ReceptionEnquiry"})};return me(async()=>{}),(n,o)=>{const E=c("CustomCheckbox"),y=c("BaseSelect"),I=c("DatePicker"),b=c("BaseInput"),L=c("BaseLabel"),S=c("BaseRadioGroup"),$=c("BaseSelectSearch"),f=c("BaseTextarea"),C=c("CustomField"),R=c("MediaUpload"),B=c("FormAction");return u(),k(B,{"pre-requisites":!0,onSetPreRequisites:te,"keep-adding":!1,"init-url":D,"init-form":v,form:l,"set-form":ae,"after-submit":ue,onResetMediaFiles:ne},{default:U(()=>[s("div",ce,[s("div",ye,[a(E,{disabled:!!r(N).params.uuid,options:d.natures,modelValue:l.nature,"onUpdate:modelValue":o[0]||(o[0]=e=>l.nature=e),error:r(t).nature,"onUpdate:error":o[1]||(o[1]=e=>r(t).nature=e)},null,8,["disabled","options","modelValue","error"])]),l.nature=="admission"?(u(),p("div",Ve,[a(y,{modelValue:l.stage,"onUpdate:modelValue":o[2]||(o[2]=e=>l.stage=e),name:"stage",label:n.$trans("reception.enquiry.props.stage"),options:d.stages,"label-prop":"name","value-prop":"uuid",error:r(t).stage,"onUpdate:error":o[3]||(o[3]=e=>r(t).stage=e)},null,8,["modelValue","label","options","error"])])):i("",!0)]),s("div",ge,[s("div",qe,[a(y,{modelValue:l.period,"onUpdate:modelValue":o[4]||(o[4]=e=>l.period=e),name:"period",label:n.$trans("global.select",{attribute:n.$trans("academic.period.period")}),options:d.periods,"label-prop":"name","value-prop":"uuid",error:r(t).period,"onUpdate:error":o[5]||(o[5]=e=>r(t).period=e),onChange:se},null,8,["modelValue","label","options","error"])]),s("div",ve,[a(I,{modelValue:l.date,"onUpdate:modelValue":o[6]||(o[6]=e=>l.date=e),name:"date",label:n.$trans("reception.enquiry.props.date"),"no-clear":"",error:r(t).date,"onUpdate:error":o[7]||(o[7]=e=>r(t).date=e)},null,8,["modelValue","label","error"])]),s("div",Ue,[a(y,{modelValue:l.type,"onUpdate:modelValue":o[8]||(o[8]=e=>l.type=e),name:"type",label:n.$trans("reception.enquiry.props.type"),options:d.types,"label-prop":"name","value-prop":"uuid",error:r(t).type,"onUpdate:error":o[9]||(o[9]=e=>r(t).type=e)},null,8,["modelValue","label","options","error"])]),s("div",Ne,[a(y,{modelValue:l.source,"onUpdate:modelValue":o[10]||(o[10]=e=>l.source=e),name:"source",label:n.$trans("reception.enquiry.props.source"),options:d.sources,"label-prop":"name","value-prop":"uuid",error:r(t).source,"onUpdate:error":o[11]||(o[11]=e=>r(t).source=e)},null,8,["modelValue","label","options","error"])])]),s("div",Ie,[s("div",ke,[a(b,{type:"text",modelValue:l.name,"onUpdate:modelValue":o[12]||(o[12]=e=>l.name=e),name:"name",label:n.$trans("reception.enquiry.props.name"),error:r(t).name,"onUpdate:error":o[13]||(o[13]=e=>r(t).name=e)},null,8,["modelValue","label","error"])]),s("div",$e,[a(b,{type:"text",modelValue:l.contactNumber,"onUpdate:modelValue":o[14]||(o[14]=e=>l.contactNumber=e),name:"contactNumber",label:n.$trans("reception.enquiry.props.contact_number"),error:r(t).contactNumber,"onUpdate:error":o[15]||(o[15]=e=>r(t).contactNumber=e)},null,8,["modelValue","label","error"])]),l.nature==="admission"?(u(),p(w,{key:0},[s("div",fe,[a(L,null,{default:U(()=>[F(q(n.$trans("contact.props.gender")),1)]),_:1}),a(S,{"top-margin":"",options:d.genders,name:"gender",modelValue:l.gender,"onUpdate:modelValue":o[16]||(o[16]=e=>l.gender=e),error:r(t).gender,"onUpdate:error":o[17]||(o[17]=e=>r(t).gender=e),horizontal:""},null,8,["options","modelValue","error"])]),s("div",Fe,[a(I,{modelValue:l.birthDate,"onUpdate:modelValue":o[18]||(o[18]=e=>l.birthDate=e),name:"birthDate",label:n.$trans("contact.props.birth_date"),"no-clear":"",error:r(t).birthDate,"onUpdate:error":o[19]||(o[19]=e=>r(t).birthDate=e)},null,8,["modelValue","label","error"])]),l.period?(u(),p("div",De,[g.isLoaded?(u(),k($,{key:0,name:"course",label:n.$trans("global.select",{attribute:n.$trans("academic.course.course")}),modelValue:l.course,"onUpdate:modelValue":o[20]||(o[20]=e=>l.course=e),error:r(t).course,"onUpdate:error":o[21]||(o[21]=e=>r(t).course=e),"value-prop":"uuid","init-search":l.course,"init-search-key":r(N).params.uuid?"uuid":"name","additional-search-query":{period:l.period},"search-action":"academic/course/list"},{selectedOption:U(e=>[F(q(e.value.division.name)+" - "+q(e.value.name),1)]),listOption:U(e=>[F(q(e.option.division.name)+" - "+q(e.option.name),1)]),_:1},8,["label","modelValue","error","init-search","init-search-key","additional-search-query"])):i("",!0)])):i("",!0),r(le)?(u(),p("div",Ee,[a(I,{modelValue:l.anniversaryDate,"onUpdate:modelValue":o[22]||(o[22]=e=>l.anniversaryDate=e),name:"anniversaryDate",label:n.$trans("contact.props.anniversary_date"),"no-clear":"",error:r(t).anniversaryDate,"onUpdate:error":o[23]||(o[23]=e=>r(t).anniversaryDate=e)},null,8,["modelValue","label","error"])])):i("",!0),r(T)?(u(),p("div",Le,[a(b,{type:"text",modelValue:l.uniqueIdNumber1,"onUpdate:modelValue":o[24]||(o[24]=e=>l.uniqueIdNumber1=e),name:"uniqueIdNumber1",label:r(X),error:r(t).uniqueIdNumber1,"onUpdate:error":o[25]||(o[25]=e=>r(t).uniqueIdNumber1=e)},null,8,["modelValue","label","error"])])):i("",!0),r(J)?(u(),p("div",Se,[a(b,{type:"text",modelValue:l.uniqueIdNumber2,"onUpdate:modelValue":o[26]||(o[26]=e=>l.uniqueIdNumber2=e),name:"uniqueIdNumber2",label:r(Y),error:r(t).uniqueIdNumber2,"onUpdate:error":o[27]||(o[27]=e=>r(t).uniqueIdNumber2=e)},null,8,["modelValue","label","error"])])):i("",!0),r(K)?(u(),p("div",Ce,[a(b,{type:"text",modelValue:l.uniqueIdNumber3,"onUpdate:modelValue":o[28]||(o[28]=e=>l.uniqueIdNumber3=e),name:"uniqueIdNumber3",label:r(Z),error:r(t).uniqueIdNumber3,"onUpdate:error":o[29]||(o[29]=e=>r(t).uniqueIdNumber3=e)},null,8,["modelValue","label","error"])])):i("",!0),r(W)?(u(),p("div",Re,[a(b,{type:"text",modelValue:l.uniqueIdNumber4,"onUpdate:modelValue":o[30]||(o[30]=e=>l.uniqueIdNumber4=e),name:"uniqueIdNumber4",label:r(x),error:r(t).uniqueIdNumber4,"onUpdate:error":o[31]||(o[31]=e=>r(t).uniqueIdNumber4=e)},null,8,["modelValue","label","error"])])):i("",!0),r(Q)?(u(),p("div",Be,[a(b,{type:"text",modelValue:l.uniqueIdNumber5,"onUpdate:modelValue":o[32]||(o[32]=e=>l.uniqueIdNumber5=e),name:"uniqueIdNumber5",label:r(_),error:r(t).uniqueIdNumber5,"onUpdate:error":o[33]||(o[33]=e=>r(t).uniqueIdNumber5=e)},null,8,["modelValue","label","error"])])):i("",!0),s("div",Te,[a(b,{type:"text",modelValue:l.birthPlace,"onUpdate:modelValue":o[34]||(o[34]=e=>l.birthPlace=e),name:"birthPlace",label:n.$trans("contact.props.birth_place"),error:r(t).birthPlace,"onUpdate:error":o[35]||(o[35]=e=>r(t).birthPlace=e)},null,8,["modelValue","label","error"])]),s("div",Ge,[a(b,{type:"text",modelValue:l.nationality,"onUpdate:modelValue":o[36]||(o[36]=e=>l.nationality=e),name:"nationality",label:n.$trans("contact.props.nationality"),error:r(t).nationality,"onUpdate:error":o[37]||(o[37]=e=>r(t).nationality=e)},null,8,["modelValue","label","error"])]),s("div",Pe,[a(b,{type:"text",modelValue:l.motherTongue,"onUpdate:modelValue":o[38]||(o[38]=e=>l.motherTongue=e),name:"motherTongue",label:n.$trans("contact.props.mother_tongue"),error:r(t).motherTongue,"onUpdate:error":o[39]||(o[39]=e=>r(t).motherTongue=e)},null,8,["modelValue","label","error"])]),s("div",Oe,[g.isLoaded?(u(),k(y,{key:0,modelValue:l.bloodGroup,"onUpdate:modelValue":o[40]||(o[40]=e=>l.bloodGroup=e),name:"bloodGroup",label:n.$trans("contact.props.blood_group"),options:d.bloodGroups,error:r(t).bloodGroup,"onUpdate:error":o[41]||(o[41]=e=>r(t).bloodGroup=e)},null,8,["modelValue","label","options","error"])):i("",!0)]),r(h)?(u(),p("div",He,[a(y,{modelValue:l.locality,"onUpdate:modelValue":o[42]||(o[42]=e=>l.locality=e),name:"locality",label:n.$trans("contact.props.locality"),options:d.localities,"label-prop":"label","value-prop":"value",error:r(t).locality,"onUpdate:error":o[43]||(o[43]=e=>r(t).locality=e)},null,8,["modelValue","label","options","error"])])):i("",!0),r(re)?(u(),p("div",Ae,[g.isLoaded?(u(),k(y,{key:0,modelValue:l.maritalStatus,"onUpdate:modelValue":o[44]||(o[44]=e=>l.maritalStatus=e),name:"maritalStatus",label:n.$trans("contact.props.marital_status"),options:d.maritalStatuses,error:r(t).maritalStatus,"onUpdate:error":o[45]||(o[45]=e=>r(t).maritalStatus=e)},null,8,["modelValue","label","options","error"])):i("",!0)])):i("",!0),s("div",Me,[g.isLoaded?(u(),k(y,{key:0,name:"religion",label:n.$trans("global.select",{attribute:n.$trans("contact.religion.religion")}),modelValue:l.religion,"onUpdate:modelValue":o[46]||(o[46]=e=>l.religion=e),error:r(t).religion,"onUpdate:error":o[47]||(o[47]=e=>r(t).religion=e),options:d.religions,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):i("",!0)]),r(oe)?(u(),p("div",je,[a(y,{modelValue:l.caste,"onUpdate:modelValue":o[48]||(o[48]=e=>l.caste=e),name:"caste",label:n.$trans("contact.caste.caste"),options:d.castes,"label-prop":"name","value-prop":"uuid",error:r(t).caste,"onUpdate:error":o[49]||(o[49]=e=>r(t).caste=e)},null,8,["modelValue","label","options","error"])])):i("",!0),r(ee)?(u(),p("div",we,[a(y,{modelValue:l.category,"onUpdate:modelValue":o[50]||(o[50]=e=>l.category=e),name:"category",label:n.$trans("contact.category.category"),options:d.categories,"label-prop":"name","value-prop":"uuid",error:r(t).category,"onUpdate:error":o[51]||(o[51]=e=>r(t).category=e)},null,8,["modelValue","label","options","error"])])):i("",!0)],64)):i("",!0),l.nature==="other"?(u(),p("div",ze,[a(b,{type:"text",modelValue:l.email,"onUpdate:modelValue":o[52]||(o[52]=e=>l.email=e),name:"email",label:n.$trans("reception.enquiry.props.email"),error:r(t).email,"onUpdate:error":o[53]||(o[53]=e=>r(t).email=e)},null,8,["modelValue","label","error"])])):i("",!0),s("div",Je,[g.isLoaded?(u(),k($,{key:0,name:"employee",label:n.$trans("reception.enquiry.props.assigned_to"),placeholder:n.$trans("global.select",{attribute:n.$trans("employee.employee")}),modelValue:l.employee,"onUpdate:modelValue":o[54]||(o[54]=e=>l.employee=e),error:r(t).employee,"onUpdate:error":o[55]||(o[55]=e=>r(t).employee=e),"value-prop":"uuid","init-search":g.employee,"search-key":"name","search-action":"employee/summary"},{selectedOption:U(e=>[F(q(e.value.name)+" ("+q(e.value.designation)+") ",1)]),listOption:U(e=>[F(q(e.option.name)+" ("+q(e.option.designation)+") ",1)]),_:1},8,["label","placeholder","modelValue","error","init-search"])):i("",!0)]),s("div",Ke,[a(f,{rows:1,modelValue:l.description,"onUpdate:modelValue":o[56]||(o[56]=e=>l.description=e),name:"description",label:n.$trans("reception.enquiry.props.description"),error:r(t).description,"onUpdate:error":o[57]||(o[57]=e=>r(t).description=e)},null,8,["modelValue","label","error"])]),s("div",We,[a(f,{rows:1,modelValue:l.remarks,"onUpdate:modelValue":o[58]||(o[58]=e=>l.remarks=e),name:"remarks",label:n.$trans("reception.enquiry.props.remarks"),error:r(t).remarks,"onUpdate:error":o[59]||(o[59]=e=>r(t).remarks=e)},null,8,["modelValue","label","error"])])]),a(C,{customFields:l.customFields,"onUpdate:customFields":o[60]||(o[60]=e=>l.customFields=e),formErrors:r(t),"onUpdate:formErrors":o[61]||(o[61]=e=>pe(t)?t.value=e:null)},null,8,["customFields","formErrors"]),s("div",Qe,[s("div",Xe,[a(R,{multiple:"",label:n.$trans("general.file"),module:"enquiry",media:l.media,"media-token":l.mediaToken,onIsUpdated:o[62]||(o[62]=e=>l.mediaUpdated=!0),onSetHash:o[63]||(o[63]=e=>l.mediaHash.push(e))},null,8,["label","media","media-token"])])])]),_:1},8,["form"])}}}),xe={name:"ReceptionEnquiryAction"},eo=Object.assign(xe,{setup(z){const N=j();return(V,v)=>{const D=c("PageHeaderAction"),t=c("PageHeader"),T=c("ParentTransition");return u(),p(w,null,[a(t,{title:V.$trans(r(N).meta.trans,{attribute:V.$trans(r(N).meta.label)}),navs:[{label:V.$trans("reception.reception"),path:"Reception"},{label:V.$trans("reception.enquiry.enquiry"),path:"ReceptionEnquiryList"}]},{default:U(()=>[a(D,{name:"ReceptionEnquiry",title:V.$trans("reception.enquiry.enquiry"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),a(T,{appear:"",visibility:!0},{default:U(()=>[a(Ze)]),_:1})],64)}}});export{eo as default};
