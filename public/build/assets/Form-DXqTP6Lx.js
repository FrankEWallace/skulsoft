import{u as D,I as z,g as G,m as P,q as E,K as M,r as V,t as I,o as g,w as f,d as p,e as u,a as S,b as k,v as U,x as $,f as l,J as Q,H as J,L as Z,k as x,j as X,p as W,M as ee,F as H,N as te,i as ae}from"./app-Cvm44xuh.js";import{u as se}from"./useCustomFields-B8b01gVh.js";import{_ as re,a as ne,b as oe,c as ie,d as le,e as de}from"./Billdesk-CjG2zd7T.js";const ue={class:"grid grid-cols-3 gap-6"},me={class:"col-span-3 sm:col-span-1"},pe={class:"col-span-3 sm:col-span-1"},ce={key:0,class:"col-span-3 sm:col-span-1"},be={class:"col-span-3 sm:col-span-1"},ge={class:"col-span-3 sm:col-span-1"},fe={class:"col-span-3 sm:col-span-1"},ye={key:1,class:"col-span-3 sm:col-span-1"},ve={key:2,class:"col-span-3 sm:col-span-1"},$e={key:3,class:"col-span-3 sm:col-span-1"},qe={key:4,class:"col-span-3 sm:col-span-1"},ke={key:5,class:"col-span-3 sm:col-span-1"},Ue={class:"col-span-3 sm:col-span-1"},Ne={key:6,class:"col-span-3 sm:col-span-1"},Re={class:"col-span-3 sm:col-span-1"},Ae={class:"col-span-3 sm:col-span-1"},Ve={class:"col-span-3 sm:col-span-1"},Ie={class:"grid grid-cols-3 gap-6"},we={class:"col-span-3 sm:col-span-1"},Le={class:"col-span-3 sm:col-span-1"},he={name:"OnlineRegistrationBasicForm"},_e=Object.assign(he,{props:{registration:{type:Object,required:!0},preRequisites:{type:Object,required:!0}},emits:["completed"],setup(N,{emit:F}){const _=D(),{customFields:T,setCustomFields:B}=se(),R=F,h=N,y={birthDate:"",birthPlace:"",gender:"",fatherName:"",motherName:"",nationality:"",motherTongue:"",bloodGroup:"",maritalStatus:"",uniqueIdNumber1:"",uniqueIdNumber2:"",uniqueIdNumber3:"",uniqueIdNumber4:"",uniqueIdNumber5:"",category:"",caste:"",religion:"",customFields:[]},e="onlineRegistration/",t=z(e),q=G("student.enableMaritalStatus"),c=G("student.enableAnniversaryDate"),o=P({...y}),m=P({isLoaded:!_.params.uuid}),n=s=>{R("completed")};return E(()=>{var a,d,b,w,A,i,O;let s=h.registration.contact;Object.assign(y,{birthDate:((a=s.birthDate)==null?void 0:a.value)||"",birthPlace:s.birthPlace,gender:((d=s.gender)==null?void 0:d.value)||"",fatherName:s.fatherName,motherName:s.motherName,nationality:s.nationality,motherTongue:s.motherTongue,bloodGroup:((b=s.bloodGroup)==null?void 0:b.value)||"",maritalStatus:((w=s.maritalStatus)==null?void 0:w.value)||"",uniqueIdNumber1:s.uniqueIdNumber1,uniqueIdNumber2:s.uniqueIdNumber2,uniqueIdNumber3:s.uniqueIdNumber3,uniqueIdNumber4:s.uniqueIdNumber4,uniqueIdNumber5:s.uniqueIdNumber5,category:((A=s.category)==null?void 0:A.uuid)||"",caste:((i=s.caste)==null?void 0:i.uuid)||"",religion:((O=s.religion)==null?void 0:O.uuid)||""}),B(h.preRequisites.customFields,h.registration.customFields),y.customFields=T.value,Object.assign(o,M(y)),m.isLoaded=!0}),(s,a)=>{const d=V("IsRequired"),b=V("BaseLabel"),w=V("BaseRadioGroup"),A=V("DatePicker"),i=V("BaseInput"),O=V("BaseSelect"),L=V("CustomField"),j=V("BaseFieldset"),v=V("FormAction");return g(),I(v,{"no-card":"","init-url":e,"no-data-fetch":"",uuid:l(_).params.number,action:"updateBasic","init-form":y,form:o,"stay-on":"","validate-unchanged":!1,"submit-text":s.$trans("pagination.next"),"after-submit":n},{default:f(()=>[p("div",ue,[p("div",me,[u(b,null,{default:f(()=>[p("span",null,[U($(s.$trans("contact.props.gender"))+" ",1),u(d,{"is-required":""})])]),_:1}),u(w,{"top-margin":"",options:N.preRequisites.genders,name:"gender",modelValue:o.gender,"onUpdate:modelValue":a[0]||(a[0]=r=>o.gender=r),error:l(t).gender,"onUpdate:error":a[1]||(a[1]=r=>l(t).gender=r),horizontal:""},null,8,["options","modelValue","error"])]),p("div",pe,[u(A,{"is-required":"",modelValue:o.birthDate,"onUpdate:modelValue":a[2]||(a[2]=r=>o.birthDate=r),name:"birthDate",label:s.$trans("contact.props.birth_date"),"no-clear":"",error:l(t).birthDate,"onUpdate:error":a[3]||(a[3]=r=>l(t).birthDate=r)},null,8,["modelValue","label","error"])]),l(c)?(g(),S("div",ce,[u(A,{modelValue:o.anniversaryDate,"onUpdate:modelValue":a[4]||(a[4]=r=>o.anniversaryDate=r),name:"anniversaryDate",label:s.$trans("contact.props.anniversary_date"),"no-clear":"",error:l(t).anniversaryDate,"onUpdate:error":a[5]||(a[5]=r=>l(t).anniversaryDate=r)},null,8,["modelValue","label","error"])])):k("",!0),p("div",be,[u(i,{type:"text",modelValue:o.birthPlace,"onUpdate:modelValue":a[6]||(a[6]=r=>o.birthPlace=r),name:"birthPlace",label:s.$trans("contact.props.birth_place"),error:l(t).birthPlace,"onUpdate:error":a[7]||(a[7]=r=>l(t).birthPlace=r)},null,8,["modelValue","label","error"])]),p("div",ge,[u(i,{"is-required":"",type:"text",modelValue:o.nationality,"onUpdate:modelValue":a[8]||(a[8]=r=>o.nationality=r),name:"nationality",label:s.$trans("contact.props.nationality"),error:l(t).nationality,"onUpdate:error":a[9]||(a[9]=r=>l(t).nationality=r)},null,8,["modelValue","label","error"])]),p("div",fe,[u(i,{type:"text",modelValue:o.motherTongue,"onUpdate:modelValue":a[10]||(a[10]=r=>o.motherTongue=r),name:"motherTongue",label:s.$trans("contact.props.mother_tongue"),error:l(t).motherTongue,"onUpdate:error":a[11]||(a[11]=r=>l(t).motherTongue=r)},null,8,["modelValue","label","error"])]),N.preRequisites.fields.isUniqueIdNumber1Enabled?(g(),S("div",ye,[u(i,{"is-required":N.preRequisites.fields.isUniqueIdNumber1Required,type:"text",modelValue:o.uniqueIdNumber1,"onUpdate:modelValue":a[12]||(a[12]=r=>o.uniqueIdNumber1=r),name:"uniqueIdNumber1",label:N.preRequisites.fields.uniqueIdNumber1Label,error:l(t).uniqueIdNumber1,"onUpdate:error":a[13]||(a[13]=r=>l(t).uniqueIdNumber1=r)},null,8,["is-required","modelValue","label","error"])])):k("",!0),N.preRequisites.fields.isUniqueIdNumber2Enabled?(g(),S("div",ve,[u(i,{"is-required":N.preRequisites.fields.isUniqueIdNumber2Required,type:"text",modelValue:o.uniqueIdNumber2,"onUpdate:modelValue":a[14]||(a[14]=r=>o.uniqueIdNumber2=r),name:"uniqueIdNumber2",label:N.preRequisites.fields.uniqueIdNumber2Label,error:l(t).uniqueIdNumber2,"onUpdate:error":a[15]||(a[15]=r=>l(t).uniqueIdNumber2=r)},null,8,["is-required","modelValue","label","error"])])):k("",!0),N.preRequisites.fields.isUniqueIdNumber3Enabled?(g(),S("div",$e,[u(i,{"is-required":N.preRequisites.fields.isUniqueIdNumber3Required,type:"text",modelValue:o.uniqueIdNumber3,"onUpdate:modelValue":a[16]||(a[16]=r=>o.uniqueIdNumber3=r),name:"uniqueIdNumber3",label:N.preRequisites.fields.uniqueIdNumber3Label,error:l(t).uniqueIdNumber3,"onUpdate:error":a[17]||(a[17]=r=>l(t).uniqueIdNumber3=r)},null,8,["is-required","modelValue","label","error"])])):k("",!0),N.preRequisites.fields.isUniqueIdNumber4Enabled?(g(),S("div",qe,[u(i,{"is-required":N.preRequisites.fields.isUniqueIdNumber4Required,type:"text",modelValue:o.uniqueIdNumber4,"onUpdate:modelValue":a[18]||(a[18]=r=>o.uniqueIdNumber4=r),name:"uniqueIdNumber4",label:N.preRequisites.fields.uniqueIdNumber4Label,error:l(t).uniqueIdNumber4,"onUpdate:error":a[19]||(a[19]=r=>l(t).uniqueIdNumber4=r)},null,8,["is-required","modelValue","label","error"])])):k("",!0),N.preRequisites.fields.isUniqueIdNumber5Enabled?(g(),S("div",ke,[u(i,{"is-required":N.preRequisites.fields.isUniqueIdNumber5Required,type:"text",modelValue:o.uniqueIdNumber5,"onUpdate:modelValue":a[20]||(a[20]=r=>o.uniqueIdNumber5=r),name:"uniqueIdNumber5",label:N.preRequisites.fields.uniqueIdNumber5Label,error:l(t).uniqueIdNumber5,"onUpdate:error":a[21]||(a[21]=r=>l(t).uniqueIdNumber5=r)},null,8,["is-required","modelValue","label","error"])])):k("",!0),p("div",Ue,[m.isLoaded?(g(),I(O,{key:0,modelValue:o.bloodGroup,"onUpdate:modelValue":a[22]||(a[22]=r=>o.bloodGroup=r),name:"bloodGroup",label:s.$trans("contact.props.blood_group"),options:N.preRequisites.bloodGroups,error:l(t).bloodGroup,"onUpdate:error":a[23]||(a[23]=r=>l(t).bloodGroup=r)},null,8,["modelValue","label","options","error"])):k("",!0)]),l(q)?(g(),S("div",Ne,[m.isLoaded?(g(),I(O,{key:0,modelValue:o.maritalStatus,"onUpdate:modelValue":a[24]||(a[24]=r=>o.maritalStatus=r),name:"maritalStatus",label:s.$trans("contact.props.marital_status"),options:N.preRequisites.maritalStatuses,error:l(t).maritalStatus,"onUpdate:error":a[25]||(a[25]=r=>l(t).maritalStatus=r)},null,8,["modelValue","label","options","error"])):k("",!0)])):k("",!0),p("div",Re,[m.isLoaded?(g(),I(O,{key:0,name:"religion",label:s.$trans("global.select",{attribute:s.$trans("contact.religion.religion")}),modelValue:o.religion,"onUpdate:modelValue":a[26]||(a[26]=r=>o.religion=r),error:l(t).religion,"onUpdate:error":a[27]||(a[27]=r=>l(t).religion=r),options:N.preRequisites.religions,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):k("",!0)]),p("div",Ae,[m.isLoaded?(g(),I(O,{key:0,name:"category",label:s.$trans("global.select",{attribute:s.$trans("contact.category.category")}),modelValue:o.category,"onUpdate:modelValue":a[28]||(a[28]=r=>o.category=r),error:l(t).category,"onUpdate:error":a[29]||(a[29]=r=>l(t).category=r),options:N.preRequisites.categories,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):k("",!0)]),p("div",Ve,[m.isLoaded?(g(),I(O,{key:0,name:"caste",label:s.$trans("global.select",{attribute:s.$trans("contact.caste.caste")}),modelValue:o.caste,"onUpdate:modelValue":a[30]||(a[30]=r=>o.caste=r),error:l(t).caste,"onUpdate:error":a[31]||(a[31]=r=>l(t).caste=r),options:N.preRequisites.castes,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):k("",!0)])]),u(L,{customFields:o.customFields,"onUpdate:customFields":a[32]||(a[32]=r=>o.customFields=r),formErrors:l(t),"onUpdate:formErrors":a[33]||(a[33]=r=>Q(t)?t.value=r:null)},null,8,["customFields","formErrors"]),u(j,{class:"mt-4"},{legend:f(()=>[U($(s.$trans("student.props.parent")),1)]),default:f(()=>[p("div",Ie,[p("div",we,[u(i,{"is-required":"",type:"text",modelValue:o.fatherName,"onUpdate:modelValue":a[34]||(a[34]=r=>o.fatherName=r),name:"fatherName",label:s.$trans("contact.props.father_name"),error:l(t).fatherName,"onUpdate:error":a[35]||(a[35]=r=>l(t).fatherName=r)},null,8,["modelValue","label","error"])]),p("div",Le,[u(i,{"is-required":"",type:"text",modelValue:o.motherName,"onUpdate:modelValue":a[36]||(a[36]=r=>o.motherName=r),name:"motherName",label:s.$trans("contact.props.mother_name"),error:l(t).motherName,"onUpdate:error":a[37]||(a[37]=r=>l(t).motherName=r)},null,8,["modelValue","label","error"])])])]),_:1})]),_:1},8,["uuid","form","submit-text"])}}}),Te={class:"grid grid-cols-3 gap-6"},Be={class:"col-span-3 sm:col-span-1"},Oe={class:"col-span-3 sm:col-span-1"},Se={class:"col-span-3"},Pe={class:"grid grid-cols-3 gap-6"},Fe={class:"col-span-3"},Ce={class:"grid grid-cols-3 gap-6"},je={class:"col-span-3 sm:col-span-1"},De={class:"mt-4 grid grid-cols-3 gap-6"},ze={class:"grid grid-cols-1"},Ee={class:"col"},Ge={class:"col"},Me={name:"OnlineRegistrationContactForm"},He=Object.assign(Me,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(N,{emit:F}){const _=D(),T=F,B=N,R={alternateRecords:{contactNumber:"",email:""},presentAddress:{addressLine1:"",addressLine2:"",city:"",state:"",zipcode:"",country:""},permanentAddress:{sameAsPresentAddress:!0,addressLine1:"",addressLine2:"",city:"",state:"",zipcode:"",country:""},idProof:[],addressProof:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},h="onlineRegistration/",y=z(h),e=P({}),t=P({...R}),q=P({isLoaded:!_.params.uuid}),c=m=>{Object.assign(e,m)},o=m=>{T("completed")};return E(()=>{var n,s,a,d,b,w,A,i,O,L,j,v,r,C;let m=B.registration.contact;Object.assign(R,{alternateRecords:{contactNumber:(n=m.alternateRecords)==null?void 0:n.contactNumber,email:(s=m.alternateRecords)==null?void 0:s.email},presentAddress:{addressLine1:(a=m.presentAddress)==null?void 0:a.addressLine1,addressLine2:(d=m.presentAddress)==null?void 0:d.addressLine2,city:(b=m.presentAddress)==null?void 0:b.city,state:(w=m.presentAddress)==null?void 0:w.state,zipcode:(A=m.presentAddress)==null?void 0:A.zipcode,country:(i=m.presentAddress)==null?void 0:i.country},permanentAddress:{sameAsPresentAddress:m.sameAsPresentAddress,addressLine1:(O=m.permanentAddress)==null?void 0:O.addressLine1,addressLine2:(L=m.permanentAddress)==null?void 0:L.addressLine2,city:(j=m.permanentAddress)==null?void 0:j.city,state:(v=m.permanentAddress)==null?void 0:v.state,zipcode:(r=m.permanentAddress)==null?void 0:r.zipcode,country:(C=m.permanentAddress)==null?void 0:C.country},idProof:B.registration.media.filter(K=>K.section=="id_proof"),addressProof:B.registration.media.filter(K=>K.section=="address_proof"),mediaToken:B.registration.mediaToken}),Object.assign(t,M(R)),q.isLoaded=!0}),(m,n)=>{const s=V("BaseInput"),a=V("AddressInput"),d=V("BaseFieldset"),b=V("BaseSwitch"),w=V("MediaUpload"),A=V("FormAction");return q.isLoaded?(g(),I(A,{key:0,"no-card":"","pre-requisites":!1,onSetPreRequisites:c,"init-url":h,"no-data-fetch":"",uuid:l(_).params.number,action:"updateContact","init-form":R,form:t,"stay-on":"","validate-unchanged":!1,"submit-text":m.$trans("pagination.next"),"after-submit":o},{default:f(()=>[p("div",Te,[p("div",Be,[u(s,{type:"text",modelValue:t.alternateRecords.contactNumber,"onUpdate:modelValue":n[0]||(n[0]=i=>t.alternateRecords.contactNumber=i),name:"alternateContactNumber",label:m.$trans("global.alternate",{attribute:m.$trans("contact.props.contact_number")}),error:l(y).alternateContactNumber,"onUpdate:error":n[1]||(n[1]=i=>l(y).alternateContactNumber=i)},null,8,["modelValue","label","error"])]),p("div",Oe,[u(s,{type:"text",modelValue:t.alternateRecords.email,"onUpdate:modelValue":n[2]||(n[2]=i=>t.alternateRecords.email=i),name:"alternateEmail",label:m.$trans("global.alternate",{attribute:m.$trans("contact.props.email")}),error:l(y).alternateEmail,"onUpdate:error":n[3]||(n[3]=i=>l(y).alternateEmail=i)},null,8,["modelValue","label","error"])]),p("div",Se,[u(d,null,{legend:f(()=>[U($(m.$trans("contact.props.present_address")),1)]),default:f(()=>[p("div",Pe,[u(a,{prefix:"presentAddress",addressLine1:t.presentAddress.addressLine1,"onUpdate:addressLine1":n[4]||(n[4]=i=>t.presentAddress.addressLine1=i),addressLine2:t.presentAddress.addressLine2,"onUpdate:addressLine2":n[5]||(n[5]=i=>t.presentAddress.addressLine2=i),city:t.presentAddress.city,"onUpdate:city":n[6]||(n[6]=i=>t.presentAddress.city=i),state:t.presentAddress.state,"onUpdate:state":n[7]||(n[7]=i=>t.presentAddress.state=i),zipcode:t.presentAddress.zipcode,"onUpdate:zipcode":n[8]||(n[8]=i=>t.presentAddress.zipcode=i),country:t.presentAddress.country,"onUpdate:country":n[9]||(n[9]=i=>t.presentAddress.country=i),formErrors:l(y),"onUpdate:formErrors":n[10]||(n[10]=i=>Q(y)?y.value=i:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"])])]),_:1})]),p("div",Fe,[u(d,null,{legend:f(()=>[U($(m.$trans("contact.props.permanent_address")),1)]),default:f(()=>[p("div",Ce,[p("div",je,[u(b,{modelValue:t.permanentAddress.sameAsPresentAddress,"onUpdate:modelValue":n[11]||(n[11]=i=>t.permanentAddress.sameAsPresentAddress=i),name:"sameAsPresentAddress",label:m.$trans("contact.props.same_as_present_address"),error:l(y).sameAsPresentAddress,"onUpdate:error":n[12]||(n[12]=i=>l(y).sameAsPresentAddress=i)},null,8,["modelValue","label","error"])])]),p("div",De,[t.permanentAddress.sameAsPresentAddress?k("",!0):(g(),I(a,{key:0,prefix:"permanentAddress",addressLine1:t.permanentAddress.addressLine1,"onUpdate:addressLine1":n[13]||(n[13]=i=>t.permanentAddress.addressLine1=i),addressLine2:t.permanentAddress.addressLine2,"onUpdate:addressLine2":n[14]||(n[14]=i=>t.permanentAddress.addressLine2=i),city:t.permanentAddress.city,"onUpdate:city":n[15]||(n[15]=i=>t.permanentAddress.city=i),state:t.permanentAddress.state,"onUpdate:state":n[16]||(n[16]=i=>t.permanentAddress.state=i),zipcode:t.permanentAddress.zipcode,"onUpdate:zipcode":n[17]||(n[17]=i=>t.permanentAddress.zipcode=i),country:t.permanentAddress.country,"onUpdate:country":n[18]||(n[18]=i=>t.permanentAddress.country=i),formErrors:l(y),"onUpdate:formErrors":n[19]||(n[19]=i=>Q(y)?y.value=i:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"]))])]),_:1})])]),p("div",ze,[p("div",Ee,[u(w,{multiple:"",guest:"",label:m.$trans("contact.props.id_proof"),module:"registration",section:"id_proof",media:t.idProof,"media-token":t.mediaToken,onIsUpdated:n[20]||(n[20]=i=>t.mediaUpdated=!0),onSetHash:n[21]||(n[21]=i=>t.mediaHash.push(i)),error:l(y).idProof,"onUpdate:error":n[22]||(n[22]=i=>l(y).idProof=i)},null,8,["label","media","media-token","error"])]),p("div",Ge,[u(w,{multiple:"",guest:"",label:m.$trans("contact.props.address_proof"),module:"registration",section:"address_proof",media:t.addressProof,"media-token":t.mediaToken,onIsUpdated:n[23]||(n[23]=i=>t.mediaUpdated=!0),onSetHash:n[24]||(n[24]=i=>t.mediaHash.push(i)),error:l(y).addressProof,"onUpdate:error":n[25]||(n[25]=i=>l(y).addressProof=i)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form","submit-text"])):k("",!0)}}}),Je={class:"grid grid-cols-1"},Ke={class:"col-span-1"},Ye={name:"OnlineRegistrationAvatarForm"},Qe=Object.assign(Ye,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(N,{emit:F}){const _=F,T=N,B=D(),R={photo:"",idProof:[],addressProof:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]};z("onlineRegistration/");const y=P({...R}),e=P({headers:{"auth-token":localStorage.getItem("authToken")}}),t=P({isLoaded:!B.params.uuid}),q=o=>{_("completed");let m=T.registration.contact;y.photo=m==null?void 0:m.photo},c=()=>{_("completed");let o=T.registration.contact;y.photo=o==null?void 0:o.photo};return E(()=>{let o=T.registration.contact;Object.assign(R,{photo:o.photo}),Object.assign(y,M(R)),t.isLoaded=!0}),Z(()=>T.registration.contact,o=>{o&&(y.photo=o.photo)},{deep:!0}),(o,m)=>{const n=V("ImageUpload");return g(),S("div",Je,[p("div",Ke,[u(n,{label:o.$trans("contact.props.photo"),src:y.photo,"upload-path":`online-registrations/${N.registration.applicationNumber}/photo`,"remove-path":`online-registrations/${N.registration.applicationNumber}/photo`,headers:e.headers,onUploaded:q,onRemoved:c},null,8,["label","src","upload-path","remove-path","headers"])])])}}}),We={class:"grid grid-cols-1"},Xe={class:"col"},Ze={class:"col"},xe={name:"OnlineRegistrationUploadForm"},et=Object.assign(xe,{props:{registration:{type:Object,default(){return{}}}},emits:["close","completed"],setup(N,{emit:F}){const _=D(),T=F,B=N,R={marksheet:[],transferCertificate:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},h="onlineRegistration/",y=z(h),e=P({...R}),t=P({isLoaded:!_.params.number}),q=c=>{T("completed")};return E(()=>{Object.assign(R,{marksheet:B.registration.media.filter(c=>c.section=="marksheet"),transferCertificate:B.registration.media.filter(c=>c.section=="transfer_certificate"),mediaToken:B.registration.mediaToken}),Object.assign(e,M(R)),t.isLoaded=!0}),(c,o)=>{const m=V("MediaUpload"),n=V("FormAction");return t.isLoaded?(g(),I(n,{key:0,"no-card":"","no-data-fetch":"","cancel-action":"",uuid:l(_).params.number,action:"uploadFile","init-url":h,"init-form":R,form:e,"validate-unchanged":!1,"keep-adding":!1,"after-submit":q},{default:f(()=>[p("div",We,[p("div",Xe,[u(m,{"is-required":"",multiple:"",guest:"",label:c.$trans("student.online_registration.wizard.marksheet"),module:"registration",section:"marksheet",media:e.marksheet,"media-token":e.mediaToken,onIsUpdated:o[0]||(o[0]=s=>e.mediaUpdated=!0),onSetHash:o[1]||(o[1]=s=>e.mediaHash.push(s)),error:l(y).marksheet,"onUpdate:error":o[2]||(o[2]=s=>l(y).marksheet=s)},null,8,["label","media","media-token","error"])]),p("div",Ze,[u(m,{multiple:"",guest:"",label:c.$trans("student.online_registration.wizard.transfer_certificate"),module:"registration",section:"transfer_certificate",media:e.transferCertificate,"media-token":e.mediaToken,onIsUpdated:o[3]||(o[3]=s=>e.mediaUpdated=!0),onSetHash:o[4]||(o[4]=s=>e.mediaHash.push(s)),error:l(y).transferCertificate,"onUpdate:error":o[5]||(o[5]=s=>l(y).transferCertificate=s)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form"])):k("",!0)}}}),tt={class:"grid grid-cols-3 gap-6"},at={class:"col-span-3"},st={class:"col-span-3 sm:col-span-1"},rt={class:"col-span-3 sm:col-span-1"},nt={class:"grid grid-cols-1"},ot={class:"col"},it={name:"OnlineRegistrationReviewForm"},lt=Object.assign(it,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(N,{emit:F}){const _=D(),T=x("moment"),B=F,R=N,h={declaration:!1,dateOfSubmission:T().format("D MMM Y"),placeOfSubmission:"",signature:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},y="onlineRegistration/",e=z(y),t=P({}),q=P({...h}),c=P({isLoaded:!_.params.uuid}),o=n=>{Object.assign(t,n)},m=n=>{B("completed",n)};return E(()=>{Object.assign(h,{signature:R.registration.media.filter(n=>n.section=="signature"),mediaToken:R.registration.mediaToken}),Object.assign(q,M(h)),c.isLoaded=!0}),(n,s)=>{const a=V("BaseSwitch"),d=V("BaseInput"),b=V("MediaUpload"),w=V("FormAction");return c.isLoaded?(g(),I(w,{key:0,"no-card":"","pre-requisites":!1,onSetPreRequisites:o,"init-url":y,"no-data-fetch":"",uuid:l(_).params.number,action:"updateReview","keep-adding":!1,"init-form":h,form:q,"submit-text":n.$trans("general.submit"),"after-submit":m},{default:f(()=>[p("div",tt,[p("div",at,[u(a,{reverse:"",modelValue:q.declaration,"onUpdate:modelValue":s[0]||(s[0]=A=>q.declaration=A),name:"declaration",label:n.$trans("student.online_registration.declaration"),error:l(e).declaration,"onUpdate:error":s[1]||(s[1]=A=>l(e).declaration=A)},null,8,["modelValue","label","error"])]),p("div",st,[u(d,{readonly:"",type:"text",modelValue:q.dateOfSubmission,"onUpdate:modelValue":s[2]||(s[2]=A=>q.dateOfSubmission=A),name:"dateOfSubmission",label:n.$trans("student.online_registration.props.date_of_submission"),error:l(e).dateOfSubmission,"onUpdate:error":s[3]||(s[3]=A=>l(e).dateOfSubmission=A)},null,8,["modelValue","label","error"])]),p("div",rt,[u(d,{type:"text",modelValue:q.placeOfSubmission,"onUpdate:modelValue":s[4]||(s[4]=A=>q.placeOfSubmission=A),name:"placeOfSubmission",label:n.$trans("student.online_registration.props.place_of_submission"),error:l(e).placeOfSubmission,"onUpdate:error":s[5]||(s[5]=A=>l(e).placeOfSubmission=A)},null,8,["modelValue","label","error"])])]),p("div",nt,[p("div",ot,[u(b,{multiple:"",guest:"",label:n.$trans("contact.props.signature"),module:"registration",section:"signature",media:q.signature,"media-token":q.mediaToken,onIsUpdated:s[6]||(s[6]=A=>q.mediaUpdated=!0),onSetHash:s[7]||(s[7]=A=>q.mediaHash.push(A)),error:l(e).signature,"onUpdate:error":s[8]||(s[8]=A=>l(e).signature=A)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form","submit-text"])):k("",!0)}}}),dt={class:"grid grid-cols-3 gap-4"},ut={class:"col-span-3 sm:col-span-1"},mt={key:0,class:"col-span-3"},pt={class:"mt-4"},ct={name:"OnlineApplicationPayment"},bt=Object.assign(ct,{props:{visibility:{type:Boolean,default:!1},registration:{type:Object,default:()=>({})},preRequisites:{type:Object,default:()=>({})}},emits:["close","completed"],setup(N,{emit:F}){const _=D(),T=X(),B=F,R=N,h={uuid:_.params.number,amount:"",gateway:""},y="onlineRegistration/",e=z(y),t=W(!1),q=P({initiated:!1,payment:null}),c=P({...h}),o=()=>{a(),T.dispatch(y+"resetFormErrors"),B("close")},m=()=>{q.initiated=!1,B("completed")},n=b=>{t.value=b},s=b=>!!R.preRequisites.paymentGateways.find(w=>w.value==b),a=()=>{q.initiated=!1,q.payment=null,c.gateway=""},d=async()=>{await te()&&(t.value=!0,await T.dispatch(y+"initiatePayment",c).then(b=>{if(b.hasOwnProperty("payment")&&b.payment.amount<=0){location.reload();return}q.initiated=!0,q.payment=b,t.value=!1}).catch(b=>{t.value=!1}))};return ee(async()=>{var b,w;((w=(b=R.preRequisites)==null?void 0:b.paymentGateways)==null?void 0:w.length)==1&&(h.gateway=R.preRequisites.paymentGateways[0].value),h.amount=R.registration.fee.value,Object.assign(c,h)}),(b,w)=>{const A=V("BaseInput"),i=V("BaseRadioGroup"),O=V("BaseButton"),L=V("BaseModal");return g(),I(L,{show:N.visibility,onClose:o},{title:f(()=>[U($(b.$trans("global.pay",{attribute:b.$trans("student.fee.fee")})),1)]),default:f(()=>{var j,v,r;return[p("div",dt,[p("div",ut,[u(A,{disabled:!0,modelValue:c.amount,"onUpdate:modelValue":w[0]||(w[0]=C=>c.amount=C),name:"amount",label:b.$trans("student.fee.props.amount"),currency:"",error:l(e).amount,"onUpdate:error":w[1]||(w[1]=C=>l(e).amount=C)},null,8,["modelValue","label","error"])]),N.preRequisites.paymentGateways.length>1?(g(),S("div",mt,[u(i,{disabled:q.initiated,options:N.preRequisites.paymentGateways,name:"gateway",modelValue:c.gateway,"onUpdate:modelValue":w[2]||(w[2]=C=>c.gateway=C),error:l(e).gateway,"onUpdate:error":w[3]||(w[3]=C=>l(e).gateway=C),horizontal:""},null,8,["disabled","options","modelValue","error"])])):k("",!0)]),s("razorpay")&&c.gateway=="razorpay"?(g(),I(re,{key:0,"init-url":y,form:c,payment:q.payment,onLoading:n,onRefresh:m},null,8,["form","payment"])):k("",!0),s("paystack")&&c.gateway=="paystack"?(g(),I(ne,{key:1,"init-url":y,form:c,payment:q.payment,onLoading:n,onRefresh:m},null,8,["form","payment"])):k("",!0),s("stripe")&&c.gateway=="stripe"?(g(),I(oe,{key:2,"init-url":y,form:c,payment:q.payment,onCancel:a,onLoading:n,onRefresh:m},null,8,["form","payment"])):k("",!0),s("paypal")&&c.gateway=="paypal"&&((j=q.payment)!=null&&j.token)?(g(),I(ie,{key:3,"init-url":y,form:c,payment:q.payment,onCancel:a,onLoading:n,onRefresh:m},null,8,["form","payment"])):k("",!0),s("ccavenue")&&c.gateway=="ccavenue"&&((v=q.payment)!=null&&v.token)?(g(),I(le,{key:4,payment:q.payment},null,8,["payment"])):k("",!0),s("billdesk")&&c.gateway=="billdesk"&&((r=q.payment)!=null&&r.token)?(g(),I(de,{key:5,payment:q.payment},null,8,["payment"])):k("",!0),p("div",pt,[c.gateway?(g(),S(H,{key:0},[c.gateway!="stripe"&&c.gateway!="paypal"&&c.gateway!="ccavenue"&&c.gateway!="billdesk"?(g(),I(O,{key:0,design:"primary",onClick:d},{default:f(()=>[U($(b.$trans("general.proceed")),1)]),_:1})):k("",!0),c.gateway=="stripe"&&!q.payment?(g(),I(O,{key:1,design:"primary",onClick:d},{default:f(()=>[U($(b.$trans("general.proceed")),1)]),_:1})):k("",!0),c.gateway=="paypal"&&!q.payment?(g(),I(O,{key:2,design:"primary",onClick:d},{default:f(()=>[U($(b.$trans("general.proceed")),1)]),_:1})):k("",!0),c.gateway=="ccavenue"&&!q.payment?(g(),I(O,{key:3,design:"primary",onClick:d},{default:f(()=>[U($(b.$trans("general.proceed")),1)]),_:1})):k("",!0),c.gateway=="billdesk"&&!q.payment?(g(),I(O,{key:4,design:"primary",onClick:d},{default:f(()=>[U($(b.$trans("general.proceed")),1)]),_:1})):k("",!0)],64)):k("",!0)])]}),_:1},8,["show"])}}}),gt={class:"flex justify-end"},ft={class:"flex justify-center"},yt={href:"/",class:"mb-6"},vt=["src"],$t={class:"text-primary dark:text-darken-secondary text-center text-xl"},qt={class:"text-dark-primary dark:text-darken-secondary text-center"},kt={class:"text-lg text-dark-primary dark:text-darken-secondary font-semibold text-center"},Ut={key:0,class:"mt-8"},Nt={key:0},Rt={key:1},At={class:"font-bold"},Vt={key:2},It={class:"mt-8 border-t border-gray-200 dark:border-gray-800"},wt={class:"mt-8 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-3"},Lt={key:1,class:"mt-8"},ht={key:3,class:"mt-8"},Y="onlineRegistration/",Ot={__name:"Form",setup(N){const F=X(),_=D(),T=ae(),B=G("layout.display").value=="dark"?G("assets.iconLight"):G("assets.icon"),R=W(null),h=W(!1),y=P({genders:[],bloodGroups:[],religions:[],categories:[],castes:[],maritalStatuses:[],paymentGateways:[]}),e=P({registration:{},activeTab:"basic"}),t=()=>{h.value=!1,c()},q=async()=>{R.value=!0,await F.dispatch(Y+"preRequisite",{number:_.params.number}).then(d=>{e.preRequisites=d,R.value=!1}).catch(d=>{R.value=!1,T.push({name:"OnlineRegistration"})})},c=async()=>{R.value=!0,await F.dispatch(Y+"getRegistration",{number:_.params.number}).then(d=>{e.registration=d,e.registration.status.value=="pending"&&(e.activeTab="review"),e.registration.status.value=="pending"&&e.registration.fee.value>0&&o(),R.value=!1}).catch(d=>{R.value=!1,T.push({name:"OnlineRegistration"})})},o=async()=>{R.value=!0,await F.dispatch(Y+"paymentPreRequisite",{uuid:_.params.number}).then(d=>{y.paymentGateways=d.paymentGateways,R.value=!1}).catch(d=>{R.value=!1})},m=async()=>{let d=localStorage.getItem("authToken"),b=`/online-registrations/${_.params.number}/download?auth-token=${d}`;window.open(b)},n=()=>{e.activeTab="contact",c()},s=()=>{e.activeTab="upload",c()},a=()=>{e.activeTab="review",c()};return E(async()=>{await q(),await c()}),(d,b)=>{const w=V("BaseButton"),A=V("BaseAlert"),i=V("TabItem"),O=V("TabGroup"),L=V("BaseDataView"),j=V("BaseLoader");return g(),S(H,null,[p("div",gt,[p("span",{class:"text-sm text-gray-500 cursor-pointer",onClick:b[0]||(b[0]=v=>l(T).push({name:"Dashboard"}))},[b[7]||(b[7]=p("i",{class:"fas fa-home mr-1"},null,-1)),U(" "+$(d.$trans("global.go_to",{attribute:d.$trans("dashboard.home")})),1)])]),p("div",ft,[p("a",yt,[p("img",{class:"h-16 w-auto",src:l(B),alt:""},null,8,vt)])]),u(j,{"is-loading":R.value},{default:f(()=>[p("div",null,[p("p",$t,$(d.$trans("student.online_registration.title")),1),p("p",qt,$(d.$trans("student.online_registration.subtitle")),1),p("div",kt,$(d.$trans("student.online_registration.application_number"))+" : "+$(e.registration.applicationNumber),1)]),e.registration.uuid?(g(),S("div",Ut,[e.registration.status.value=="pending"?(g(),S("div",Nt,[e.registration.fee.value>0?(g(),S(H,{key:0},[e.registration.paymentStatus.value=="unpaid"?(g(),I(w,{key:0,block:"",onClick:b[1]||(b[1]=v=>h.value=!0)},{default:f(()=>[U($(d.$trans("student.online_registration.proceed_with_payment")),1)]),_:1})):(g(),I(A,{key:1,size:"xs",design:"success"},{default:f(()=>[U($(d.$trans("student.online_registration.pending_info")),1)]),_:1}))],64)):(g(),I(A,{key:1,size:"xs",design:"success"},{default:f(()=>[U($(d.$trans("student.online_registration.pending_info")),1)]),_:1}))])):e.registration.status.value=="rejected"?(g(),S("div",Rt,[u(A,{size:"xs",design:"error"},{default:f(()=>[U($(d.$trans("student.online_registration.rejected_info",{attribute:e.registration.rejectedAt.formatted}))+" ",1),p("p",At,$(e.registration.rejectionRemarks),1)]),_:1})])):e.registration.status.value=="approved"?(g(),S("div",Vt,[u(A,{size:"xs",design:"success"},{default:f(()=>[U($(d.$trans("student.online_registration.approved_info")),1)]),_:1})])):k("",!0),p("div",It,[e.registration.status.value!="pending"?(g(),I(O,{key:0},{default:f(()=>[u(i,{first:"",label:d.$trans("student.online_registration.wizard.first_step"),onClick:b[2]||(b[2]=v=>e.activeTab="basic"),"is-active":e.activeTab=="basic"},null,8,["label","is-active"]),u(i,{label:d.$trans("student.online_registration.wizard.second_step"),onClick:b[3]||(b[3]=v=>e.activeTab="contact"),"is-active":e.activeTab=="contact"},null,8,["label","is-active"]),u(i,{label:d.$trans("student.online_registration.wizard.third_step"),onClick:b[4]||(b[4]=v=>e.activeTab="upload"),"is-active":e.activeTab=="upload"},null,8,["label","is-active"]),u(i,{last:"",label:d.$trans("student.online_registration.wizard.final_step"),onClick:b[5]||(b[5]=v=>e.activeTab="review"),"is-active":e.activeTab=="review"},null,8,["label","is-active"])]),_:1})):k("",!0),p("dl",wt,[u(L,{label:d.$trans("contact.props.name")},{default:f(()=>[U($(e.registration.contact.name),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.contact_number")},{default:f(()=>[U($(e.registration.contact.contactNumber),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.email")},{default:f(()=>[U($(e.registration.contact.email),1)]),_:1},8,["label"]),u(L,{label:d.$trans("academic.program.program")},{default:f(()=>{var v;return[U($((v=e.registration.course.division.program)==null?void 0:v.name),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("academic.period.period")},{default:f(()=>[U($(e.registration.period.name),1)]),_:1},8,["label"]),u(L,{label:d.$trans("academic.course.course")},{default:f(()=>[U($(e.registration.course.name),1)]),_:1},8,["label"]),e.registration.status.value=="initiated"&&e.activeTab=="review"||e.registration.status.value=="pending"||e.registration.status.value=="approved"?(g(),S(H,{key:0},[u(L,{label:d.$trans("contact.props.father_name")},{default:f(()=>[U($(e.registration.contact.fatherName),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.mother_name")},{default:f(()=>[U($(e.registration.contact.motherName),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.gender")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.gender)==null?void 0:v.label)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.birth_date")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.birthDate)==null?void 0:v.formatted)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.birth_place")},{default:f(()=>[U($(e.registration.contact.birthPlace),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.nationality")},{default:f(()=>[U($(e.registration.contact.nationality),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.mother_tongue")},{default:f(()=>[U($(e.registration.contact.motherTongue),1)]),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.blood_group")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.bloodGroup)==null?void 0:v.label)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.props.marital_status")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.maritalStatus)==null?void 0:v.label)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.category.category")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.category)==null?void 0:v.name)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.caste.caste")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.caste)==null?void 0:v.name)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("contact.religion.religion")},{default:f(()=>{var v;return[U($(((v=e.registration.contact.religion)==null?void 0:v.name)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("global.alternate",{attribute:d.$trans("contact.props.contact_number")})},{default:f(()=>{var v;return[U($(((v=e.registration.contact.alternateRecords)==null?void 0:v.contactNumber)||"-"),1)]}),_:1},8,["label"]),u(L,{label:d.$trans("global.alternate",{attribute:d.$trans("contact.props.email")})},{default:f(()=>{var v;return[U($(((v=e.registration.contact.alternateRecords)==null?void 0:v.email)||"-"),1)]}),_:1},8,["label"]),u(L,{class:"col-span-1 sm:col-span-3",label:d.$trans("contact.props.present_address")},{default:f(()=>[U($(e.registration.contact.presentAddressDisplay),1)]),_:1},8,["label"]),u(L,{class:"col-span-1 sm:col-span-3",label:d.$trans("contact.props.permanent_address")},{default:f(()=>[U($(e.registration.contact.sameAsPresentAddress?e.registration.contact.presentAddressDisplay:e.registration.contact.permanentAddressDisplay),1)]),_:1},8,["label"])],64)):k("",!0)]),e.registration.status.value!="pending"&&e.registration.status.value!="rejected"&&e.registration.status.value!="approved"?(g(),S("div",Lt,[e.activeTab=="basic"&&e.registration?(g(),I(_e,{key:0,registration:e.registration,"pre-requisites":e.preRequisites,onCompleted:n},null,8,["registration","pre-requisites"])):k("",!0),e.activeTab=="contact"&&e.registration?(g(),I(He,{key:1,registration:e.registration,onCompleted:s},null,8,["registration"])):k("",!0),e.activeTab=="upload"&&e.registration?(g(),I(Qe,{key:2,registration:e.registration,onCompleted:c},null,8,["registration"])):k("",!0),e.activeTab=="upload"&&e.registration?(g(),I(et,{key:3,registration:e.registration,onCompleted:a},null,8,["registration"])):k("",!0),e.activeTab=="review"&&e.registration?(g(),I(lt,{key:4,registration:e.registration,onCompleted:c},null,8,["registration"])):k("",!0)])):k("",!0)]),e.registration.status.value!="initiated"?(g(),S("div",ht,[u(w,{block:"",onClick:m},{default:f(()=>[U($(d.$trans("general.download")),1)]),_:1})])):k("",!0)])):k("",!0)]),_:1},8,["is-loading"]),u(bt,{visibility:h.value,"pre-requisites":y,registration:e.registration,onClose:b[6]||(b[6]=v=>h.value=!1),onCompleted:t},null,8,["visibility","pre-requisites","registration"])],64)}}};export{Ot as default};
