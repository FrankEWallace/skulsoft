import{j as J,I as de,p as oe,m as G,L as re,q as ce,r as g,t as r,o as d,w as a,a as q,b as c,F as w,y as A,v as s,x as l,f as e,z as P,K as ie,u as be,i as me,k as K,g as i,e as b,d as F,N as fe}from"./app-Cvm44xuh.js";import{_ as ge}from"./EditRequestInfo-k1F8QqQ3.js";const ye={key:0,class:"space-x-1"},he={name:"StudentTagList"},pe=Object.assign(he,{props:{student:{type:Object,default(){return{}}}},emits:["refresh"],setup(t,{emit:C}){J();const I=C,S=t,u={tags:[]},v="student/",p=de(v),h=oe(!1),N=G({...u}),k=G({tags:[],isLoaded:!1}),L=f=>{Object.assign(u,{tags:f.map(m=>m.uuid)}),Object.assign(N,ie(u)),k.tags=f.map(m=>m.uuid),k.isLoaded=!0},U=()=>{h.value=!1,I("refresh")};return re(()=>S.student.tags,f=>{L(f)}),ce(()=>{var f;L(((f=S.student)==null?void 0:f.tags)||[])}),(f,m)=>{const V=g("BaseBadge"),$=g("BaseSelectSearch"),D=g("FormAction"),x=g("BaseDataView");return d(),r(x,{class:"col-span-1 sm:col-span-4"},{label:a(()=>[s(l(f.$trans("general.tags"))+" ",1),e(P)("student:edit")?(d(),q("i",{key:0,class:"fas fa-edit cursor-pointer",onClick:m[0]||(m[0]=y=>h.value=!0)})):c("",!0)]),default:a(()=>[h.value?c("",!0):(d(),q("div",ye,[(d(!0),q(w,null,A(t.student.tags||[],y=>(d(),r(V,{design:"primary"},{default:a(()=>[s(l(y.name),1)]),_:2},1024))),256))])),h.value?(d(),r(D,{key:1,"no-card":"","no-data-fetch":"","cancel-action":"",action:"updateTags","keep-adding":!1,"init-url":v,"init-form":u,form:N,"after-submit":U,onCancelled:m[3]||(m[3]=y=>h.value=!1)},{default:a(()=>[k.isLoaded?(d(),r($,{key:0,tags:"",name:"tags",placeholder:f.$trans("global.select",{attribute:f.$trans("general.tag")}),modelValue:N.tags,"onUpdate:modelValue":m[1]||(m[1]=y=>N.tags=y),error:e(p).tags,"onUpdate:error":m[2]||(m[2]=y=>e(p).tags=y),"init-search":k.tags,"search-action":"tag/list"},null,8,["placeholder","modelValue","error","init-search"])):c("",!0)]),_:1},8,["form"])):c("",!0)]),_:1})}}}),Ne={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-3"},ke={class:"flex flex-wrap gap-2"},qe={name:"StudentShowBasic"},ve=Object.assign(qe,{props:{student:{type:Object,default(){return{contact:{}}}}},setup(t){const C=be(),I=me(),S=J(),u=K("$trans"),v=K("emitter"),p=t,h=i("student.isUniqueIdNumber1Enabled"),N=i("student.isUniqueIdNumber2Enabled"),k=i("student.isUniqueIdNumber3Enabled"),L=i("student.isUniqueIdNumber4Enabled"),U=i("student.isUniqueIdNumber5Enabled"),f=i("student.uniqueIdNumber1Label"),m=i("student.uniqueIdNumber2Label"),V=i("student.uniqueIdNumber3Label"),$=i("student.uniqueIdNumber4Label"),D=i("student.uniqueIdNumber5Label"),x=i("contact.enableLocalityField"),y=i("contact.enableCategoryField"),Q=i("contact.enableCasteField"),W=i("student.enableMaritalStatus"),X=i("student.enableAnniversaryDate");let j=[];P("student:edit")&&(j.push({label:u("general.edit"),path:{name:"StudentEditBasic",params:{uuid:p.student.uuid}}}),j.push({label:u("global.edit",{attribute:u("contact.props.photo")}),path:{name:"StudentEditPhoto",params:{uuid:p.student.uuid}}}));const Y=()=>{v.emit("studentUpdated")},Z=async()=>{await fe()&&await S.dispatch("student/delete",{uuid:p.student.uuid}).then(T=>{I.push({name:"StudentList"})}).catch(T=>{})};return(T,E)=>{const ee=g("BaseButton"),te=g("PageHeaderAction"),ae=g("PageHeader"),o=g("BaseDataView"),ne=g("TextMuted"),ue=g("BaseBadge"),se=g("BaseCard"),le=g("ParentTransition");return d(),q(w,null,[t.student.uuid?(d(),r(ae,{key:0,title:e(u)(e(C).meta.label),navs:[{label:e(u)("student.student"),path:"Student"},{label:t.student.contact.name,path:{name:"StudentShow",params:{uuid:t.student.uuid}}}]},{default:a(()=>[b(te,{"additional-actions":e(j)},{after:a(()=>[e(P)("student:delete")&&t.student.records.length==0?(d(),r(ee,{key:0,design:"danger",onClick:Z},{default:a(()=>[s(l(e(u)("global.delete",{attribute:e(u)("student.student")})),1)]),_:1})):c("",!0)]),_:1},8,["additional-actions"])]),_:1},8,["title","navs"])):c("",!0),b(le,{appear:"",visibility:!0},{default:a(()=>[t.student.uuid?(d(),r(se,{key:0},{default:a(()=>{var O,_,M,H;return[b(ge,{student:t.student},null,8,["student"]),F("dl",Ne,[(_=(O=t.student.admission)==null?void 0:O.registration)!=null&&_.uuid?(d(),r(o,{key:0,label:e(u)("student.registration.props.code_number")},{default:a(()=>{var n,B;return[F("span",{class:"cursor-pointer",onClick:E[0]||(E[0]=Be=>{var R,z;return e(I).push({name:"StudentRegistrationShow",params:{uuid:(z=(R=t.student.admission)==null?void 0:R.registration)==null?void 0:z.uuid}})})},[s(l((B=(n=t.student.admission)==null?void 0:n.registration)==null?void 0:B.codeNumber)+" ",1),E[1]||(E[1]=F("i",{class:"fa fa-reply"},null,-1))])]}),_:1},8,["label"])):c("",!0),(M=t.student.mentor)!=null&&M.uuid?(d(),r(o,{key:1,label:e(u)("student.mentor.mentor")},{default:a(()=>{var n;return[s(l((n=t.student.mentor)==null?void 0:n.name)+" ",1),b(ne,{block:""},{default:a(()=>{var B;return[s(l((B=t.student.mentor)==null?void 0:B.codeNumber),1)]}),_:1})]}),_:1},8,["label"])):c("",!0),b(o,{label:e(u)("contact.props.father_name")},{default:a(()=>[s(l(t.student.contact.fatherName),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.mother_name")},{default:a(()=>[s(l(t.student.contact.motherName),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.birth_date")},{default:a(()=>[s(l(t.student.contact.birthDate.formatted),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.gender")},{default:a(()=>[s(l(t.student.contact.gender.label),1)]),_:1},8,["label"]),e(h)?(d(),r(o,{key:2,label:e(f)},{default:a(()=>[s(l(t.student.contact.uniqueIdNumber1),1)]),_:1},8,["label"])):c("",!0),e(N)?(d(),r(o,{key:3,label:e(m)},{default:a(()=>[s(l(t.student.contact.uniqueIdNumber2),1)]),_:1},8,["label"])):c("",!0),e(k)?(d(),r(o,{key:4,label:e(V)},{default:a(()=>[s(l(t.student.contact.uniqueIdNumber3),1)]),_:1},8,["label"])):c("",!0),e(L)?(d(),r(o,{key:5,label:e($)},{default:a(()=>[s(l(t.student.contact.uniqueIdNumber4),1)]),_:1},8,["label"])):c("",!0),e(U)?(d(),r(o,{key:6,label:e(D)},{default:a(()=>[s(l(t.student.contact.uniqueIdNumber5),1)]),_:1},8,["label"])):c("",!0),b(o,{label:e(u)("contact.props.birth_place")},{default:a(()=>[s(l(t.student.contact.birthPlace),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.nationality")},{default:a(()=>[s(l(t.student.contact.nationality),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.mother_tongue")},{default:a(()=>[s(l(t.student.contact.motherTongue),1)]),_:1},8,["label"]),b(o,{label:e(u)("contact.props.blood_group")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.bloodGroup)==null?void 0:n.label)||"-"),1)]}),_:1},8,["label"]),e(x)?(d(),r(o,{key:7,label:e(u)("contact.props.locality")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.locality)==null?void 0:n.label)||"-"),1)]}),_:1},8,["label"])):c("",!0),e(W)?(d(),r(o,{key:8,label:e(u)("contact.props.marital_status")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.maritalStatus)==null?void 0:n.label)||"-"),1)]}),_:1},8,["label"])):c("",!0),e(X)?(d(),r(o,{key:9,label:e(u)("contact.props.anniversary_date")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.anniversaryDate)==null?void 0:n.formatted)||"-"),1)]}),_:1},8,["label"])):c("",!0),b(o,{label:e(u)("contact.religion.religion")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.religion)==null?void 0:n.name)||"-"),1)]}),_:1},8,["label"]),e(Q)?(d(),r(o,{key:10,label:e(u)("contact.caste.caste")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.caste)==null?void 0:n.name)||"-"),1)]}),_:1},8,["label"])):c("",!0),e(y)?(d(),r(o,{key:11,label:e(u)("contact.category.category")},{default:a(()=>{var n;return[s(l(((n=t.student.contact.category)==null?void 0:n.name)||"-"),1)]}),_:1},8,["label"])):c("",!0),(d(!0),q(w,null,A(((H=t.student.contact)==null?void 0:H.customFields)||[],n=>(d(),r(o,{key:n.uuid,label:n.label},{default:a(()=>[s(l(n.formattedValue),1)]),_:2},1032,["label"]))),128)),b(pe,{student:t.student,onRefresh:Y},null,8,["student"]),b(o,{label:e(u)("student.group.group")},{default:a(()=>[F("div",ke,[(d(!0),q(w,null,A(t.student.groups,n=>(d(),r(ue,{design:"primary",key:n.uuid},{default:a(()=>[s(l(n.name),1)]),_:2},1024))),128))])]),_:1},8,["label"])])]}),_:1})):c("",!0)]),_:1})],64)}}});export{ve as default};
