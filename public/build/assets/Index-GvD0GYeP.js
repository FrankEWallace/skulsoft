import{m as V,r as u,t as p,o as c,w as e,d as S,e as a,u as M,i as N,k as A,z as w,p as O,f as i,a as B,F as I,y as U,v as r,x as m,b as k}from"./app-Cvm44xuh.js";const z={class:"grid grid-cols-3 gap-6"},q={class:"col-span-3 sm:col-span-1"},G={__name:"Filter",emits:["hide"],setup(s,{emit:C}){const f=C,g={title:""},v=V({...g});return(D,d)=>{const $=u("BaseInput"),y=u("FilterForm");return c(),p(y,{"init-form":g,form:v,onHide:d[1]||(d[1]=n=>f("hide"))},{default:e(()=>[S("div",z,[S("div",q,[a($,{type:"text",modelValue:v.title,"onUpdate:modelValue":d[0]||(d[0]=n=>v.title=n),name:"title",label:D.$trans("student.dialogue.props.title")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},J={name:"StudentDialogueList"},Q=Object.assign(J,{props:{student:{type:Object,default(){return{}}}},setup(s){const C=M(),f=N(),g=A("emitter");let v=["filter"];w("student:dialogue")&&v.unshift("create");const D="student/dialogue/",d=O(!1),$=V({}),y=n=>{Object.assign($,n)};return(n,o)=>{const H=u("PageHeaderAction"),P=u("PageHeader"),h=u("ParentTransition"),_=u("DataCell"),b=u("FloatingMenuItem"),R=u("FloatingMenu"),T=u("DataRow"),E=u("BaseButton"),j=u("DataTable"),L=u("ListItem");return c(),p(L,{"init-url":D,uuid:i(C).params.uuid,onSetItems:y},{header:e(()=>[s.student.uuid?(c(),p(P,{key:0,title:n.$trans("student.dialogue.dialogue"),navs:[{label:n.$trans("student.student"),path:"Student"},{label:s.student.contact.name,path:{name:"StudentShow",params:{uuid:s.student.uuid}}}]},{default:e(()=>[a(H,{url:`students/${s.student.uuid}/dialogues/`,name:"StudentDialogue",title:n.$trans("student.dialogue.dialogue"),actions:i(v),"dropdown-actions":["print","pdf","excel"],onToggleFilter:o[0]||(o[0]=t=>d.value=!d.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):k("",!0)]),filter:e(()=>[a(h,{appear:"",visibility:d.value},{default:e(()=>[a(G,{onRefresh:o[1]||(o[1]=t=>i(g).emit("listItems")),onHide:o[2]||(o[2]=t=>d.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(h,{appear:"",visibility:!0},{default:e(()=>[a(j,{header:$.headers,meta:$.meta,module:"student.dialogue",onRefresh:o[4]||(o[4]=t=>i(g).emit("listItems"))},{actionButton:e(()=>[i(w)("student:dialogue")?(c(),p(E,{key:0,onClick:o[3]||(o[3]=t=>i(f).push({name:"StudentDialogueCreate"}))},{default:e(()=>[r(m(n.$trans("global.add",{attribute:n.$trans("student.dialogue.dialogue")})),1)]),_:1})):k("",!0)]),default:e(()=>[(c(!0),B(I,null,U($.data,t=>(c(),p(T,{key:t.uuid,onDoubleClick:l=>i(f).push({name:"StudentDialogueShow",params:{uuid:s.student.uuid,muuid:t.uuid}})},{default:e(()=>[a(_,{name:"title"},{default:e(()=>[r(m(t.title),1)]),_:2},1024),a(_,{name:"category"},{default:e(()=>{var l;return[r(m(((l=t.category)==null?void 0:l.name)||"-"),1)]}),_:2},1024),a(_,{name:"date"},{default:e(()=>[r(m(t.date.formatted),1)]),_:2},1024),a(_,{name:"user"},{default:e(()=>{var l,F;return[r(m(((F=(l=t.user)==null?void 0:l.profile)==null?void 0:F.name)||"-"),1)]}),_:2},1024),a(_,{name:"action"},{default:e(()=>[a(R,null,{default:e(()=>[a(b,{icon:"fas fa-arrow-circle-right",onClick:l=>i(f).push({name:"StudentDialogueShow",params:{uuid:s.student.uuid,muuid:t.uuid}})},{default:e(()=>[r(m(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),t.isEditable?(c(),B(I,{key:0},[a(b,{icon:"fas fa-edit",onClick:l=>i(f).push({name:"StudentDialogueEdit",params:{uuid:s.student.uuid,muuid:t.uuid}})},{default:e(()=>[r(m(n.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t.isEditable?(c(),p(b,{key:0,icon:"fas fa-copy",onClick:l=>i(f).push({name:"StudentDialogueDuplicate",params:{uuid:s.student.uuid,muuid:t.uuid}})},{default:e(()=>[r(m(n.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):k("",!0),t.isEditable?(c(),p(b,{key:1,icon:"fas fa-trash",onClick:l=>i(g).emit("deleteItem",{uuid:s.student.uuid,moduleUuid:t.uuid})},{default:e(()=>[r(m(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)],64)):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{Q as default};
