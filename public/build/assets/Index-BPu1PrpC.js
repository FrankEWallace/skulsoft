import{u as Y,m as E,q as re,r as d,t as f,o as m,w as l,d as u,e as r,b as _,k as R,p as j,I as J,L,f as g,i as de,z as D,a as F,F as H,y as z,x as v,v as V,Y as ue}from"./app-Cvm44xuh.js";import{i as me,t as pe,a as ce}from"./table-FwhM-Z75.js";const ge={class:"grid grid-cols-3 gap-6"},ye={class:"col-span-3 sm:col-span-1"},fe={class:"col-span-3 sm:col-span-1"},be={class:"col-span-3 sm:col-span-1"},ve={class:"col-span-3 sm:col-span-1"},_e={class:"col-span-3 sm:col-span-1"},$e={class:"col-span-3 sm:col-span-1"},ke={class:"col-span-3 sm:col-span-1"},Ve={class:"col-span-3 sm:col-span-1"},Se={class:"col-span-3 sm:col-span-1"},Be={class:"col-span-3 sm:col-span-1"},he={class:"col-span-3 sm:col-span-1"},Ie={class:"col-span-3 sm:col-span-1"},Ee={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(w,{emit:A}){const y=Y(),S=A,k=w,B={codeNumber:"",name:"",joiningStartDate:"",joiningEndDate:"",leavingStartDate:"",leavingEndDate:"",department:"",designation:"",employmentStatus:"",types:[],tagsIncluded:[],tagsExcluded:[],groups:[],status:"active"},n=E({...B}),$=E({types:k.preRequisites.types,statuses:k.preRequisites.statuses,groups:k.preRequisites.groups}),a=E({department:"",designation:"",employmentStatus:"",isLoaded:!(y.query.department||y.query.designation||y.query.employmentStatus||y.query.tagsIncluded||y.query.tagsExcluded||y.query.groups)});return re(async()=>{a.department=y.query.department,a.designation=y.query.designation,a.employmentStatus=y.query.employmentStatus,a.tagsIncluded=y.query.tagsIncluded?y.query.tagsIncluded.split(","):[],a.tagsExcluded=y.query.tagsExcluded?y.query.tagsExcluded.split(","):[],a.groups=y.query.groups?y.query.groups.split(","):[],a.isLoaded=!0}),(i,e)=>{const p=d("BaseInput"),c=d("DatePicker"),h=d("BaseSelectSearch"),q=d("BaseSelect"),T=d("FilterForm");return m(),f(T,{"init-form":B,form:n,multiple:["types","tagsIncluded","tagsExcluded","groups"],onHide:e[14]||(e[14]=t=>S("hide"))},{default:l(()=>[u("div",ge,[u("div",ye,[r(p,{type:"text",modelValue:n.codeNumber,"onUpdate:modelValue":e[0]||(e[0]=t=>n.codeNumber=t),name:"codeNumber",label:i.$trans("employee.props.code_number")},null,8,["modelValue","label"])]),u("div",fe,[r(p,{type:"text",modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=t=>n.name=t),name:"name",label:i.$trans("contact.props.name")},null,8,["modelValue","label"])]),u("div",be,[r(c,{start:n.joiningStartDate,"onUpdate:start":e[2]||(e[2]=t=>n.joiningStartDate=t),end:n.joiningEndDate,"onUpdate:end":e[3]||(e[3]=t=>n.joiningEndDate=t),name:"joiningDateBetween",as:"range",label:i.$trans("global.date_between",{attribute:i.$trans("employee.props.joining_date")})},null,8,["start","end","label"])]),u("div",ve,[r(c,{start:n.leavingStartDate,"onUpdate:start":e[4]||(e[4]=t=>n.leavingStartDate=t),end:n.leavingEndDate,"onUpdate:end":e[5]||(e[5]=t=>n.leavingEndDate=t),name:"leavingDateBetween",as:"range",label:i.$trans("global.date_between",{attribute:i.$trans("employee.props.leaving_date")})},null,8,["start","end","label"])]),u("div",_e,[a.isLoaded?(m(),f(h,{key:0,name:"department",label:i.$trans("global.select",{attribute:i.$trans("employee.department.department")}),modelValue:n.department,"onUpdate:modelValue":e[6]||(e[6]=t=>n.department=t),"value-prop":"uuid","init-search":a.department,"search-action":"employee/department/list"},null,8,["label","modelValue","init-search"])):_("",!0)]),u("div",$e,[a.isLoaded?(m(),f(h,{key:0,name:"designation",label:i.$trans("global.select",{attribute:i.$trans("employee.designation.designation")}),modelValue:n.designation,"onUpdate:modelValue":e[7]||(e[7]=t=>n.designation=t),"value-prop":"uuid","init-search":a.designation,"search-action":"employee/designation/list"},null,8,["label","modelValue","init-search"])):_("",!0)]),u("div",ke,[a.isLoaded?(m(),f(h,{key:0,name:"employmentStatus",label:i.$trans("global.select",{attribute:i.$trans("employee.employment_status.employment_status")}),modelValue:n.employmentStatus,"onUpdate:modelValue":e[8]||(e[8]=t=>n.employmentStatus=t),"value-prop":"uuid","init-search":a.employmentStatus,"search-action":"option/list","additional-search-query":{type:"employment_status"}},null,8,["label","modelValue","init-search"])):_("",!0)]),u("div",Ve,[r(q,{multiple:"",modelValue:n.types,"onUpdate:modelValue":e[9]||(e[9]=t=>n.types=t),name:"types",label:i.$trans("employee.type"),options:$.types},null,8,["modelValue","label","options"])]),u("div",Se,[r(q,{modelValue:n.status,"onUpdate:modelValue":e[10]||(e[10]=t=>n.status=t),name:"status",label:i.$trans("employee.status"),options:$.statuses},null,8,["modelValue","label","options"])]),u("div",Be,[a.isLoaded?(m(),f(h,{key:0,tags:"",name:"tagsIncluded",label:i.$trans("general.tags_included"),modelValue:n.tagsIncluded,"onUpdate:modelValue":e[11]||(e[11]=t=>n.tagsIncluded=t),"init-search":a.tagsIncluded,"search-action":"tag/list"},null,8,["label","modelValue","init-search"])):_("",!0)]),u("div",he,[a.isLoaded?(m(),f(h,{key:0,tags:"",name:"tagsExcluded",label:i.$trans("general.tags_excluded"),modelValue:n.tagsExcluded,"onUpdate:modelValue":e[12]||(e[12]=t=>n.tagsExcluded=t),"init-search":a.tagsExcluded,"search-action":"tag/list"},null,8,["label","modelValue","init-search"])):_("",!0)]),u("div",Ie,[r(q,{multiple:"",modelValue:n.groups,"onUpdate:modelValue":e[13]||(e[13]=t=>n.groups=t),name:"groups","label-prop":"name","value-prop":"uuid",label:i.$trans("employee.group.group"),options:$.groups},null,8,["modelValue","label","options"])])])]),_:1},8,["form"])}}},qe={class:"grid grid-cols-3 gap-6"},Ce={class:"col-span-3 sm:col-span-1"},Ae={class:"mt-4 grid grid-cols-3 gap-6"},De={class:"col-span-3 sm:col-span-1"},Te={name:"EmployeeUpdateBulkTag"},we=Object.assign(Te,{props:{selected:{type:Object,required:!0},selectAll:{type:Boolean,required:!0},selectedEmployees:{type:Array,required:!0}},emits:["completed"],setup(w,{emit:A}){const y=R("emitter"),S=A,k=w,B={action:"assign",tags:[],selectAll:!1,employees:[]},n="employee/";j(!1);const $=J(n),a=E({...B}),i=E({isLoaded:!0,tags:[]}),e=async()=>{a.selectAll=!1,y.emit("listItems"),S("completed")};return L([()=>k.selectAll,()=>k.selectedEmployees],([p,c])=>{a.selectAll=p,a.employees=c},{immediate:!0}),(p,c)=>{const h=d("BaseRadioGroup"),q=d("BaseSelectSearch"),T=d("FormAction");return m(),f(T,{"no-card":"","keep-adding":!1,"init-url":n,action:"updateBulkTag","init-form":B,form:a,"after-submit":e},{default:l(()=>[u("div",qe,[u("div",Ce,[r(h,{options:[{label:p.$trans("general.assign"),value:"assign"},{label:p.$trans("general.remove"),value:"remove"}],name:"action",modelValue:a.action,"onUpdate:modelValue":c[0]||(c[0]=t=>a.action=t),error:g($).action,"onUpdate:error":c[1]||(c[1]=t=>g($).action=t),horizontal:""},null,8,["options","modelValue","error"])])]),u("div",Ae,[u("div",De,[i.isLoaded?(m(),f(q,{key:0,tags:"",name:"tags",placeholder:p.$trans("global.select",{attribute:p.$trans("general.tag")}),modelValue:a.tags,"onUpdate:modelValue":c[2]||(c[2]=t=>a.tags=t),error:g($).tags,"onUpdate:error":c[3]||(c[3]=t=>g($).tags=t),"init-search":i.tags,"search-action":"tag/list"},null,8,["placeholder","modelValue","error","init-search"])):_("",!0)])])]),_:1},8,["form"])}}}),Ue={class:"grid grid-cols-3 gap-6"},Fe={class:"col-span-3 sm:col-span-1"},je={class:"mt-4 grid grid-cols-3 gap-6"},Re={class:"col-span-3 sm:col-span-1"},Le={name:"EmployeeUpdateBulkGroup"},Ge=Object.assign(Le,{props:{selected:{type:Object,required:!0},selectAll:{type:Boolean,required:!0},selectedEmployees:{type:Array,required:!0}},emits:["completed"],setup(w,{emit:A}){const y=R("emitter"),S=A,k=w,B={action:"assign",groups:[],selectAll:!1,employees:[]},n="employee/";j(!1);const $=J(n),a=E({...B}),i=E({isLoaded:!0,groups:[]}),e=async()=>{a.selectAll=!1,y.emit("listItems"),S("completed")};return L([()=>k.selectAll,()=>k.selectedEmployees],([p,c])=>{a.selectAll=p,a.employees=c},{immediate:!0}),(p,c)=>{const h=d("BaseRadioGroup"),q=d("BaseSelectSearch"),T=d("FormAction");return m(),f(T,{"no-card":"","keep-adding":!1,"init-url":n,action:"updateBulkGroup","init-form":B,form:a,"after-submit":e},{default:l(()=>[u("div",Ue,[u("div",Fe,[r(h,{options:[{label:p.$trans("general.assign"),value:"assign"},{label:p.$trans("general.remove"),value:"remove"}],name:"action",modelValue:a.action,"onUpdate:modelValue":c[0]||(c[0]=t=>a.action=t),error:g($).action,"onUpdate:error":c[1]||(c[1]=t=>g($).action=t),horizontal:""},null,8,["options","modelValue","error"])])]),u("div",je,[u("div",Re,[i.isLoaded?(m(),f(q,{key:0,multiple:"",name:"groups",placeholder:p.$trans("global.select",{attribute:p.$trans("employee.group.group")}),modelValue:a.groups,"onUpdate:modelValue":c[2]||(c[2]=t=>a.groups=t),error:g($).groups,"onUpdate:error":c[3]||(c[3]=t=>g($).groups=t),"init-search":i.groups,"search-action":"option/list","additional-search-query":{type:"employee_group"}},null,8,["placeholder","modelValue","error","init-search"])):_("",!0)])])]),_:1},8,["form"])}}}),Pe={class:"grid grid-cols-1 gap-4 px-4 pt-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},Ne={class:""},xe=["onClick"],Me={key:0,class:"ml-1 text-danger"},Oe={class:"text-xs text-gray-500"},He={class:"truncate text-sm text-gray-500"},ze={class:"text-sm text-gray-500"},Ye={key:0,class:"text-xs text-info"},Je=["onClick"],Ke={key:0,class:"text-xs text-info"},Qe={class:"mt-8 px-4 pb-4"},We={name:"EmployeeList"},et=Object.assign(We,{setup(w){const A=Y(),y=de(),S=R("emitter");let k=["filter","view"];D("employee:create")&&k.unshift("create"),D("employee:config")&&k.unshift("config");let B=[];D("employee:export")&&(B=["print","pdf","excel","export_all_excel"]),D("employee:create")&&B.unshift("import");const n="employee/",$=j(!1),a=j(!1),i=E({selectAll:!1,selectedEmployees:[],activeTab:"updateGroup"}),e=E({...me}),p=E({}),c=E({statuses:[]}),h=b=>{Object.assign(p,b),e.pageItems=p.data.map(o=>o.uuid)},q=()=>{e.items=[],e.pageItems=[],e.all=!1},T=b=>{Object.assign(c,b)},t=()=>{e.global=!e.global,i.selectAll=e.global},G=b=>{window.open(`/app/employees/${b}`,"_blank")};return L(()=>[e.items,e.pageItems],([b,o],[P,N])=>{i.selectedEmployees=b,e.all=ce(e)}),(b,o)=>{const P=d("PageHeaderAction"),N=d("PageHeader"),K=d("BaseAlert"),Q=d("BaseImport"),U=d("ParentTransition"),W=d("CardView"),X=d("Pagination"),x=d("BaseButton"),Z=d("CardList"),ee=d("BaseArrayCheckbox"),te=d("BaseCheckbox"),C=d("DataCell"),M=d("FloatingMenuItem"),se=d("FloatingMenu"),ae=d("DataRow"),oe=d("DataTable"),O=d("TabItem"),le=d("TabGroup"),ne=d("BaseCard"),ie=d("ListItem");return m(),f(ie,{"pre-requisites":!0,onSetPreRequisites:T,"init-url":n,onSetItems:h},{header:l(()=>[r(N,{title:b.$trans("employee.employee"),navs:[]},{default:l(()=>[r(P,{url:"employees/",name:"Employee",title:b.$trans("employee.employee"),actions:g(k),"dropdown-actions":g(B),headers:p.headers,onToggleFilter:o[0]||(o[0]=s=>$.value=!$.value),onToggleImport:o[1]||(o[1]=s=>a.value=!a.value),onRefresh:o[2]||(o[2]=s=>g(S).emit("listItems"))},null,8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title"])]),import:l(()=>[r(U,{appear:"",visibility:a.value},{default:l(()=>[r(Q,{path:"employees/import",onCancelled:o[3]||(o[3]=s=>a.value=!1),onHide:o[4]||(o[4]=s=>a.value=!1),onCompleted:o[5]||(o[5]=s=>g(S).emit("listItems"))},{header:l(()=>[r(K,{size:"xs",design:"info"},{default:l(()=>[V(v(b.$trans("general.import_info")),1)]),_:1})]),option:l(()=>o[17]||(o[17]=[])),_:1})]),_:1},8,["visibility"])]),filter:l(()=>[r(U,{appear:"",visibility:$.value},{default:l(()=>[r(Ee,{"pre-requisites":c,onRefresh:o[6]||(o[6]=s=>g(S).emit("listItems")),onHide:o[7]||(o[7]=s=>$.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:l(()=>[g(A).query.view!="list"?(m(),f(U,{key:0,appear:"",visibility:!0},{default:l(()=>[r(Z,{header:p.headers,meta:p.meta,module:"employee"},{actionButton:l(()=>[g(D)("employee:create")?(m(),f(x,{key:0,onClick:o[9]||(o[9]=s=>g(y).push({name:"EmployeeCreate"}))},{default:l(()=>[V(v(b.$trans("global.add",{attribute:b.$trans("employee.employee")})),1)]),_:1})):_("",!0)]),default:l(()=>[u("div",Pe,[(m(!0),F(H,null,z(p.data,s=>(m(),f(W,{key:s.uuid,"img-src":s.photo,path:{name:"EmployeeShow",params:{uuid:s.uuid}}},{title:l(()=>[V(v(s.name)+" ",1),u("span",Ne,"("+v(s.codeNumber)+")",1),u("i",{class:"fas fa-up-right-from-square ml-2 cursor-pointer",onClick:ue(I=>G(s.uuid),["stop"])},null,8,xe),s.otherTeamMember?(m(),F("span",Me,o[18]||(o[18]=[u("i",{class:"fas fa-location-arrow"},null,-1)]))):_("",!0)]),default:l(()=>{var I;return[u("p",Oe,v((I=s.age)==null?void 0:I.short),1),u("p",He,v(s.designation),1),u("p",ze,v(s.period),1),s.otherTeamMember?(m(),F("p",Ye,v(s.otherTeamName),1)):_("",!0)]}),_:2},1032,["img-src","path"]))),128))]),u("div",null,[r(X,{"card-view":"",meta:p.meta,onRefresh:o[8]||(o[8]=s=>g(S).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):_("",!0),g(A).query.view=="list"?(m(),f(U,{key:1,appear:"",visibility:!0},{default:l(()=>[r(oe,{onToggleSelectAll:o[13]||(o[13]=s=>e.items=g(pe)(s,e)),onToggleGlobalSelect:t,selected:e,header:p.headers,meta:p.meta,module:"employee",onRefresh:o[14]||(o[14]=s=>g(S).emit("listItems"))},{actionButton:l(()=>[g(D)("employee:create")?(m(),f(x,{key:0,onClick:o[12]||(o[12]=s=>g(y).push({name:"EmployeeCreate"}))},{default:l(()=>[V(v(b.$trans("global.add",{attribute:b.$trans("employee.employee")})),1)]),_:1})):_("",!0)]),default:l(()=>[(m(!0),F(H,null,z(p.data,s=>(m(),f(ae,{key:s.uuid,onDoubleClick:I=>g(y).push({name:"EmployeeShow",params:{uuid:s.uuid}})},{default:l(()=>[r(C,{name:"selectAll"},{default:l(()=>[e.global?_("",!0):(m(),f(ee,{key:0,items:e.items,"onUpdate:items":o[10]||(o[10]=I=>e.items=I),value:s.uuid},null,8,["items","value"])),e.global?(m(),f(te,{key:1,modelValue:e.global,"onUpdate:modelValue":o[11]||(o[11]=I=>e.global=I)},null,8,["modelValue"])):_("",!0)]),_:2},1024),r(C,{name:"codeNumber"},{default:l(()=>[V(v(s.codeNumber),1)]),_:2},1024),r(C,{name:"name"},{default:l(()=>[u("span",{class:"cursor-pointer",onClick:I=>G(s.uuid)},v(s.name),9,Je),s.otherTeamMember?(m(),F("p",Ke,v(s.otherTeamName),1)):_("",!0)]),_:2},1024),r(C,{name:"joiningDate"},{default:l(()=>[V(v(s.joiningDate.formatted),1)]),_:2},1024),r(C,{name:"employmentStatus"},{default:l(()=>[V(v(s.employmentStatus),1)]),_:2},1024),r(C,{name:"department"},{default:l(()=>[V(v(s.department),1)]),_:2},1024),r(C,{name:"designation"},{default:l(()=>[V(v(s.designation),1)]),_:2},1024),r(C,{name:"createdAt"},{default:l(()=>[V(v(s.createdAt.formatted),1)]),_:2},1024),r(C,{name:"action"},{default:l(()=>[r(se,null,{default:l(()=>[r(M,{icon:"fas fa-arrow-circle-right",onClick:I=>g(y).push({name:"EmployeeShow",params:{uuid:s.uuid}})},{default:l(()=>[V(v(b.$trans("general.show")),1)]),_:2},1032,["onClick"]),g(D)("employee:delete")&&!s.self&&!s.isDefault?(m(),f(M,{key:0,icon:"fas fa-trash",onClick:I=>g(S).emit("deleteItem",{uuid:s.uuid})},{default:l(()=>[V(v(b.$trans("general.delete")),1)]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["selected","header","meta"])]),_:1})):_("",!0),e.items.length>0&&g(D)("employee:edit")?(m(),f(U,{key:2,appear:"",visibility:!0},{default:l(()=>[r(ne,{class:"mt-4","no-padding":"","no-content-padding":""},{title:l(()=>[V(v(b.$trans("general.action")),1)]),default:l(()=>[r(le,null,{default:l(()=>[r(O,{first:"",label:b.$trans("employee.group.group"),onClick:o[15]||(o[15]=s=>i.activeTab="updateGroup"),"is-active":i.activeTab=="updateGroup"},null,8,["label","is-active"]),r(O,{label:b.$trans("general.tag"),onClick:o[16]||(o[16]=s=>i.activeTab="updateTag"),"is-active":i.activeTab=="updateTag"},null,8,["label","is-active"])]),_:1}),u("div",Qe,[i.activeTab=="updateTag"?(m(),f(we,{key:0,selected:e,"select-all":i.selectAll,"selected-employees":i.selectedEmployees,onCompleted:q},null,8,["selected","select-all","selected-employees"])):_("",!0),i.activeTab=="updateGroup"?(m(),f(Ge,{key:1,selected:e,"select-all":i.selectAll,"selected-employees":i.selectedEmployees,onCompleted:q},null,8,["selected","select-all","selected-employees"])):_("",!0)])]),_:1})]),_:1})):_("",!0)]),_:1})}}});export{et as default};
