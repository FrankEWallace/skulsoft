import{i as U,j as E,g as N,I,p as R,m as v,q as T,r as u,a as g,o as c,d as a,e as n,f as m,v as l,x as o,w as i,b as f,t as V,F as z,K as A}from"./app-Cvm44xuh.js";const H={class:"flex justify-end"},O={class:"flex justify-center"},P={href:"/",class:"mb-6"},S=["src"],G={key:0,class:"mb-6"},K=["innerHTML"],J={class:"mt-4 grid grid-cols-3 gap-4"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={key:1,class:"mt-4"},Y={key:2,class:"mt-8 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-3"},Z={class:"mt-4 flex justify-end space-x-4"},ee={name:"GuestPayment"},ae=Object.assign(ee,{setup(te){const B=U(),h=E(),k={certificateNumber:"",codeNumber:""},p="transferCertificate/",C=N("layout.display").value=="dark"?N("assets.iconLight"):N("assets.icon"),b=I(p),L=R(!1),y=v({instruction:""}),e=v({isFetched:!1,isVerified:!1,student:{}}),r=v({...k}),D=async()=>{await h.dispatch(p+"preRequisite").then(t=>{y.instruction=t.instruction}).catch(t=>{B.push({name:"Dashboard"})})},j=()=>{e.isFetched=!1,e.isVerified=!1,e.student={},Object.assign(r,A(k)),h.dispatch(p+"resetFormErrors")},q=async()=>{await h.dispatch(p+"verify",{form:{certificateNumber:r.certificateNumber,codeNumber:r.codeNumber}}).then(t=>{e.isFetched=!0,e.isVerified=!0,e.student=t}).catch(t=>{e.isFetched=!0,e.isVerified=!1})};return T(()=>{D()}),(t,s)=>{const $=u("BaseInput"),F=u("BaseAlert"),_=u("BaseDataView"),x=u("ListMedia"),w=u("BaseButton"),M=u("BaseLoader");return c(),g(z,null,[a("div",H,[a("span",{class:"text-sm text-gray-500 cursor-pointer",onClick:s[0]||(s[0]=d=>m(B).push({name:"Dashboard"}))},[s[5]||(s[5]=a("i",{class:"fas fa-home mr-1"},null,-1)),l(" "+o(t.$trans("global.go_to",{attribute:t.$trans("dashboard.home")})),1)])]),a("div",O,[a("a",P,[a("img",{class:"h-16 w-auto",src:m(C),alt:""},null,8,S)])]),n(M,{"is-loading":L.value},{default:i(()=>[y.instruction?(c(),g("div",G,[a("div",{class:"mt-4 text-sm",innerHTML:y.instruction},null,8,K)])):f("",!0),a("div",J,[a("div",Q,[n($,{disabled:!!e.student.uuid,type:"text",modelValue:r.certificateNumber,"onUpdate:modelValue":s[1]||(s[1]=d=>r.certificateNumber=d),name:"certificateNumber",label:t.$trans("student.transfer.props.certificate_number"),error:m(b).certificateNumber,"onUpdate:error":s[2]||(s[2]=d=>m(b).certificateNumber=d)},null,8,["disabled","modelValue","label","error"])]),a("div",W,[n($,{disabled:!!e.student.uuid,type:"text",modelValue:r.codeNumber,"onUpdate:modelValue":s[3]||(s[3]=d=>r.codeNumber=d),name:"codeNumber",label:t.$trans("student.admission.props.code_number"),error:m(b).codeNumber,"onUpdate:error":s[4]||(s[4]=d=>m(b).codeNumber=d)},null,8,["disabled","modelValue","label","error"])])]),e.isFetched?(c(),g("div",X,[e.isVerified?(c(),V(F,{key:0,size:"xs",design:"success"},{default:i(()=>[l(o(t.$trans("student.transfer.verified")),1)]),_:1})):f("",!0),e.isVerified?f("",!0):(c(),V(F,{key:1,size:"xs",design:"error"},{default:i(()=>[l(o(t.$trans("student.transfer.not_verified")),1)]),_:1}))])):f("",!0),e.student.uuid?(c(),g("dl",Y,[n(_,{label:t.$trans("student.props.name")},{default:i(()=>[l(o(e.student.name),1)]),_:1},8,["label"]),n(_,{label:t.$trans("academic.course.course")},{default:i(()=>[l(o(e.student.course)+" "+o(e.student.batch),1)]),_:1},8,["label"]),n(_,{label:t.$trans("student.transfer.props.date")},{default:i(()=>[l(o(e.student.leavingDate),1)]),_:1},8,["label"]),n(_,{class:"col-span-1 sm:col-span-3"},{default:i(()=>[n(x,{"show-preview":!1,section:"transfer_certificate",media:e.student.media,url:"/app/transfer-certificate/","additional-query-params":{certificate_number:r.certificateNumber,code_number:r.codeNumber}},null,8,["media","additional-query-params"])]),_:1})])):f("",!0),a("div",Z,[n(w,{onClick:j,design:"danger"},{default:i(()=>[l(o(t.$trans("general.reset")),1)]),_:1}),e.student.uuid?f("",!0):(c(),V(w,{key:0,onClick:q},{default:i(()=>[l(o(t.$trans("general.proceed")),1)]),_:1}))])]),_:1},8,["is-loading"])],64)}}});export{ae as default};
