import{u as E,m as F,q as Q,r as l,t as f,o as p,w as t,d as I,e as o,i as z,k as G,z as v,p as H,f as i,a as J,F as K,y as W,v as u,x as m,b as w}from"./app-Cvm44xuh.js";const X={class:"grid grid-cols-3 gap-6"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ne={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(D,{emit:y}){E();const k=y,_=D,g={name:"",code:"",inventory:"",place:"",stockCategories:[]},r=F({...g}),b=F({inventories:_.preRequisites.inventories,stockCategories:_.preRequisites.stockCategories,places:_.preRequisites.places}),$=F({isLoaded:!0});return Q(async()=>{$.isLoaded=!0}),(d,s)=>{const S=l("BaseInput"),V=l("BaseSelect"),q=l("FilterForm");return p(),f(q,{"init-form":g,form:r,multiple:["stockCategories"],onHide:s[5]||(s[5]=e=>k("hide"))},{default:t(()=>[I("div",X,[I("div",Y,[o(S,{type:"text",modelValue:r.name,"onUpdate:modelValue":s[0]||(s[0]=e=>r.name=e),name:"name",label:d.$trans("inventory.stock_item.props.name")},null,8,["modelValue","label"])]),I("div",Z,[o(S,{type:"text",modelValue:r.code,"onUpdate:modelValue":s[1]||(s[1]=e=>r.code=e),name:"code",label:d.$trans("inventory.stock_item.props.code")},null,8,["modelValue","label"])]),I("div",x,[o(V,{modelValue:r.inventory,"onUpdate:modelValue":s[2]||(s[2]=e=>r.inventory=e),name:"inventory",label:d.$trans("inventory.inventory"),"label-prop":"name","value-prop":"uuid",options:b.inventories},null,8,["modelValue","label","options"])]),I("div",ee,[o(V,{multiple:"",modelValue:r.stockCategories,"onUpdate:modelValue":s[3]||(s[3]=e=>r.stockCategories=e),name:"stockCategories",label:d.$trans("inventory.stock_category.stock_category"),"label-prop":"name","value-prop":"uuid",options:b.categories},null,8,["modelValue","label","options"])]),I("div",te,[o(V,{modelValue:r.place,"onUpdate:modelValue":s[4]||(s[4]=e=>r.place=e),name:"place",label:d.$trans("inventory.stock_item.props.place"),"label-prop":"fullName","value-prop":"uuid",options:b.places},null,8,["modelValue","label","options"])])])]),_:1},8,["form"])}}},oe={name:"InventoryStockItemList"},se=Object.assign(oe,{setup(D){const y=z(),k=G("emitter");let _=["filter"];v("stock-item:create")&&_.unshift("create");let g=[];v("stock-item:export")&&(g=["print","pdf","excel"]),v("stock-item:create")&&g.unshift("import");const r="inventory/stockItem/",b=F({categories:[],places:[]}),$=H(!1),d=H(!1),s=F({}),S=e=>{Object.assign(b,e)},V=e=>{Object.assign(s,e)},q=async e=>{k.emit("actionItem",{uuid:e.uuid,action:"recalculateQuantity",confirmation:!0})};return(e,a)=>{const M=l("PageHeaderAction"),A=l("PageHeader"),R=l("ParentTransition"),L=l("BaseImport"),T=l("TextMuted"),C=l("DataCell"),B=l("FloatingMenuItem"),U=l("FloatingMenu"),h=l("DataRow"),j=l("BaseButton"),N=l("DataTable"),O=l("ListItem");return p(),f(O,{"init-url":r,"pre-requisites":!0,onSetPreRequisites:S,onSetItems:V},{header:t(()=>[o(A,{title:e.$trans("inventory.stock_item.stock_item"),navs:[{label:e.$trans("inventory.inventory"),path:"Inventory"}]},{default:t(()=>[o(M,{url:"inventory/stock-items/",name:"InventoryStockItem",title:e.$trans("inventory.stock_item.stock_item"),actions:i(_),"dropdown-actions":i(g),onToggleFilter:a[0]||(a[0]=n=>$.value=!$.value),onToggleImport:a[1]||(a[1]=n=>d.value=!d.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[o(R,{appear:"",visibility:$.value},{default:t(()=>[o(ne,{onRefresh:a[2]||(a[2]=n=>i(k).emit("listItems")),"pre-requisites":b,onHide:a[3]||(a[3]=n=>$.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),import:t(()=>[o(R,{appear:"",visibility:d.value},{default:t(()=>[o(L,{path:"inventory/stock-items/import",onCancelled:a[4]||(a[4]=n=>d.value=!1),onHide:a[5]||(a[5]=n=>d.value=!1),onCompleted:a[6]||(a[6]=n=>i(k).emit("listItems"))})]),_:1},8,["visibility"])]),default:t(()=>[o(R,{appear:"",visibility:!0},{default:t(()=>[o(N,{header:s.headers,meta:s.meta,module:"inventory.stock_item",onRefresh:a[8]||(a[8]=n=>i(k).emit("listItems"))},{actionButton:t(()=>[i(v)("stock-item:create")?(p(),f(j,{key:0,onClick:a[7]||(a[7]=n=>i(y).push({name:"InventoryStockItemCreate"}))},{default:t(()=>[u(m(e.$trans("global.add",{attribute:e.$trans("inventory.stock_item.stock_item")})),1)]),_:1})):w("",!0)]),default:t(()=>[(p(!0),J(K,null,W(s.data,n=>(p(),f(h,{key:n.uuid,onDoubleClick:c=>i(y).push({name:"InventoryStockItemShow",params:{uuid:n.uuid}})},{default:t(()=>[o(C,{name:"name"},{default:t(()=>[u(m(n.name)+" ",1),o(T,{block:""},{default:t(()=>[u(m(n.code),1)]),_:2},1024)]),_:2},1024),o(C,{name:"category"},{default:t(()=>[u(m(n.category.name)+" ",1),o(T,{block:""},{default:t(()=>{var c,P;return[u(m((P=(c=n.category)==null?void 0:c.inventory)==null?void 0:P.name),1)]}),_:2},1024)]),_:2},1024),o(C,{name:"quantity"},{default:t(()=>[u(m(n.quantity),1)]),_:2},1024),o(C,{name:"unit"},{default:t(()=>[u(m(n.unit),1)]),_:2},1024),o(C,{name:"createdAt"},{default:t(()=>[u(m(n.createdAt.formatted),1)]),_:2},1024),o(C,{name:"action"},{default:t(()=>[o(U,null,{default:t(()=>[o(B,{icon:"fas fa-arrow-circle-right",onClick:c=>i(y).push({name:"InventoryStockItemShow",params:{uuid:n.uuid}})},{default:t(()=>[u(m(e.$trans("general.show")),1)]),_:2},1032,["onClick"]),i(v)("stock-item:edit")?(p(),f(B,{key:0,icon:"fas fa-arrows-rotate",onClick:c=>q(n)},{default:t(()=>[u(m(e.$trans("general.refresh")),1)]),_:2},1032,["onClick"])):w("",!0),i(v)("stock-item:edit")?(p(),f(B,{key:1,icon:"fas fa-edit",onClick:c=>i(y).push({name:"InventoryStockItemEdit",params:{uuid:n.uuid}})},{default:t(()=>[u(m(e.$trans("general.edit")),1)]),_:2},1032,["onClick"])):w("",!0),i(v)("stock-item:create")?(p(),f(B,{key:2,icon:"fas fa-copy",onClick:c=>i(y).push({name:"InventoryStockItemDuplicate",params:{uuid:n.uuid}})},{default:t(()=>[u(m(e.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):w("",!0),i(v)("stock-item:delete")?(p(),f(B,{key:3,icon:"fas fa-trash",onClick:c=>i(k).emit("deleteItem",{uuid:n.uuid})},{default:t(()=>[u(m(e.$trans("general.delete")),1)]),_:2},1032,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{se as default};
