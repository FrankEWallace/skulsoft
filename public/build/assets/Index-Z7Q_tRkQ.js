import{m as I,r as s,t as $,o as c,w as t,d as S,e,u as L,i as M,k as N,z as _,p as O,f as u,a as w,F as B,y as U,v as d,x as l,b as y}from"./app-Cvm44xuh.js";const E={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},q={__name:"Filter",emits:["hide"],setup(o,{emit:b}){const m=b,f={title:""},p=I({...f});return(C,r)=>{const g=s("BaseInput"),h=s("FilterForm");return c(),$(h,{"init-form":f,form:p,onHide:r[1]||(r[1]=a=>m("hide"))},{default:t(()=>[S("div",E,[S("div",z,[e(g,{type:"text",modelValue:p.title,"onUpdate:modelValue":r[0]||(r[0]=a=>p.title=a),name:"title",label:C.$trans("student.document.props.title")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},G={name:"StudentDocumentList"},K=Object.assign(G,{props:{student:{type:Object,default(){return{}}}},setup(o){const b=L(),m=M(),f=N("emitter");let p=["filter"];(_("student:edit")||_("student-record:manage"))&&p.unshift("create");const C="student/document/",r=O(!1),g=I({}),h=a=>{Object.assign(g,a)};return(a,i)=>{const V=s("PageHeaderAction"),H=s("PageHeader"),F=s("ParentTransition"),v=s("DataCell"),D=s("FloatingMenuItem"),P=s("FloatingMenu"),R=s("DataRow"),T=s("BaseButton"),A=s("DataTable"),j=s("ListItem");return c(),$(j,{"init-url":C,uuid:u(b).params.uuid,onSetItems:h},{header:t(()=>[o.student.uuid?(c(),$(H,{key:0,title:a.$trans("student.document.document"),navs:[{label:a.$trans("student.student"),path:"Student"},{label:o.student.contact.name,path:{name:"StudentShow",params:{uuid:o.student.uuid}}}]},{default:t(()=>[e(V,{url:`students/${o.student.uuid}/documents/`,name:"StudentDocument",title:a.$trans("student.document.document"),actions:u(p),"dropdown-actions":["print","pdf","excel"],onToggleFilter:i[0]||(i[0]=n=>r.value=!r.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):y("",!0)]),filter:t(()=>[e(F,{appear:"",visibility:r.value},{default:t(()=>[e(q,{onRefresh:i[1]||(i[1]=n=>u(f).emit("listItems")),onHide:i[2]||(i[2]=n=>r.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[e(F,{appear:"",visibility:!0},{default:t(()=>[e(A,{header:g.headers,meta:g.meta,module:"student.document",onRefresh:i[4]||(i[4]=n=>u(f).emit("listItems"))},{actionButton:t(()=>[u(_)("student:edit")||u(_)("student-record:manage")?(c(),$(T,{key:0,onClick:i[3]||(i[3]=n=>u(m).push({name:"StudentDocumentCreate"}))},{default:t(()=>[d(l(a.$trans("global.add",{attribute:a.$trans("student.document.document")})),1)]),_:1})):y("",!0)]),default:t(()=>[(c(!0),w(B,null,U(g.data,n=>(c(),$(R,{key:n.uuid,onDoubleClick:k=>u(m).push({name:"StudentDocumentShow",params:{uuid:o.student.uuid,muuid:n.uuid}})},{default:t(()=>[e(v,{name:"title"},{default:t(()=>[d(l(n.title),1)]),_:2},1024),e(v,{name:"type"},{default:t(()=>[d(l(n.type.name),1)]),_:2},1024),e(v,{name:"startDate"},{default:t(()=>[d(l(n.startDate.formatted),1)]),_:2},1024),e(v,{name:"endDate"},{default:t(()=>[d(l(n.endDate.formatted),1)]),_:2},1024),e(v,{name:"createdAt"},{default:t(()=>[d(l(n.createdAt.formatted),1)]),_:2},1024),e(v,{name:"action"},{default:t(()=>[e(P,null,{default:t(()=>[e(D,{icon:"fas fa-arrow-circle-right",onClick:k=>u(m).push({name:"StudentDocumentShow",params:{uuid:o.student.uuid,muuid:n.uuid}})},{default:t(()=>[d(l(a.$trans("general.show")),1)]),_:2},1032,["onClick"]),u(_)("student:edit")||u(_)("student-record:manage")?(c(),w(B,{key:0},[e(D,{icon:"fas fa-edit",onClick:k=>u(m).push({name:"StudentDocumentEdit",params:{uuid:o.student.uuid,muuid:n.uuid}})},{default:t(()=>[d(l(a.$trans("general.edit")),1)]),_:2},1032,["onClick"]),e(D,{icon:"fas fa-copy",onClick:k=>u(m).push({name:"StudentDocumentDuplicate",params:{uuid:o.student.uuid,muuid:n.uuid}})},{default:t(()=>[d(l(a.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),e(D,{icon:"fas fa-trash",onClick:k=>u(f).emit("deleteItem",{uuid:o.student.uuid,moduleUuid:n.uuid})},{default:t(()=>[d(l(a.$trans("general.delete")),1)]),_:2},1032,["onClick"])],64)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{K as default};
