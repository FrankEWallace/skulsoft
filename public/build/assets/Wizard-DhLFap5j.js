import{u as Q,i as K,k as ue,I as Z,g as _,m as P,q as J,r as y,a as M,b as N,o as v,e as n,w as u,d as f,f as t,t as F,v as U,x as $,J as ie,K as h,j as x,H as de,F as Y,p as X,y as me,$ as pe,L as Ve}from"./app-Cvm44xuh.js";import{u as ke}from"./useCustomFields-B8b01gVh.js";const De={key:0,class:"pb-4 px-2"},Ne={class:"grid grid-cols-3 gap-6"},Ae={class:"col-span-3 sm:col-span-1"},Ie={class:"col-span-3 sm:col-span-1"},Be={class:"col-span-3 sm:col-span-1"},Te={key:0,class:"col-span-4 sm:col-span-1"},Fe={class:"col-span-3 sm:col-span-1"},Le={class:"col-span-3 sm:col-span-1"},Ce={class:"col-span-3 sm:col-span-1"},we={class:"col-span-3 sm:col-span-1"},Se={class:"flex"},Me={class:"col-span-3 sm:col-span-1"},Re={class:"col-span-3 sm:col-span-1"},je={key:1,class:"col-span-3 sm:col-span-1"},Oe={key:2,class:"col-span-3 sm:col-span-1"},Ee={key:3,class:"col-span-3 sm:col-span-1"},Pe={key:4,class:"col-span-3 sm:col-span-1"},ze={key:5,class:"col-span-3 sm:col-span-1"},_e={key:6,class:"col-span-3 sm:col-span-1"},Ge={class:"col-span-3 sm:col-span-1"},He={class:"col-span-3 sm:col-span-1"},Qe={class:"col-span-3 sm:col-span-1"},Je={class:"col-span-3 sm:col-span-1"},Ke={key:7,class:"col-span-4 sm:col-span-1"},We={key:8,class:"col-span-3 sm:col-span-1"},Xe={class:"col-span-3 sm:col-span-1"},Ye={key:9,class:"col-span-3 sm:col-span-1"},Ze={key:10,class:"col-span-3 sm:col-span-1"},he={class:"col-span-3"},xe={name:"StudentRegistrationBasicForm"},et=Object.assign(xe,{props:{registration:{type:Object,default(){return{}}},preRequisites:{type:Object,default(){return{}}}},emits:["completed"],setup(m,{emit:z}){const C=Q();K(),ue("emitter");const S=z,p=m,b={period:"",date:"",stage:"",course:"",enrollmentType:"",registrationFee:"",paymentDueDate:"",firstName:"",middleName:"",thirdName:"",lastName:"",firstName:"",middleName:"",gender:"",birthDate:"",anniversaryDate:"",uniqueIdNumber1:"",uniqueIdNumber2:"",uniqueIdNumber3:"",uniqueIdNumber4:"",uniqueIdNumber5:"",birthPlace:"",nationality:"",motherTongue:"",bloodGroup:"",maritalStatus:"",religion:"",category:"",caste:"",remarks:"",customFields:[],tab:"basic"},l="student/registration/",e=Z(l),d=_("student.isUniqueIdNumber1Enabled"),g=_("student.isUniqueIdNumber2Enabled"),c=_("student.isUniqueIdNumber3Enabled"),I=_("student.isUniqueIdNumber4Enabled"),R=_("student.isUniqueIdNumber5Enabled"),T=_("student.uniqueIdNumber1Label"),A=_("student.uniqueIdNumber2Label"),D=_("student.uniqueIdNumber3Label"),o=_("student.uniqueIdNumber4Label"),r=_("student.uniqueIdNumber5Label"),O=_("contact.enableLocalityField"),B=_("contact.enableCategoryField"),L=_("contact.enableCasteField"),j=_("student.enableMaritalStatus"),w=_("student.enableAnniversaryDate"),i=P({...b}),E=P({isLoaded:!C.params.uuid}),{customFields:k,setCustomFields:q}=ke(),te=()=>{var s,G,W,ae,H,ee,oe,se,ne,re,le,a,ce,be,fe,ge;let V=(s=p.registration)==null?void 0:s.contact;Object.assign(b,{period:((G=p.registration.period)==null?void 0:G.uuid)||"",date:((W=p.registration.date)==null?void 0:W.value)||"",course:((ae=p.registration.course)==null?void 0:ae.uuid)||"",enrollmentType:((H=p.registration.enrollmentType)==null?void 0:H.uuid)||"",registrationFee:p.registration.fee.value||0,paymentDueDate:((ee=p.registration.paymentDueDate)==null?void 0:ee.value)||"",stage:((oe=p.registration.stage)==null?void 0:oe.uuid)||"",firstName:V.firstName,middleName:V.middleName,thirdName:V.thirdName,lastName:V.lastName,fatherName:V.fatherName,motherName:V.motherName,gender:(se=V.gender)==null?void 0:se.value,birthDate:(ne=V.birthDate)==null?void 0:ne.value,anniversaryDate:(re=V.anniversaryDate)==null?void 0:re.value,uniqueIdNumber1:V.uniqueIdNumber1,uniqueIdNumber2:V.uniqueIdNumber2,uniqueIdNumber3:V.uniqueIdNumber3,uniqueIdNumber4:V.uniqueIdNumber4,uniqueIdNumber5:V.uniqueIdNumber5,birthPlace:V.birthPlace,locality:((le=V.locality)==null?void 0:le.value)||"",bloodGroup:((a=V.bloodGroup)==null?void 0:a.value)||"",maritalStatus:((ce=V.maritalStatus)==null?void 0:ce.value)||"",nationality:V.nationality,motherTongue:V.motherTongue,religion:((be=V.religion)==null?void 0:be.uuid)||"",category:((fe=V.category)==null?void 0:fe.uuid)||"",caste:((ge=V.caste)==null?void 0:ge.uuid)||"",remarks:p.registration.remarks}),q(p.preRequisites.customFields,p.registration.customFields),b.customFields=k.value,Object.assign(i,h(b)),E.isLoaded=!0};J(async()=>{te()});const Ue=()=>{S("completed")};return(V,s)=>{const G=y("BaseSelect"),W=y("DatePicker"),ae=y("BaseSelectSearch"),H=y("BaseInput"),ee=y("BaseLabel"),oe=y("NameInput"),se=y("BaseRadioGroup"),ne=y("BaseTextarea"),re=y("CustomField"),le=y("FormAction");return m.registration.uuid?(v(),M("div",De,[n(le,{"no-card":"","init-url":l,"no-data-fetch":"","init-form":b,form:i,action:"updateDetail","stay-on":"","submit-text":V.$trans("general.proceed"),"after-submit":Ue},{default:u(()=>[f("div",Ne,[f("div",Ae,[n(G,{modelValue:i.period,"onUpdate:modelValue":s[0]||(s[0]=a=>i.period=a),name:"period",label:V.$trans("global.select",{attribute:V.$trans("academic.period.period")}),options:m.preRequisites.periods,"label-prop":"name","value-prop":"uuid",error:t(e).period,"onUpdate:error":s[1]||(s[1]=a=>t(e).period=a),onChange:s[2]||(s[2]=()=>{})},null,8,["modelValue","label","options","error"])]),f("div",Ie,[n(W,{modelValue:i.date,"onUpdate:modelValue":s[3]||(s[3]=a=>i.date=a),name:"date",label:V.$trans("student.registration.props.date"),"no-clear":"",error:t(e).date,"onUpdate:error":s[4]||(s[4]=a=>t(e).date=a)},null,8,["modelValue","label","error"])]),f("div",Be,[n(G,{modelValue:i.stage,"onUpdate:modelValue":s[5]||(s[5]=a=>i.stage=a),name:"stage",label:V.$trans("student.registration.props.stage"),options:m.preRequisites.stages,"label-prop":"name","value-prop":"uuid",error:t(e).stage,"onUpdate:error":s[6]||(s[6]=a=>t(e).stage=a)},null,8,["modelValue","label","options","error"])]),i.period?(v(),M("div",Te,[E.isLoaded?(v(),F(ae,{key:0,name:"course",label:V.$trans("global.select",{attribute:V.$trans("academic.course.course")}),modelValue:i.course,"onUpdate:modelValue":s[7]||(s[7]=a=>i.course=a),error:t(e).course,"onUpdate:error":s[8]||(s[8]=a=>t(e).course=a),"value-prop":"uuid","init-search":i.course,"init-search-key":t(C).params.uuid?"uuid":"name","additional-search-query":{period:i.period},"search-action":"academic/course/list"},{selectedOption:u(a=>[U($(a.value.division.name)+" - "+$(a.value.name),1)]),listOption:u(a=>[U($(a.option.division.name)+" - "+$(a.option.name),1)]),_:1},8,["label","modelValue","error","init-search","init-search-key","additional-search-query"])):N("",!0)])):N("",!0),f("div",Fe,[n(G,{modelValue:i.enrollmentType,"onUpdate:modelValue":s[9]||(s[9]=a=>i.enrollmentType=a),name:"enrollmentType",label:V.$trans("global.select",{attribute:V.$trans("student.enrollment_type.enrollment_type")}),options:m.preRequisites.enrollmentTypes,"label-prop":"name","value-prop":"uuid",error:t(e).enrollmentType,"onUpdate:error":s[10]||(s[10]=a=>t(e).enrollmentType=a)},null,8,["modelValue","label","options","error"])]),f("div",Le,[n(H,{currency:"",modelValue:i.registrationFee,"onUpdate:modelValue":s[11]||(s[11]=a=>i.registrationFee=a),name:"registrationFee",label:V.$trans("student.registration.fee"),error:t(e).registrationFee,"onUpdate:error":s[12]||(s[12]=a=>t(e).registrationFee=a)},null,8,["modelValue","label","error"])]),f("div",Ce,[n(W,{modelValue:i.paymentDueDate,"onUpdate:modelValue":s[13]||(s[13]=a=>i.paymentDueDate=a),name:"paymentDueDate",label:V.$trans("student.registration.props.payment_due_date"),"no-clear":"",error:t(e).paymentDueDate,"onUpdate:error":s[14]||(s[14]=a=>t(e).paymentDueDate=a)},null,8,["modelValue","label","error"])]),f("div",we,[n(ee,null,{default:u(()=>[U($(V.$trans("contact.props.name")),1)]),_:1}),f("div",Se,[n(oe,{firstName:i.firstName,"onUpdate:firstName":s[15]||(s[15]=a=>i.firstName=a),middleName:i.middleName,"onUpdate:middleName":s[16]||(s[16]=a=>i.middleName=a),thirdName:i.thirdName,"onUpdate:thirdName":s[17]||(s[17]=a=>i.thirdName=a),lastName:i.lastName,"onUpdate:lastName":s[18]||(s[18]=a=>i.lastName=a),formErrors:t(e),"onUpdate:formErrors":s[19]||(s[19]=a=>ie(e)?e.value=a:null)},null,8,["firstName","middleName","thirdName","lastName","formErrors"])])]),f("div",Me,[n(ee,null,{default:u(()=>[U($(V.$trans("contact.props.gender")),1)]),_:1}),n(se,{"top-margin":"",options:m.preRequisites.genders,name:"gender",modelValue:i.gender,"onUpdate:modelValue":s[20]||(s[20]=a=>i.gender=a),error:t(e).gender,"onUpdate:error":s[21]||(s[21]=a=>t(e).gender=a),horizontal:""},null,8,["options","modelValue","error"])]),f("div",Re,[n(W,{modelValue:i.birthDate,"onUpdate:modelValue":s[22]||(s[22]=a=>i.birthDate=a),name:"birthDate",label:V.$trans("contact.props.birth_date"),"no-clear":"",error:t(e).birthDate,"onUpdate:error":s[23]||(s[23]=a=>t(e).birthDate=a)},null,8,["modelValue","label","error"])]),t(w)?(v(),M("div",je,[n(W,{modelValue:i.anniversaryDate,"onUpdate:modelValue":s[24]||(s[24]=a=>i.anniversaryDate=a),name:"anniversaryDate",label:V.$trans("contact.props.anniversary_date"),"no-clear":"",error:t(e).anniversaryDate,"onUpdate:error":s[25]||(s[25]=a=>t(e).anniversaryDate=a)},null,8,["modelValue","label","error"])])):N("",!0),t(d)?(v(),M("div",Oe,[n(H,{type:"text",modelValue:i.uniqueIdNumber1,"onUpdate:modelValue":s[26]||(s[26]=a=>i.uniqueIdNumber1=a),name:"uniqueIdNumber1",label:t(T),error:t(e).uniqueIdNumber1,"onUpdate:error":s[27]||(s[27]=a=>t(e).uniqueIdNumber1=a)},null,8,["modelValue","label","error"])])):N("",!0),t(g)?(v(),M("div",Ee,[n(H,{type:"text",modelValue:i.uniqueIdNumber2,"onUpdate:modelValue":s[28]||(s[28]=a=>i.uniqueIdNumber2=a),name:"uniqueIdNumber2",label:t(A),error:t(e).uniqueIdNumber2,"onUpdate:error":s[29]||(s[29]=a=>t(e).uniqueIdNumber2=a)},null,8,["modelValue","label","error"])])):N("",!0),t(c)?(v(),M("div",Pe,[n(H,{type:"text",modelValue:i.uniqueIdNumber3,"onUpdate:modelValue":s[30]||(s[30]=a=>i.uniqueIdNumber3=a),name:"uniqueIdNumber3",label:t(D),error:t(e).uniqueIdNumber3,"onUpdate:error":s[31]||(s[31]=a=>t(e).uniqueIdNumber3=a)},null,8,["modelValue","label","error"])])):N("",!0),t(I)?(v(),M("div",ze,[n(H,{type:"text",modelValue:i.uniqueIdNumber4,"onUpdate:modelValue":s[32]||(s[32]=a=>i.uniqueIdNumber4=a),name:"uniqueIdNumber4",label:t(o),error:t(e).uniqueIdNumber4,"onUpdate:error":s[33]||(s[33]=a=>t(e).uniqueIdNumber4=a)},null,8,["modelValue","label","error"])])):N("",!0),t(R)?(v(),M("div",_e,[n(H,{type:"text",modelValue:i.uniqueIdNumber5,"onUpdate:modelValue":s[34]||(s[34]=a=>i.uniqueIdNumber5=a),name:"uniqueIdNumber5",label:t(r),error:t(e).uniqueIdNumber5,"onUpdate:error":s[35]||(s[35]=a=>t(e).uniqueIdNumber5=a)},null,8,["modelValue","label","error"])])):N("",!0),f("div",Ge,[n(H,{type:"text",modelValue:i.birthPlace,"onUpdate:modelValue":s[36]||(s[36]=a=>i.birthPlace=a),name:"birthPlace",label:V.$trans("contact.props.birth_place"),error:t(e).birthPlace,"onUpdate:error":s[37]||(s[37]=a=>t(e).birthPlace=a)},null,8,["modelValue","label","error"])]),f("div",He,[n(H,{type:"text",modelValue:i.nationality,"onUpdate:modelValue":s[38]||(s[38]=a=>i.nationality=a),name:"nationality",label:V.$trans("contact.props.nationality"),error:t(e).nationality,"onUpdate:error":s[39]||(s[39]=a=>t(e).nationality=a)},null,8,["modelValue","label","error"])]),f("div",Qe,[n(H,{type:"text",modelValue:i.motherTongue,"onUpdate:modelValue":s[40]||(s[40]=a=>i.motherTongue=a),name:"motherTongue",label:V.$trans("contact.props.mother_tongue"),error:t(e).motherTongue,"onUpdate:error":s[41]||(s[41]=a=>t(e).motherTongue=a)},null,8,["modelValue","label","error"])]),f("div",Je,[E.isLoaded?(v(),F(G,{key:0,modelValue:i.bloodGroup,"onUpdate:modelValue":s[42]||(s[42]=a=>i.bloodGroup=a),name:"bloodGroup",label:V.$trans("contact.props.blood_group"),options:m.preRequisites.bloodGroups,error:t(e).bloodGroup,"onUpdate:error":s[43]||(s[43]=a=>t(e).bloodGroup=a)},null,8,["modelValue","label","options","error"])):N("",!0)]),t(O)?(v(),M("div",Ke,[n(G,{modelValue:i.locality,"onUpdate:modelValue":s[44]||(s[44]=a=>i.locality=a),name:"locality",label:V.$trans("contact.props.locality"),options:m.preRequisites.localities,"label-prop":"label","value-prop":"value",error:t(e).locality,"onUpdate:error":s[45]||(s[45]=a=>t(e).locality=a)},null,8,["modelValue","label","options","error"])])):N("",!0),t(j)?(v(),M("div",We,[E.isLoaded?(v(),F(G,{key:0,modelValue:i.maritalStatus,"onUpdate:modelValue":s[46]||(s[46]=a=>i.maritalStatus=a),name:"maritalStatus",label:V.$trans("contact.props.marital_status"),options:m.preRequisites.maritalStatuses,error:t(e).maritalStatus,"onUpdate:error":s[47]||(s[47]=a=>t(e).maritalStatus=a)},null,8,["modelValue","label","options","error"])):N("",!0)])):N("",!0),f("div",Xe,[E.isLoaded?(v(),F(G,{key:0,name:"religion",label:V.$trans("global.select",{attribute:V.$trans("contact.religion.religion")}),modelValue:i.religion,"onUpdate:modelValue":s[48]||(s[48]=a=>i.religion=a),error:t(e).religion,"onUpdate:error":s[49]||(s[49]=a=>t(e).religion=a),options:m.preRequisites.religions,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):N("",!0)]),t(B)?(v(),M("div",Ye,[E.isLoaded?(v(),F(G,{key:0,name:"category",label:V.$trans("global.select",{attribute:V.$trans("contact.category.category")}),modelValue:i.category,"onUpdate:modelValue":s[50]||(s[50]=a=>i.category=a),error:t(e).category,"onUpdate:error":s[51]||(s[51]=a=>t(e).category=a),options:m.preRequisites.categories,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):N("",!0)])):N("",!0),t(L)?(v(),M("div",Ze,[E.isLoaded?(v(),F(G,{key:0,name:"caste",label:V.$trans("global.select",{attribute:V.$trans("contact.caste.caste")}),modelValue:i.caste,"onUpdate:modelValue":s[52]||(s[52]=a=>i.caste=a),error:t(e).caste,"onUpdate:error":s[53]||(s[53]=a=>t(e).caste=a),options:m.preRequisites.castes,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):N("",!0)])):N("",!0),f("div",he,[n(ne,{rows:1,modelValue:i.remarks,"onUpdate:modelValue":s[54]||(s[54]=a=>i.remarks=a),name:"remarks",label:V.$trans("student.registration.props.remarks"),error:t(e).remarks,"onUpdate:error":s[55]||(s[55]=a=>t(e).remarks=a)},null,8,["modelValue","label","error"])])]),n(re,{customFields:i.customFields,"onUpdate:customFields":s[56]||(s[56]=a=>i.customFields=a),formErrors:t(e),"onUpdate:formErrors":s[57]||(s[57]=a=>ie(e)?e.value=a:null)},null,8,["customFields","formErrors"])]),_:1},8,["form","submit-text"])])):N("",!0)}}}),tt={key:0,class:"pb-4 px-2"},at={class:"grid grid-cols-3 gap-6"},ot={class:"col-span-3 sm:col-span-1"},st={class:"col-span-3 sm:col-span-1"},nt={class:"col-span-3 sm:col-span-1"},rt={class:"col-span-3 sm:col-span-1"},lt={class:"col-span-3"},it={class:"grid grid-cols-3 gap-6"},dt={class:"col-span-3"},ut={class:"grid grid-cols-3 gap-6"},mt={class:"col-span-3 sm:col-span-1"},pt={class:"mt-4 grid grid-cols-3 gap-6"},ct={name:"StudentRegistrationContactForm"},bt=Object.assign(ct,{props:{registration:{type:Object,default(){return{}}}},emits:["completed"],setup(m,{emit:z}){Q(),K(),ue("emitter");const C=z,S=m,p={contactNumber:"",email:"",alternateRecords:{},presentAddress:{},permanentAddress:{},tab:"contact"},b="student/registration/",l=Z(b),e=P({...p});J(async()=>{var c,I,R,T,A,D,o,r,O,B,L,j,w,i,E;let g=(c=S.registration)==null?void 0:c.contact;Object.assign(p,{contactNumber:g.contactNumber,email:g.email,alternateRecords:{contactNumber:(I=g.alternateRecords)==null?void 0:I.contactNumber,email:(R=g.alternateRecords)==null?void 0:R.email},presentAddress:{addressLine1:(T=g.presentAddress)==null?void 0:T.addressLine1,addressLine2:(A=g.presentAddress)==null?void 0:A.addressLine2,city:(D=g.presentAddress)==null?void 0:D.city,state:(o=g.presentAddress)==null?void 0:o.state,zipcode:(r=g.presentAddress)==null?void 0:r.zipcode,country:(O=g.presentAddress)==null?void 0:O.country},permanentAddress:{sameAsPresentAddress:g.sameAsPresentAddress,addressLine1:(B=g.permanentAddress)==null?void 0:B.addressLine1,addressLine2:(L=g.permanentAddress)==null?void 0:L.addressLine2,city:(j=g.permanentAddress)==null?void 0:j.city,state:(w=g.permanentAddress)==null?void 0:w.state,zipcode:(i=g.permanentAddress)==null?void 0:i.zipcode,country:(E=g.permanentAddress)==null?void 0:E.country}}),Object.assign(e,h(p))});const d=()=>{C("completed")};return(g,c)=>{const I=y("BaseInput"),R=y("AddressInput"),T=y("BaseFieldset"),A=y("BaseSwitch"),D=y("FormAction");return m.registration.uuid?(v(),M("div",tt,[n(D,{"no-card":"","init-url":b,"no-data-fetch":"","init-form":p,form:e,action:"updateDetail","stay-on":"","after-submit":d},{default:u(()=>[f("div",at,[f("div",ot,[n(I,{type:"text",modelValue:e.contactNumber,"onUpdate:modelValue":c[0]||(c[0]=o=>e.contactNumber=o),name:"contactNumber",label:g.$trans("contact.props.contact_number"),error:t(l).contactNumber,"onUpdate:error":c[1]||(c[1]=o=>t(l).contactNumber=o)},null,8,["modelValue","label","error"])]),f("div",st,[n(I,{type:"text",modelValue:e.alternateRecords.contactNumber,"onUpdate:modelValue":c[2]||(c[2]=o=>e.alternateRecords.contactNumber=o),name:"alternateContactNumber",label:g.$trans("global.alternate",{attribute:g.$trans("contact.props.contact_number")}),error:t(l).alternateContactNumber,"onUpdate:error":c[3]||(c[3]=o=>t(l).alternateContactNumber=o)},null,8,["modelValue","label","error"])]),c[24]||(c[24]=f("div",{class:"col-span-3 sm:col-span-1"},null,-1)),f("div",nt,[n(I,{type:"text",modelValue:e.email,"onUpdate:modelValue":c[4]||(c[4]=o=>e.email=o),name:"email",label:g.$trans("contact.props.email"),error:t(l).email,"onUpdate:error":c[5]||(c[5]=o=>t(l).email=o)},null,8,["modelValue","label","error"])]),f("div",rt,[n(I,{type:"text",modelValue:e.alternateRecords.email,"onUpdate:modelValue":c[6]||(c[6]=o=>e.alternateRecords.email=o),name:"alternateEmail",label:g.$trans("global.alternate",{attribute:g.$trans("contact.props.email")}),error:t(l).alternateEmail,"onUpdate:error":c[7]||(c[7]=o=>t(l).alternateEmail=o)},null,8,["modelValue","label","error"])]),c[25]||(c[25]=f("div",{class:"col-span-3 sm:col-span-1"},null,-1)),f("div",lt,[n(T,null,{legend:u(()=>[U($(g.$trans("contact.props.present_address")),1)]),default:u(()=>[f("div",it,[n(R,{prefix:"presentAddress",addressLine1:e.presentAddress.addressLine1,"onUpdate:addressLine1":c[8]||(c[8]=o=>e.presentAddress.addressLine1=o),addressLine2:e.presentAddress.addressLine2,"onUpdate:addressLine2":c[9]||(c[9]=o=>e.presentAddress.addressLine2=o),city:e.presentAddress.city,"onUpdate:city":c[10]||(c[10]=o=>e.presentAddress.city=o),state:e.presentAddress.state,"onUpdate:state":c[11]||(c[11]=o=>e.presentAddress.state=o),zipcode:e.presentAddress.zipcode,"onUpdate:zipcode":c[12]||(c[12]=o=>e.presentAddress.zipcode=o),country:e.presentAddress.country,"onUpdate:country":c[13]||(c[13]=o=>e.presentAddress.country=o),formErrors:t(l),"onUpdate:formErrors":c[14]||(c[14]=o=>ie(l)?l.value=o:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"])])]),_:1})]),f("div",dt,[n(T,null,{legend:u(()=>[U($(g.$trans("contact.props.permanent_address")),1)]),default:u(()=>[f("div",ut,[f("div",mt,[n(A,{modelValue:e.permanentAddress.sameAsPresentAddress,"onUpdate:modelValue":c[15]||(c[15]=o=>e.permanentAddress.sameAsPresentAddress=o),name:"sameAsPresentAddress",label:g.$trans("contact.props.same_as_present_address"),error:t(l).sameAsPresentAddress,"onUpdate:error":c[16]||(c[16]=o=>t(l).sameAsPresentAddress=o)},null,8,["modelValue","label","error"])])]),f("div",pt,[e.permanentAddress.sameAsPresentAddress?N("",!0):(v(),F(R,{key:0,prefix:"permanentAddress",addressLine1:e.permanentAddress.addressLine1,"onUpdate:addressLine1":c[17]||(c[17]=o=>e.permanentAddress.addressLine1=o),addressLine2:e.permanentAddress.addressLine2,"onUpdate:addressLine2":c[18]||(c[18]=o=>e.permanentAddress.addressLine2=o),city:e.permanentAddress.city,"onUpdate:city":c[19]||(c[19]=o=>e.permanentAddress.city=o),state:e.permanentAddress.state,"onUpdate:state":c[20]||(c[20]=o=>e.permanentAddress.state=o),zipcode:e.permanentAddress.zipcode,"onUpdate:zipcode":c[21]||(c[21]=o=>e.permanentAddress.zipcode=o),country:e.permanentAddress.country,"onUpdate:country":c[22]||(c[22]=o=>e.permanentAddress.country=o),formErrors:t(l),"onUpdate:formErrors":c[23]||(c[23]=o=>ie(l)?l.value=o:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"]))])]),_:1})])])]),_:1},8,["form"])])):N("",!0)}}}),ft={key:0},gt={key:1},vt={class:"grid grid-cols-3 gap-6"},yt={class:"col-span-3 sm:col-span-1"},$t={class:"col-span-3 sm:col-span-1"},qt={class:"col-span-3 sm:col-span-1"},Ut={class:"col-span-3 sm:col-span-1"},Vt={class:"col-span-3 sm:col-span-1"},kt={class:"col-span-3 sm:col-span-1"},Dt={class:"col-span-2 sm:col-span-1"},Nt={class:"col-span-2 sm:col-span-1"},At={class:"col-span-3 sm:col-span-1"},It={class:"col-span-3 sm:col-span-1"},Bt={class:"col-span-3 sm:col-span-1"},Tt={key:1,class:"col-span-3"},Ft={class:"dark:text-gray-400"},Lt={class:"grid grid-cols-1"},Ct={class:"col"},ve="student/registrationQualification/",wt={__name:"QualificationForm",props:{registration:{type:Object,required:!0},visibility:{type:Boolean,required:!0},qualification:{type:Object,default:()=>({})}},emits:["close","completed"],setup(m,{emit:z}){x();const C=Q();K();const S=z,p=m,b={level:"",course:"",session:"",institute:"",instituteAddress:"",affiliatedTo:"",startDate:"",endDate:"",result:"",totalMarks:"",obtainedMarks:"",failedSubjects:"",media:[],mediaUpdated:!1,mediaToken:de(),mediaHash:[]},l=Z(ve),e=P({levels:[],results:[]});P({});const d=P({...b}),g=P({level:"",isLoaded:!C.params.uuid}),c=o=>{Object.assign(e,o)},I=()=>{d.mediaToken=de(),d.mediaHash=[]},R=()=>{S("close")},T=()=>{S("completed")},A=()=>{R(),T()},D=o=>{var r,O,B,L,j;Object.assign(b,{...o,level:(r=o.level)==null?void 0:r.uuid,startDate:((O=o.startDate)==null?void 0:O.value)||"",endDate:((B=o.endDate)==null?void 0:B.value)||"",result:((L=o.result)==null?void 0:L.value)||""}),Object.assign(d,h(b)),g.level=(j=o.level)==null?void 0:j.name,g.isLoaded=!0};return J(async()=>{D(p.qualification)}),(o,r)=>{const O=y("BaseSelect"),B=y("BaseInput"),L=y("AutoSuggest"),j=y("DatePicker"),w=y("HelperText"),i=y("MediaUpload"),E=y("FormAction"),k=y("BaseModal");return v(),F(k,{show:m.visibility,onClose:R},{title:u(()=>[m.qualification.uuid?(v(),M("span",ft,$(o.$trans("global.edit",{attribute:o.$trans("student.qualification.qualification")})),1)):(v(),M("span",gt,$(o.$trans("global.add",{attribute:o.$trans("student.qualification.qualification")})),1))]),default:u(()=>[n(E,{"no-card":"","no-data-fetch":"","pre-requisites":!0,onSetPreRequisites:c,"init-url":ve,uuid:t(C).params.uuid,"module-uuid":m.qualification.uuid,action:m.qualification.uuid?"update":"create","init-form":b,form:d,"keep-adding":!1,"after-submit":A,onResetMediaFiles:I},{default:u(()=>[f("div",vt,[f("div",yt,[g.isLoaded?(v(),F(O,{key:0,modelValue:d.level,"onUpdate:modelValue":r[0]||(r[0]=q=>d.level=q),name:"level",label:o.$trans("student.qualification_level.qualification_level"),"label-prop":"name","value-prop":"uuid",options:e.levels,error:t(l).level,"onUpdate:error":r[1]||(r[1]=q=>t(l).level=q)},null,8,["modelValue","label","options","error"])):N("",!0)]),f("div",$t,[n(B,{type:"text",modelValue:d.course,"onUpdate:modelValue":r[2]||(r[2]=q=>d.course=q),name:"course",label:o.$trans("student.qualification.props.course"),error:t(l).course,"onUpdate:error":r[3]||(r[3]=q=>t(l).course=q),autofocus:""},null,8,["modelValue","label","error"])]),f("div",qt,[n(B,{type:"text",modelValue:d.session,"onUpdate:modelValue":r[4]||(r[4]=q=>d.session=q),name:"session",label:o.$trans("student.qualification.props.session"),error:t(l).session,"onUpdate:error":r[5]||(r[5]=q=>t(l).session=q)},null,8,["modelValue","label","error"])]),f("div",Ut,[n(L,{type:"text",url:"/app/suggestions/institutes",modelValue:d.institute,"onUpdate:modelValue":r[6]||(r[6]=q=>d.institute=q),name:"institute",label:o.$trans("student.qualification.props.institute"),error:t(l).institute,"onUpdate:error":r[7]||(r[7]=q=>t(l).institute=q)},null,8,["modelValue","label","error"])]),f("div",Vt,[n(B,{type:"text",modelValue:d.instituteAddress,"onUpdate:modelValue":r[8]||(r[8]=q=>d.instituteAddress=q),name:"instituteAddress",label:o.$trans("student.qualification.props.institute_address"),error:t(l).instituteAddress,"onUpdate:error":r[9]||(r[9]=q=>t(l).instituteAddress=q)},null,8,["modelValue","label","error"])]),f("div",kt,[n(L,{type:"text",url:"/app/suggestions/affiliation-bodies",modelValue:d.affiliatedTo,"onUpdate:modelValue":r[10]||(r[10]=q=>d.affiliatedTo=q),name:"affiliatedTo",label:o.$trans("student.qualification.props.affiliated_to"),error:t(l).affiliatedTo,"onUpdate:error":r[11]||(r[11]=q=>t(l).affiliatedTo=q)},null,8,["modelValue","label","error"])]),f("div",Dt,[n(j,{modelValue:d.startDate,"onUpdate:modelValue":r[12]||(r[12]=q=>d.startDate=q),name:"startDate",label:o.$trans("student.qualification.props.start_date"),error:t(l).startDate,"onUpdate:error":r[13]||(r[13]=q=>t(l).startDate=q)},null,8,["modelValue","label","error"])]),f("div",Nt,[n(j,{modelValue:d.endDate,"onUpdate:modelValue":r[14]||(r[14]=q=>d.endDate=q),name:"endDate",label:o.$trans("student.qualification.props.end_date"),error:t(l).endDate,"onUpdate:error":r[15]||(r[15]=q=>t(l).endDate=q)},null,8,["modelValue","label","error"])]),f("div",At,[g.isLoaded?(v(),F(O,{key:0,modelValue:d.result,"onUpdate:modelValue":r[16]||(r[16]=q=>d.result=q),name:"result",label:o.$trans("student.qualification.props.result"),options:e.results,error:t(l).result,"onUpdate:error":r[17]||(r[17]=q=>t(l).result=q)},null,8,["modelValue","label","options","error"])):N("",!0)]),d.result=="pass"?(v(),M(Y,{key:0},[f("div",It,[n(B,{type:"number",step:".01",modelValue:d.totalMarks,"onUpdate:modelValue":r[18]||(r[18]=q=>d.totalMarks=q),name:"totalMarks",label:o.$trans("student.qualification.props.total_marks"),error:t(l).totalMarks,"onUpdate:error":r[19]||(r[19]=q=>t(l).totalMarks=q)},null,8,["modelValue","label","error"])]),f("div",Bt,[n(B,{type:"number",step:".01",modelValue:d.obtainedMarks,"onUpdate:modelValue":r[20]||(r[20]=q=>d.obtainedMarks=q),name:"obtainedMarks",label:o.$trans("student.qualification.props.obtained_marks"),error:t(l).obtainedMarks,"onUpdate:error":r[21]||(r[21]=q=>t(l).obtainedMarks=q)},null,8,["modelValue","label","error"])])],64)):N("",!0),d.result=="reappear"?(v(),M("div",Tt,[n(B,{type:"text",modelValue:d.failedSubjects,"onUpdate:modelValue":r[22]||(r[22]=q=>d.failedSubjects=q),name:"failedSubjects",label:o.$trans("student.qualification.props.failed_subjects"),error:t(l).failedSubjects,"onUpdate:error":r[23]||(r[23]=q=>t(l).failedSubjects=q)},null,8,["modelValue","label","error"]),n(w,null,{default:u(()=>[f("span",Ft,$(o.$trans("student.qualification.props.failed_subject_info")),1)]),_:1})])):N("",!0)]),f("div",Lt,[f("div",Ct,[n(i,{multiple:"",label:o.$trans("general.file"),module:"qualification",media:d.media,"media-token":d.mediaToken,onIsUpdated:r[24]||(r[24]=q=>d.mediaUpdated=!0),onSetHash:r[25]||(r[25]=q=>d.mediaHash.push(q))},null,8,["label","media","media-token"])])])]),_:1},8,["uuid","module-uuid","action","form"])]),_:1},8,["show"])}}},St={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Mt={__name:"QualificationDetail",props:{registration:{type:Object,required:!0},visibility:{type:Boolean,required:!0},qualification:{type:Object,default:()=>({})}},emits:["close","completed"],setup(m,{emit:z}){const C=z,S=()=>{C("close")};return(p,b)=>{const l=y("TextMuted"),e=y("BaseDataView"),d=y("ListMedia"),g=y("BaseModal");return v(),F(g,{show:m.visibility,onClose:S},{title:u(()=>[U($(p.$trans("global.detail",{attribute:p.$trans("student.qualification.qualification")})),1)]),default:u(()=>{var c,I;return[f("dl",St,[n(e,{label:p.$trans("student.qualification.props.course")},{default:u(()=>[U($(m.qualification.course)+" ",1),n(l,{block:""},{default:u(()=>[U($(m.qualification.session),1)]),_:1})]),_:1},8,["label"]),n(e,{label:p.$trans("student.qualification.props.institute")},{default:u(()=>[U($(m.qualification.institute),1)]),_:1},8,["label"]),n(e,{label:p.$trans("student.qualification.props.institute_address")},{default:u(()=>[U($(m.qualification.instituteAddress),1)]),_:1},8,["label"]),n(e,{label:p.$trans("student.qualification.props.affiliated_to")},{default:u(()=>[U($(m.qualification.affiliatedTo),1)]),_:1},8,["label"]),n(e,{label:p.$trans("student.qualification.props.result")},{default:u(()=>{var R,T;return[U($(((R=m.qualification.result)==null?void 0:R.label)||m.qualification.result)+" ",1),m.qualification.percentage&&((T=m.qualification.result)==null?void 0:T.value)=="pass"?(v(),F(l,{key:0,block:""},{default:u(()=>[U($(m.qualification.percentage)+"% ",1)]),_:1})):N("",!0)]}),_:1},8,["label"]),((c=m.qualification.result)==null?void 0:c.value)=="pass"?(v(),F(e,{key:0,label:p.$trans("student.qualification.props.marks")},{default:u(()=>[U($(m.qualification.obtainedMarks)+" / "+$(m.qualification.totalMarks),1)]),_:1},8,["label"])):N("",!0),((I=m.qualification.result)==null?void 0:I.value)=="reappear"?(v(),F(e,{key:1,label:p.$trans("student.qualification.props.failed_subjects")},{default:u(()=>[U($(m.qualification.failedSubjects),1)]),_:1},8,["label"])):N("",!0),n(e,{label:p.$trans("student.qualification.props.start_date")},{default:u(()=>[U($(m.qualification.startDate.formatted),1)]),_:1},8,["label"]),n(e,{label:p.$trans("student.qualification.props.end_date")},{default:u(()=>[U($(m.qualification.endDate.formatted),1)]),_:1},8,["label"]),n(e,{class:"col-span-1 sm:col-span-2"},{default:u(()=>[n(d,{"show-preview":!1,media:m.qualification.media,url:`/app/student/registrations/${m.registration.uuid}/qualifications/${m.qualification.uuid}/`},null,8,["media","url"])]),_:1}),n(e,{label:p.$trans("general.created_at")},{default:u(()=>[U($(m.qualification.createdAt.formatted),1)]),_:1},8,["label"]),n(e,{label:p.$trans("general.updated_at")},{default:u(()=>[U($(m.qualification.updatedAt.formatted),1)]),_:1},8,["label"])])]}),_:1},8,["show"])}}},Rt={key:0},jt={class:"mt-2 pb-4 px-2 flex justify-end"},Ot={__name:"QualificationList",props:{registration:{type:Object,required:!0}},emits:["completed"],setup(m,{emit:z}){const C=x(),S=Q();K();const p=ue("$trans"),b=[{key:"course",label:p("student.qualification.props.course"),visibility:!0},{key:"institute",label:p("student.qualification.props.institute"),visibility:!0},{key:"level",label:p("student.qualification_level.qualification_level"),visibility:!0},{key:"startDate",label:p("student.qualification.props.start_date"),visibility:!0},{key:"endDate",label:p("student.qualification.props.end_date"),visibility:!0},{key:"result",label:p("student.qualification.props.result"),visibility:!0},{key:"action",label:"",visibility:!0}],l=X(!1),e=X(!1),d=X(!1),g=P({qualifications:[],selectedQualification:{}}),c=()=>{I()},I=async()=>{l.value=!0,await C.dispatch("student/registration/showQualifications",{uuid:S.params.uuid}).then(D=>{g.qualifications=D,l.value=!1}).catch(D=>{l.value=!1})},R=D=>{g.selectedQualification=D,d.value=!0},T=D=>{g.selectedQualification=D,e.value=!0},A=async D=>{await pe()&&(l.value=!0,await C.dispatch("student/registrationQualification/delete",{uuid:S.params.uuid,moduleUuid:D.uuid}).then(()=>{l.value=!1,I()}).catch(o=>{l.value=!1}))};return J(async()=>{await I()}),(D,o)=>{const r=y("BaseAlert"),O=y("TextMuted"),B=y("DataCell"),L=y("FloatingMenuItem"),j=y("FloatingMenu"),w=y("DataRow"),i=y("SimpleTable"),E=y("BaseButton");return v(),M(Y,null,[m.registration.uuid?(v(),M("div",Rt,[g.qualifications.length?N("",!0):(v(),F(r,{key:0,design:"info",size:"xs"},{default:u(()=>[U($(t(p)("general.errors.record_not_found")),1)]),_:1})),g.qualifications.length?(v(),F(i,{key:1,header:b},{default:u(()=>[(v(!0),M(Y,null,me(g.qualifications,k=>(v(),F(w,{key:k.uuid},{default:u(()=>[n(B,{name:"course"},{default:u(()=>[U($(k.course)+" ",1),n(O,{block:""},{default:u(()=>[U($(k.session),1)]),_:2},1024)]),_:2},1024),n(B,{name:"institute"},{default:u(()=>[U($(k.institute),1)]),_:2},1024),n(B,{name:"level"},{default:u(()=>[U($(k.level.name),1)]),_:2},1024),n(B,{name:"startDate"},{default:u(()=>[U($(k.startDate.formatted),1)]),_:2},1024),n(B,{name:"endDate"},{default:u(()=>[U($(k.endDate.formatted),1)]),_:2},1024),n(B,{name:"result"},{default:u(()=>{var q,te;return[U($(((q=k.result)==null?void 0:q.label)||k.result)+" ",1),k.percentage&&((te=k.result)==null?void 0:te.value)=="pass"?(v(),F(O,{key:0,block:""},{default:u(()=>[U($(k.percentage)+"% ",1)]),_:2},1024)):N("",!0)]}),_:2},1024),n(B,{name:"action"},{default:u(()=>[n(j,null,{default:u(()=>[n(L,{icon:"fas fa-arrow-circle-right",onClick:q=>R(k)},{default:u(()=>[U($(t(p)("general.show")),1)]),_:2},1032,["onClick"]),n(L,{icon:"fas fa-edit",onClick:q=>T(k)},{default:u(()=>[U($(t(p)("general.edit")),1)]),_:2},1032,["onClick"]),n(L,{icon:"fas fa-trash",onClick:q=>A(k)},{default:u(()=>[U($(t(p)("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):N("",!0),f("div",jt,[n(E,{design:"primary",onClick:o[0]||(o[0]=k=>e.value=!0)},{default:u(()=>[U($(t(p)("global.add",{attribute:t(p)("student.qualification.qualification")})),1)]),_:1})])])):N("",!0),d.value?(v(),F(Mt,{key:1,visibility:d.value,registration:m.registration,qualification:g.selectedQualification,onClose:o[1]||(o[1]=k=>d.value=!1),onCompleted:c},null,8,["visibility","registration","qualification"])):N("",!0),e.value?(v(),F(wt,{key:2,visibility:e.value,registration:m.registration,qualification:g.selectedQualification,onClose:o[2]||(o[2]=k=>e.value=!1),onCompleted:c},null,8,["visibility","registration","qualification"])):N("",!0)],64)}}},Et={key:0},Pt={key:1},zt={class:"grid grid-cols-3 gap-6"},_t={class:"col-span-3 sm:col-span-1"},Gt={class:"col-span-3 sm:col-span-1"},Ht={class:"col-span-3 sm:col-span-1"},Qt={class:"col-span-3 sm:col-span-1"},Jt={class:"col-span-3"},Kt={class:"grid grid-cols-1"},Wt={class:"col"},ye="student/registrationDocument/",Xt={__name:"DocumentForm",props:{registration:{type:Object,required:!0},visibility:{type:Boolean,required:!0},document:{type:Object,default:()=>({})}},emits:["close","completed"],setup(m,{emit:z}){x();const C=Q();K();const S=z,p=m,b={type:"",title:"",startDate:"",endDate:"",description:"",media:[],mediaUpdated:!1,mediaToken:de(),mediaHash:[]},l=Z(ye),e=P({types:[]});P({});const d=P({...b}),g=P({level:"",isLoaded:!C.params.uuid}),c=o=>{Object.assign(e,o)},I=()=>{d.mediaToken=de(),d.mediaHash=[]},R=()=>{S("close")},T=()=>{S("completed")},A=()=>{R(),T()},D=o=>{var r,O,B,L;Object.assign(b,{...o,type:(r=o.type)==null?void 0:r.uuid,startDate:((O=o.startDate)==null?void 0:O.value)||"",endDate:((B=o.endDate)==null?void 0:B.value)||""}),Object.assign(d,h(b)),g.type=(L=o.type)==null?void 0:L.name,g.isLoaded=!0};return J(async()=>{D(p.document)}),(o,r)=>{const O=y("BaseSelect"),B=y("BaseInput"),L=y("DatePicker"),j=y("BaseTextarea"),w=y("MediaUpload"),i=y("FormAction"),E=y("BaseModal");return v(),F(E,{show:m.visibility,onClose:R},{title:u(()=>[m.document.uuid?(v(),M("span",Et,$(o.$trans("global.edit",{attribute:o.$trans("student.document.document")})),1)):(v(),M("span",Pt,$(o.$trans("global.add",{attribute:o.$trans("student.document.document")})),1))]),default:u(()=>[n(i,{"no-card":"","no-data-fetch":"","pre-requisites":!0,onSetPreRequisites:c,"init-url":ye,uuid:t(C).params.uuid,"module-uuid":m.document.uuid,action:m.document.uuid?"update":"create","init-form":b,form:d,"keep-adding":!1,"after-submit":A,onResetMediaFiles:I},{default:u(()=>[f("div",zt,[f("div",_t,[g.isLoaded?(v(),F(O,{key:0,modelValue:d.type,"onUpdate:modelValue":r[0]||(r[0]=k=>d.type=k),name:"type",label:o.$trans("student.document_type.document_type"),"label-prop":"name","value-prop":"uuid",options:e.types,error:t(l).type,"onUpdate:error":r[1]||(r[1]=k=>t(l).type=k)},null,8,["modelValue","label","options","error"])):N("",!0)]),f("div",Gt,[n(B,{type:"text",modelValue:d.title,"onUpdate:modelValue":r[2]||(r[2]=k=>d.title=k),name:"title",label:o.$trans("student.document.props.title"),error:t(l).title,"onUpdate:error":r[3]||(r[3]=k=>t(l).title=k),autofocus:""},null,8,["modelValue","label","error"])]),f("div",Ht,[n(L,{modelValue:d.startDate,"onUpdate:modelValue":r[4]||(r[4]=k=>d.startDate=k),name:"startDate",label:o.$trans("student.document.props.start_date"),error:t(l).startDate,"onUpdate:error":r[5]||(r[5]=k=>t(l).startDate=k)},null,8,["modelValue","label","error"])]),f("div",Qt,[n(L,{modelValue:d.endDate,"onUpdate:modelValue":r[6]||(r[6]=k=>d.endDate=k),name:"endDate",label:o.$trans("student.document.props.end_date"),error:t(l).endDate,"onUpdate:error":r[7]||(r[7]=k=>t(l).endDate=k)},null,8,["modelValue","label","error"])]),f("div",Jt,[n(j,{modelValue:d.description,"onUpdate:modelValue":r[8]||(r[8]=k=>d.description=k),name:"description",label:o.$trans("student.document.props.description"),error:t(l).description,"onUpdate:error":r[9]||(r[9]=k=>t(l).description=k)},null,8,["modelValue","label","error"])])]),f("div",Kt,[f("div",Wt,[n(w,{multiple:"",label:o.$trans("general.file"),module:"document",media:d.media,"media-token":d.mediaToken,onIsUpdated:r[10]||(r[10]=k=>d.mediaUpdated=!0),onSetHash:r[11]||(r[11]=k=>d.mediaHash.push(k))},null,8,["label","media","media-token"])])])]),_:1},8,["uuid","module-uuid","action","form"])]),_:1},8,["show"])}}},Yt={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Zt={__name:"DocumentDetail",props:{registration:{type:Object,required:!0},visibility:{type:Boolean,required:!0},document:{type:Object,default:()=>({})}},emits:["close","completed"],setup(m,{emit:z}){const C=z,S=()=>{C("close")};return(p,b)=>{const l=y("BaseDataView"),e=y("ListMedia"),d=y("BaseModal");return v(),F(d,{show:m.visibility,onClose:S},{title:u(()=>[U($(p.$trans("global.detail",{attribute:p.$trans("student.document.document")})),1)]),default:u(()=>[f("dl",Yt,[n(l,{label:p.$trans("student.document.props.title")},{default:u(()=>[U($(m.document.title),1)]),_:1},8,["label"]),n(l,{label:p.$trans("student.document.props.start_date")},{default:u(()=>[U($(m.document.startDate.formatted),1)]),_:1},8,["label"]),n(l,{label:p.$trans("student.document.props.end_date")},{default:u(()=>[U($(m.document.endDate.formatted),1)]),_:1},8,["label"]),n(l,{class:"col-span-1 sm:col-span-2",label:p.$trans("student.document.props.description")},{default:u(()=>[U($(m.document.description),1)]),_:1},8,["label"]),n(l,{class:"col-span-1 sm:col-span-2"},{default:u(()=>[n(e,{"show-preview":!1,media:m.document.media,url:`/app/student/registrations/${m.registration.uuid}/documents/${m.document.uuid}/`},null,8,["media","url"])]),_:1}),n(l,{label:p.$trans("general.created_at")},{default:u(()=>[U($(m.document.createdAt.formatted),1)]),_:1},8,["label"]),n(l,{label:p.$trans("general.updated_at")},{default:u(()=>[U($(m.document.updatedAt.formatted),1)]),_:1},8,["label"])])]),_:1},8,["show"])}}},ht={key:0},xt={class:"mt-2 pb-4 px-2 flex justify-end"},ea={__name:"DocumentList",props:{registration:{type:Object,required:!0}},emits:["completed"],setup(m,{emit:z}){const C=x(),S=Q();K();const p=ue("$trans"),b=[{key:"title",label:p("student.document.props.title"),visibility:!0},{key:"type",label:p("student.document_type.document_type"),visibility:!0},{key:"startDate",label:p("student.document.props.start_date"),visibility:!0},{key:"endDate",label:p("student.document.props.end_date"),visibility:!0},{key:"action",label:"",visibility:!0}],l=X(!1),e=X(!1),d=X(!1),g=P({documents:[],selectedDocument:{}}),c=()=>{I()},I=async()=>{l.value=!0,await C.dispatch("student/registration/showDocuments",{uuid:S.params.uuid}).then(D=>{g.documents=D,l.value=!1}).catch(D=>{l.value=!1})},R=D=>{g.selectedDocument=D,d.value=!0},T=D=>{g.selectedDocument=D,e.value=!0},A=async D=>{await pe()&&(l.value=!0,await C.dispatch("student/registrationDocument/delete",{uuid:S.params.uuid,moduleUuid:D.uuid}).then(()=>{l.value=!1,I()}).catch(o=>{l.value=!1}))};return J(async()=>{await I()}),(D,o)=>{const r=y("BaseAlert"),O=y("DataCell"),B=y("FloatingMenuItem"),L=y("FloatingMenu"),j=y("DataRow"),w=y("SimpleTable"),i=y("BaseButton");return v(),M(Y,null,[m.registration.uuid?(v(),M("div",ht,[g.documents.length?N("",!0):(v(),F(r,{key:0,design:"info",size:"xs"},{default:u(()=>[U($(t(p)("general.errors.record_not_found")),1)]),_:1})),g.documents.length?(v(),F(w,{key:1,header:b},{default:u(()=>[(v(!0),M(Y,null,me(g.documents,E=>(v(),F(j,{key:E.uuid},{default:u(()=>[n(O,{name:"title"},{default:u(()=>[U($(E.title),1)]),_:2},1024),n(O,{name:"type"},{default:u(()=>[U($(E.type.name),1)]),_:2},1024),n(O,{name:"startDate"},{default:u(()=>[U($(E.startDate.formatted),1)]),_:2},1024),n(O,{name:"endDate"},{default:u(()=>[U($(E.endDate.formatted),1)]),_:2},1024),n(O,{name:"action"},{default:u(()=>[n(L,null,{default:u(()=>[n(B,{icon:"fas fa-arrow-circle-right",onClick:k=>R(E)},{default:u(()=>[U($(t(p)("general.show")),1)]),_:2},1032,["onClick"]),n(B,{icon:"fas fa-edit",onClick:k=>T(E)},{default:u(()=>[U($(t(p)("general.edit")),1)]),_:2},1032,["onClick"]),n(B,{icon:"fas fa-trash",onClick:k=>A(E)},{default:u(()=>[U($(t(p)("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):N("",!0),f("div",xt,[n(i,{design:"primary",onClick:o[0]||(o[0]=E=>e.value=!0)},{default:u(()=>[U($(t(p)("global.add",{attribute:t(p)("student.document.document")})),1)]),_:1})])])):N("",!0),d.value?(v(),F(Zt,{key:1,visibility:d.value,registration:m.registration,document:g.selectedDocument,onClose:o[1]||(o[1]=E=>d.value=!1),onCompleted:c},null,8,["visibility","registration","document"])):N("",!0),e.value?(v(),F(Xt,{key:2,visibility:e.value,registration:m.registration,document:g.selectedDocument,onClose:o[2]||(o[2]=E=>e.value=!1),onCompleted:c},null,8,["visibility","registration","document"])):N("",!0)],64)}}},ta={key:0,class:"pb-4 px-2"},aa={class:"mt-4 grid grid-cols-4 gap-4"},oa={class:"col-span-4 sm:col-span-1"},sa=["onClick"],na={class:"col-span-4 sm:col-span-1"},ra={class:"col-span-4 sm:col-span-1"},la={class:"col-span-4 sm:col-span-1"},ia={class:"mt-2 flex justify-end"},$e="student/registration/",da={__name:"GuardianForm",props:{registration:{type:Object,required:!0},preRequisites:{type:Object,required:!0}},emits:["completed"],setup(m,{emit:z}){const C=x(),S=Q();K();const p=z,b=m,l={guardians:[],tab:"guardian"},e=Z($e);P({});const d=P({...l});P({isLoaded:!S.params.uuid});const g=()=>{d.guardians.push(I())},c=async T=>{await pe()&&d.guardians.splice(T,1)},I=()=>({guardianType:"new",guardian:"",name:"",relation:"",contactNumber:"",occupation:""}),R=()=>{p("completed")};return J(async()=>{await C.dispatch("student/registration/showGuardians",{uuid:b.registration.uuid}).then(T=>{T.forEach(A=>{l.guardians.push({guardianType:"existing",guardian:A.uuid,name:A.contact.name,relation:A.relation.value,contactNumber:A.contact.contactNumber,occupation:A.contact.occupation})}),Object.assign(d,h(l))}).catch(T=>{}),d.guardians.length===0&&g()}),(T,A)=>{const D=y("BaseLabel"),o=y("BaseInput"),r=y("BaseSelect"),O=y("BaseButton"),B=y("FormAction");return m.registration.uuid?(v(),M("div",ta,[n(B,{"no-card":"","init-url":$e,"init-form":l,form:d,action:"updateDetail","validate-unchanged":!1,"after-submit":R},{default:u(()=>[(v(!0),M(Y,null,me(d.guardians,(L,j)=>(v(),M("div",null,[f("div",aa,[f("div",oa,[n(D,null,{default:u(()=>[U($(T.$trans("guardian.props.name"))+" ",1),f("span",{class:"text-danger cursor-pointer",onClick:w=>c(j)},A[1]||(A[1]=[f("i",{class:"fas fa-times-circle"},null,-1)]),8,sa)]),_:2},1024),n(o,{type:"text",modelValue:L.name,"onUpdate:modelValue":w=>L.name=w,name:"name",placeholder:T.$trans("guardian.props.name"),error:t(e)[`guardians.${j}.name`],"onUpdate:error":w=>t(e)[`guardians.${j}.name`]=w},null,8,["modelValue","onUpdate:modelValue","placeholder","error","onUpdate:error"])]),f("div",na,[n(o,{type:"text",modelValue:L.contactNumber,"onUpdate:modelValue":w=>L.contactNumber=w,name:"contactNumber",label:T.$trans("contact.props.contact_number"),error:t(e)[`guardians.${j}.contactNumber`],"onUpdate:error":w=>t(e)[`guardians.${j}.contactNumber`]=w},null,8,["modelValue","onUpdate:modelValue","label","error","onUpdate:error"])]),f("div",ra,[n(r,{modelValue:L.relation,"onUpdate:modelValue":w=>L.relation=w,name:`guardians.${j}.relation`,label:T.$trans("contact.props.relation"),options:m.preRequisites.relations,"label-prop":"label","value-prop":"value",error:t(e)[`guardians.${j}.relation`],"onUpdate:error":w=>t(e)[`guardians.${j}.relation`]=w},null,8,["modelValue","onUpdate:modelValue","name","label","options","error","onUpdate:error"])]),f("div",la,[n(o,{type:"text",modelValue:L.occupation,"onUpdate:modelValue":w=>L.occupation=w,name:"occupation",label:T.$trans("contact.props.occupation"),error:t(e)[`guardians.${j}.occupation`],"onUpdate:error":w=>t(e)[`guardians.${j}.occupation`]=w},null,8,["modelValue","onUpdate:modelValue","label","error","onUpdate:error"])])])]))),256)),f("div",ia,[n(O,{design:"primary",onClick:A[0]||(A[0]=L=>g())},{default:u(()=>[U($(T.$trans("global.add",{attribute:T.$trans("guardian.guardian")})),1)]),_:1})])]),_:1},8,["form"])])):N("",!0)}}},ua={class:"py-4 grid grid-cols-1"},ma={class:"col-span-1"},pa={name:"StudentRegistrationAvatarForm"},ca=Object.assign(pa,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(m,{emit:z}){const C=z,S=m,p=Q(),b={photo:""};Z("students/registration/");const e=P({...b});P({});const d=P({isLoaded:!p.params.uuid}),g=I=>{C("completed");let R=S.registration;e.photo=R==null?void 0:R.photo},c=()=>{C("completed");let I=S.registration;e.photo=I==null?void 0:I.photo};return J(()=>{let I=S.registration.contact;Object.assign(b,{photo:I.photo}),Object.assign(e,h(b)),d.isLoaded=!0}),Ve(()=>S.enquiry,I=>{I&&(e.photo=I.photo)},{deep:!0}),(I,R)=>{const T=y("ImageUpload");return v(),M("div",ua,[f("div",ma,[n(T,{label:I.$trans("contact.props.photo"),src:e.photo,"upload-path":`student/registrations/${m.registration.uuid}/photo`,"remove-path":`student/registrations/${m.registration.uuid}/photo`,onUploaded:g,onRemoved:c},null,8,["label","src","upload-path","remove-path"])])])}}}),ba={class:"border-t border-gray-200 dark:border-gray-800"},fa={class:"mt-8 px-4"},qe="student/registration/",ya={__name:"Wizard",setup(m){const z=x(),C=Q(),S=K(),p=X(null);P({periods:[],localities:[],genders:[],bloodGroups:[],religions:[],categories:[],castes:[],maritalStatuses:[],customFields:[]});const b=P({registration:{},activeTab:C.query.tab||"basic"}),l=async()=>{p.value=!0,await z.dispatch(qe+"preRequisite",{uuid:C.params.uuid}).then(A=>{b.preRequisites=A,p.value=!1}).catch(A=>{p.value=!1,S.push({name:"StudentRegistration"})})},e=async()=>{p.value=!0,await z.dispatch(qe+"get",{uuid:C.params.uuid}).then(A=>{b.registration=A,p.value=!1}).catch(A=>{p.value=!1,S.push({name:"StudentRegistration"})})},d=()=>{b.activeTab="avatar",e()},g=()=>{b.activeTab="contact",e()},c=()=>{b.activeTab="guardian",e()},I=()=>{b.activeTab="qualification",e()},R=()=>{b.activeTab="document",e()},T=()=>{e()};return J(async()=>{await l(),await e()}),(A,D)=>{const o=y("BaseButton"),r=y("PageHeaderAction"),O=y("PageHeader"),B=y("TabItem"),L=y("TabGroup"),j=y("BaseCard"),w=y("ParentTransition");return v(),M(Y,null,[n(O,{title:A.$trans(t(C).meta.trans,{attribute:A.$trans(t(C).meta.label)}),navs:[{label:A.$trans("student.student"),path:"Student"},{label:A.$trans("student.registration.registration"),path:"StudentRegistrationList"}]},{default:u(()=>[n(r,{name:"StudentRegistration",title:A.$trans("student.registration.registration"),actions:["list"]},{default:u(()=>[n(o,{design:"white",onClick:D[0]||(D[0]=i=>t(S).push({name:"StudentRegistrationShow",params:{uuid:t(C).params.uuid}}))},{default:u(()=>[U($(A.$trans("global.show",{attribute:A.$trans("student.registration.registration")})),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["title","navs"]),n(w,{appear:"",visibility:!0},{default:u(()=>[b.registration.uuid?(v(),F(j,{key:0,"no-padding":"","no-content-padding":"","is-loading":p.value},{title:u(()=>[U($(b.registration.codeNumber)+" - "+$(b.registration.contact.name),1)]),default:u(()=>[f("div",ba,[n(L,null,{default:u(()=>[n(B,{first:"",label:A.$trans("student.registration.wizard.first_step"),onClick:D[1]||(D[1]=i=>b.activeTab="basic"),"is-active":b.activeTab=="basic"},null,8,["label","is-active"]),n(B,{label:A.$trans("student.registration.wizard.second_step"),onClick:D[2]||(D[2]=i=>b.activeTab="avatar"),"is-active":b.activeTab=="avatar"},null,8,["label","is-active"]),n(B,{label:A.$trans("student.registration.wizard.third_step"),onClick:D[3]||(D[3]=i=>b.activeTab="contact"),"is-active":b.activeTab=="contact"},null,8,["label","is-active"]),n(B,{label:A.$trans("student.registration.wizard.fourth_step"),onClick:D[4]||(D[4]=i=>b.activeTab="guardian"),"is-active":b.activeTab=="guardian"},null,8,["label","is-active"]),n(B,{label:A.$trans("student.registration.wizard.fifth_step"),onClick:D[5]||(D[5]=i=>b.activeTab="qualification"),"is-active":b.activeTab=="qualification"},null,8,["label","is-active"]),n(B,{last:"",label:A.$trans("student.registration.wizard.sixth_step"),onClick:D[6]||(D[6]=i=>b.activeTab="document"),"is-active":b.activeTab=="document"},null,8,["label","is-active"])]),_:1}),f("div",fa,[b.activeTab=="basic"&&b.registration?(v(),F(et,{key:0,registration:b.registration,"pre-requisites":b.preRequisites,onCompleted:d},null,8,["registration","pre-requisites"])):N("",!0),b.activeTab=="avatar"&&b.registration?(v(),F(ca,{key:1,registration:b.registration,onCompleted:g},null,8,["registration"])):N("",!0),b.activeTab=="contact"&&b.registration?(v(),F(bt,{key:2,registration:b.registration,onCompleted:c},null,8,["registration"])):N("",!0),b.activeTab=="guardian"&&b.registration?(v(),F(da,{key:3,registration:b.registration,onCompleted:I,"pre-requisites":b.preRequisites},null,8,["registration","pre-requisites"])):N("",!0),b.activeTab=="qualification"&&b.registration?(v(),F(Ot,{key:4,registration:b.registration,onCompleted:R},null,8,["registration"])):N("",!0),b.activeTab=="document"&&b.registration?(v(),F(ea,{key:5,registration:b.registration,onCompleted:T},null,8,["registration"])):N("",!0)])])]),_:1},8,["is-loading"])):N("",!0)]),_:1})],64)}}};export{ya as default};
