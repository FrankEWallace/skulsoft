import{u as M,m as w,q,r as u,t as c,o as l,w as t,d as y,b as p,v as o,x as a,e as s,i as U,j as E,k as W,z as S,p as C,f as m,a as F,F as z,y as G}from"./app-Cvm44xuh.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},X={__name:"Filter",emits:["hide"],setup(L,{emit:v}){const b=M(),h=v,$={batches:[],startDate:"",endDate:""},f=w({...$}),_=w({batches:[],isLoaded:!b.query.batches});return q(async()=>{_.batches=b.query.batches?b.query.batches.split(","):[],_.isLoaded=!0}),(k,d)=>{const D=u("BaseSelectSearch"),i=u("DatePicker"),n=u("FilterForm");return l(),c(n,{"init-form":$,form:f,multiple:["batches"],onHide:d[3]||(d[3]=r=>h("hide"))},{default:t(()=>[y("div",J,[y("div",K,[_.isLoaded?(l(),c(D,{key:0,multiple:"",name:"batches",label:k.$trans("global.select",{attribute:k.$trans("academic.batch.batch")}),modelValue:f.batches,"onUpdate:modelValue":d[0]||(d[0]=r=>f.batches=r),"value-prop":"uuid","init-search":_.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:t(r=>[o(a(r.value.course.nameWithTerm)+" "+a(r.value.name),1)]),listOption:t(r=>[o(a(r.option.course.nameWithTerm)+" "+a(r.option.name),1)]),_:1},8,["label","modelValue","init-search"])):p("",!0)]),y("div",Q,[s(i,{start:f.startDate,"onUpdate:start":d[1]||(d[1]=r=>f.startDate=r),end:f.endDate,"onUpdate:end":d[2]||(d[2]=r=>f.endDate=r),name:"dateBetween",as:"range",label:k.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Y={key:1,class:"text-danger text-xs"},Z={key:0},x={name:"StudentTimesheetList"},te=Object.assign(x,{setup(L){M();const v=U();E();const b=W("emitter");let h=["filter"];S("student:manage-timesheet")&&h.unshift("create");let $=["print","pdf","excel"];const f="student/timesheet/";C(!1);const _=C(!1),k=C(!1),d=w({}),D=i=>{Object.assign(d,i)};return(i,n)=>{const r=u("BaseButton"),N=u("PageHeaderAction"),V=u("PageHeader"),A=u("ParentTransition"),g=u("DataCell"),H=u("BaseBadge"),T=u("TextMuted"),B=u("FloatingMenuItem"),O=u("FloatingMenu"),P=u("DataRow"),R=u("DataTable"),j=u("ListItem");return l(),c(j,{"init-url":f,onSetItems:D},{header:t(()=>[s(V,{title:i.$trans("student.timesheet.timesheet"),navs:[{label:i.$trans("student.student"),path:"Student"},{label:i.$trans("student.attendance.attendance"),path:"StudentAttendance"}]},{default:t(()=>[s(N,{url:"student/timesheets/",name:"StudentTimesheet",title:i.$trans("student.timesheet.timesheet"),actions:m(h),"dropdown-actions":m($),onToggleFilter:n[1]||(n[1]=e=>_.value=!_.value),onToggleImport:n[2]||(n[2]=e=>k.value=!k.value)},{default:t(()=>[m(S)("student:manage-timesheet")?(l(),c(r,{key:0,design:"primary",onClick:n[0]||(n[0]=e=>m(v).push({name:"StudentTimesheetBatch"}))},{default:t(()=>[o(a(i.$trans("student.timesheet.batch_wise")),1)]),_:1})):p("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[s(A,{appear:"",visibility:_.value},{default:t(()=>[s(X,{onRefresh:n[3]||(n[3]=e=>m(b).emit("listItems")),onHide:n[4]||(n[4]=e=>_.value=!1)})]),_:1},8,["visibility"])]),"after-filter":t(()=>n[7]||(n[7]=[])),default:t(()=>[s(A,{appear:"",visibility:!0},{default:t(()=>[s(R,{header:d.headers,meta:d.meta,module:"student.timesheet",onRefresh:n[6]||(n[6]=e=>m(b).emit("listItems"))},{actionButton:t(()=>[s(r,{onClick:n[5]||(n[5]=e=>m(v).push({name:"StudentTimesheetCreate"}))},{default:t(()=>[o(a(i.$trans("global.add",{attribute:i.$trans("student.timesheet.timesheet")})),1)]),_:1})]),default:t(()=>[(l(!0),F(z,null,G(d.data,e=>(l(),c(P,{key:e.uuid},{default:t(()=>[s(g,{name:"student"},{default:t(()=>[o(a(e.student.name)+" ("+a(e.student.codeNumber)+") ",1)]),_:2},1024),s(g,{name:"course"},{default:t(()=>[o(a(e.student.courseName+" "+e.student.batchName),1)]),_:2},1024),s(g,{name:"date"},{default:t(()=>[o(a(e.date.formatted)+" ",1),e.isManual?(l(),c(H,{key:0,type:"info"},{default:t(()=>[o(a(i.$trans("student.timesheet.props.manual")),1)]),_:1})):p("",!0),e.status&&e.status!="ok"?(l(),F("div",Y,a(e.status.label),1)):p("",!0),s(T,{block:""},{default:t(()=>[o(a(e.day),1)]),_:2},1024)]),_:2},1024),s(g,{name:"inAt"},{default:t(()=>[o(a(e.inAtTime.formatted)+" ",1),e.isOvernight?(l(),c(T,{key:0,block:""},{default:t(()=>[o(a(e.inAtDate.formatted),1)]),_:2},1024)):p("",!0)]),_:2},1024),s(g,{name:"outAt"},{default:t(()=>[o(a(e.outAtTime.formatted)+" ",1),e.isOvernight?(l(),c(T,{key:0,block:""},{default:t(()=>[o(a(e.outAtDate.formatted),1)]),_:2},1024)):p("",!0)]),_:2},1024),s(g,{name:"duration"},{default:t(()=>[o(a(e.duration)+" ",1),e.status=="ok"?(l(),F("span",Z,n[8]||(n[8]=[y("i",{class:"fas fa-check-circle text-success"},null,-1)]))):p("",!0)]),_:2},1024),s(g,{name:"action"},{default:t(()=>[m(S)("student:manage-timesheet")?(l(),c(O,{key:0},{default:t(()=>[e.isEditable?(l(),c(B,{key:0,icon:"fas fa-edit",onClick:I=>m(v).push({name:"StudentTimesheetEdit",params:{uuid:e.uuid}})},{default:t(()=>[o(a(i.$trans("general.edit")),1)]),_:2},1032,["onClick"])):p("",!0),s(B,{icon:"fas fa-copy",onClick:I=>m(v).push({name:"StudentTimesheetDuplicate",params:{uuid:e.uuid}})},{default:t(()=>[o(a(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),e.isDeletable?(l(),c(B,{key:1,icon:"fas fa-trash",onClick:I=>m(b).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[o(a(i.$trans("general.delete")),1)]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)):p("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{te as default};
