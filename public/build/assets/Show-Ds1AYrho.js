import{u as $,i as j,j as N,p as U,m as V,q as z,r,a as h,b as c,o as u,d as e,e as i,v as d,t as A,x as n,w as l,f as v,z as D,$ as E}from"./app-Cvm44xuh.js";import{_ as H,u as L}from"./ShowImages-BG8SVuPv.js";import"./index-Dfe-y4c7.js";const M={key:0,class:"max-w-3xl mx-auto px-4 py-8 text-sm"},P={class:"bg-white dark:bg-dark-header rounded-lg shadow-md"},S={class:"p-6 border-b border-gray-200 dark:border-gray-700"},R={class:"flex items-center justify-between"},q={class:"flex items-center gap-4"},I=["src"],O={class:"dark:text-gray-300"},F={class:"font-semibold text-base"},G={class:"text-xs text-gray-500"},J={class:"dark:text-gray-300"},K={class:"p-6"},Q=["innerHTML"],W={key:0,class:"mt-4 flex items-center justify-between"},X={class:"flex items-center gap-2"},Y="post/",oe={__name:"Show",setup(Z){const x=$(),m=j(),p=N(),o=U(!1),t=V({}),y=async()=>{o.value=!0,await p.dispatch(Y+"get",{uuid:x.params.uuid}).then(s=>{o.value=!1,Object.assign(t,s)}).catch(s=>{o.value=!1})},w=s=>L(new Date(s.replace(" ","T"))),B=async()=>{await E()&&(o.value=!0,await p.dispatch("post/delete",{uuid:t.uuid}).then(s=>{m.push({name:"PostIndex"})}).catch(s=>{console.error("Error loading posts:",s)}).finally(()=>{o.value=!1}))};return z(async()=>{await y()}),(s,a)=>{var _,f,g;const k=r("BaseBadge"),b=r("BaseButton"),C=r("BaseComment"),T=r("BaseCard");return t.uuid?(u(),h("div",M,[e("div",P,[e("div",S,[e("div",R,[e("div",q,[e("img",{src:(f=(_=t.user)==null?void 0:_.profile)==null?void 0:f.avatar,class:"w-12 h-12 rounded-full",alt:"User avatar"},null,8,I),e("div",O,[e("div",F,[d(n((g=t.author)==null?void 0:g.name)+" ",1),t.author.detail?(u(),A(k,{key:0,size:"sm"},{default:l(()=>[d(n(t.author.detail),1)]),_:1})):c("",!0)]),e("div",G,n(w(t.createdAt.at)),1)])]),e("div",J,[e("span",{class:"cursor-pointer",onClick:a[0]||(a[0]=ee=>v(m).push({name:"Home"}))},a[1]||(a[1]=[e("i",{class:"fas fa-arrow-left"},null,-1)]))])])]),e("div",K,[e("div",{class:"md-content text-gray-800 dark:text-gray-400",innerHTML:t.content},null,8,Q),i(H,{post:t,"show-all-images":""},null,8,["post"]),t.isEditable?(u(),h("div",W,[a[3]||(a[3]=e("div",null,null,-1)),e("div",X,[i(b,{design:"danger",size:"xs",onClick:B},{default:l(()=>[a[2]||(a[2]=e("i",{class:"fas fa-trash mr-1"},null,-1)),d(" "+n(s.$trans("general.delete")),1)]),_:1,__:[2]})])])):c("",!0)]),i(T,{class:"mt-4"},{title:l(()=>[d(n(s.$trans("comment.comment")),1)]),default:l(()=>[i(C,{type:"post",uuid:t.uuid,moduleType:"post",moduleUuid:t.uuid,comments:t.comments,"can-comment":v(D)("post:comment")},null,8,["uuid","moduleUuid","comments","can-comment"])]),_:1})])])):c("",!0)}}};export{oe as default};
