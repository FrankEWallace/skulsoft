import{u as V,i as B,I as C,m as T,r as l,t as v,o as g,w as _,d as p,b as F,e as r,f as i,J as P,K as q,a as E,F as R}from"./app-Cvm44xuh.js";const x={class:"grid grid-cols-4 gap-6"},I={class:"col-span-4"},O={class:"col-span-4 sm:col-span-2"},W={class:"col-span-4 sm:col-span-2"},k={class:"mt-4 grid grid-cols-1 gap-6"},H={class:"col-span-4"},L={name:"CommunicationWhatsAppForm"},N=Object.assign(L,{setup(U){const c=V();B();const a={subject:"",studentAudienceType:"",employeeAudienceType:"",studentAudiences:[],employeeAudiences:[],inclusion:"",exclusion:"",template:""},f="communication/whatsapp/",s=C(f),d=T({studentAudienceTypes:[],employeeAudienceTypes:[]}),n=T({...a}),A=T({studentAudiences:[],employeeAudiences:[],isLoaded:!c.params.uuid}),j=o=>{Object.assign(d,o)},$=o=>{var m,b;let e=o.audiences.filter(u=>u.type=="student").map(u=>u.uuid),y=o.audiences.filter(u=>u.type=="employee").map(u=>u.uuid);Object.assign(a,{...o,studentAudienceType:((m=o.studentAudienceType)==null?void 0:m.value)||"",employeeAudienceType:((b=o.employeeAudienceType)==null?void 0:b.value)||"",studentAudiences:e,employeeAudiences:y}),Object.assign(n,q(a)),A.studentAudiences=e,A.employeeAudiences=y,A.isLoaded=!0};return(o,e)=>{const y=l("BaseInput"),m=l("BaseTextarea"),b=l("AudienceInput"),u=l("BaseSelect"),w=l("FormAction");return g(),v(w,{"pre-requisites":!0,onSetPreRequisites:j,"init-url":f,"init-form":a,form:n,setForm:$,redirect:"CommunicationWhatsApp"},{default:_(()=>[p("div",x,[p("div",I,[r(y,{type:"text",modelValue:n.subject,"onUpdate:modelValue":e[0]||(e[0]=t=>n.subject=t),name:"subject",label:o.$trans("communication.whatsapp.props.subject"),error:i(s).subject,"onUpdate:error":e[1]||(e[1]=t=>i(s).subject=t),autofocus:""},null,8,["modelValue","label","error"])]),p("div",O,[r(m,{modelValue:n.inclusion,"onUpdate:modelValue":e[2]||(e[2]=t=>n.inclusion=t),name:"inclusion",label:o.$trans("communication.whatsapp.props.inclusion"),error:i(s).inclusion,"onUpdate:error":e[3]||(e[3]=t=>i(s).inclusion=t)},null,8,["modelValue","label","error"])]),p("div",W,[r(m,{modelValue:n.exclusion,"onUpdate:modelValue":e[4]||(e[4]=t=>n.exclusion=t),name:"exclusion",label:o.$trans("communication.whatsapp.props.exclusion"),error:i(s).exclusion,"onUpdate:error":e[5]||(e[5]=t=>i(s).exclusion=t)},null,8,["modelValue","label","error"])])]),A.isLoaded?(g(),v(b,{key:0,"pre-requisites":d,studentAudienceType:n.studentAudienceType,"onUpdate:studentAudienceType":e[6]||(e[6]=t=>n.studentAudienceType=t),employeeAudienceType:n.employeeAudienceType,"onUpdate:employeeAudienceType":e[7]||(e[7]=t=>n.employeeAudienceType=t),studentAudiences:n.studentAudiences,"onUpdate:studentAudiences":e[8]||(e[8]=t=>n.studentAudiences=t),employeeAudiences:n.employeeAudiences,"onUpdate:employeeAudiences":e[9]||(e[9]=t=>n.employeeAudiences=t),formErrors:i(s),"onUpdate:formErrors":e[10]||(e[10]=t=>P(s)?s.value=t:null)},null,8,["pre-requisites","studentAudienceType","employeeAudienceType","studentAudiences","employeeAudiences","formErrors"])):F("",!0),p("div",k,[p("div",H,[r(u,{modelValue:n.template,"onUpdate:modelValue":e[11]||(e[11]=t=>n.template=t),name:"template",label:o.$trans("config.template.template"),"label-prop":"name","value-prop":"uuid",error:i(s).template,"onUpdate:error":e[12]||(e[12]=t=>i(s).template=t),options:d.templates},null,8,["modelValue","label","error","options"])])])]),_:1},8,["form"])}}}),S={name:"CommunicationWhatsAppAction"},J=Object.assign(S,{setup(U){const c=V();return(a,f)=>{const s=l("PageHeaderAction"),d=l("PageHeader"),n=l("ParentTransition");return g(),E(R,null,[r(d,{title:a.$trans(i(c).meta.trans,{attribute:a.$trans(i(c).meta.label)}),navs:[{label:a.$trans("communication.communication"),path:"Communication"},{label:a.$trans("communication.whatsapp.whatsapp"),path:"CommunicationWhatsAppList"}]},{default:_(()=>[r(s,{name:"CommunicationWhatsApp",title:a.$trans("communication.whatsapp.whatsapp"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),r(n,{appear:"",visibility:!0},{default:_(()=>[r(N)]),_:1})],64)}}});export{J as default};
