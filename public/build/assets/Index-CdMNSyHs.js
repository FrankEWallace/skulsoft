import{u as W,i as w,j as V,m as j,q as E,r as s,t as _,o as u,w as e,d as D,e as t,v as i,x as l,k as z,p as A,a as F,f as M,F as R,y as G,b as k}from"./app-Cvm44xuh.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["refresh","hide"],setup(P,{emit:B}){const c=W(),y=w();V();const d=B,m={name:""},r=j({...m}),f=()=>{Object.assign(r,m),b(),d("hide")};E(async()=>{Object.assign(r,{search:c.query.search})});const b=async()=>{await y.push({name:c.name,query:{...c.query,...r}}),d("refresh")};return(p,g)=>{const n=s("BaseInput"),o=s("BaseButton"),I=s("BaseCard");return u(),_(I,null,{footer:e(()=>[t(o,{design:"error",class:"mr-4",onClick:f},{default:e(()=>[i(l(p.$trans("general.cancel")),1)]),_:1}),t(o,{onClick:b},{default:e(()=>[i(l(p.$trans("general.filter")),1)]),_:1})]),default:e(()=>[D("div",J,[D("div",K,[t(n,{type:"text",modelValue:r.name,"onUpdate:modelValue":g[0]||(g[0]=v=>r.name=v),name:"name",label:p.$trans("config.whatsapp.template.props.name")},null,8,["modelValue","label"])])])]),_:1})}}},X={key:0,class:"mb-4"},Y={name:"ConfigWhatsAppTemplateList"},x=Object.assign(Y,{setup(P){const B=w();V();const c=z("emitter"),y="config/whatsappTemplate/",d=A(!1),m=A(!1),r=j({}),f=j({selectedTemplate:null}),b=n=>{Object.assign(r,n)},p=n=>{f.selectedTemplate=n,m.value=!0},g=async n=>{c.emit("actionItem",{uuid:n.uuid,action:"toggleStatus",confirmation:!0})};return(n,o)=>{const I=s("PageHeaderAction"),v=s("ParentTransition"),T=s("BaseBadge"),$=s("DataCell"),q=s("TextMuted"),C=s("FloatingMenuItem"),L=s("FloatingMenu"),O=s("DataRow"),S=s("DataTable"),N=s("ListItem"),H=s("ConfigPage"),U=s("BaseModal");return u(),F(R,null,[t(H,{"no-background":""},{action:e(()=>[t(I,{name:"ConfigWhatsAppTemplate",title:n.$trans("config.whatsapp.template.template"),actions:["filter"],onToggleFilter:o[0]||(o[0]=a=>d.value=!d.value)},null,8,["title"])]),default:e(()=>[t(N,{class:"sm:-mt-4","init-url":y,onSetItems:b},{filter:e(()=>[t(v,{appear:"",visibility:d.value},{default:e(()=>[t(Q,{onRefresh:o[1]||(o[1]=a=>M(c).emit("listItems")),onHide:o[2]||(o[2]=a=>d.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(v,{appear:"",visibility:!0},{default:e(()=>[t(S,{header:r.headers,meta:r.meta,module:"config.whatsapp.template",onRefresh:o[3]||(o[3]=a=>M(c).emit("listItems"))},{actionButton:e(()=>o[5]||(o[5]=[])),default:e(()=>[(u(!0),F(R,null,G(r.data,a=>(u(),_(O,{key:a.uuid},{default:e(()=>[t($,{name:"name"},{default:e(()=>[i(l(a.name)+" ",1),a.enabledAt.value?k("",!0):(u(),_(T,{key:0,design:"danger"},{default:e(()=>[i(l(n.$trans("config.template.statuses.disabled")),1)]),_:1}))]),_:2},1024),t($,{name:"templateId"},{default:e(()=>[i(l(a.templateId||"-"),1)]),_:2},1024),t($,{name:"subject"},{default:e(()=>[i(l(a.subject)+" ",1),t(q,{block:""},{default:e(()=>[i(l(a.content),1)]),_:2},1024)]),_:2},1024),t($,{name:"action"},{default:e(()=>[t(L,null,{default:e(()=>[a.enabledAt.value?(u(),_(C,{key:0,icon:"far fa-times-circle",onClick:h=>g(a)},{default:e(()=>[i(l(n.$trans("global.disable",{attribute:n.$trans("config.template.template")})),1)]),_:2},1032,["onClick"])):k("",!0),a.enabledAt.value?k("",!0):(u(),_(C,{key:1,icon:"far fa-check-circle",onClick:h=>g(a)},{default:e(()=>[i(l(n.$trans("global.enable",{attribute:n.$trans("config.template.template")})),1)]),_:2},1032,["onClick"])),t(C,{icon:"fas fa-arrow-circle-right",onClick:h=>p(a)},{default:e(()=>[i(l(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(C,{icon:"fas fa-edit",onClick:h=>M(B).push({name:"ConfigWhatsAppTemplateEdit",params:{uuid:a.uuid}})},{default:e(()=>[i(l(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})]),_:1}),t(U,{show:m.value,onClose:o[4]||(o[4]=a=>m.value=!1)},{title:e(()=>[i(l(n.$trans("global.detail",{attribute:n.$trans("config.whatsapp.template.template")})),1)]),default:e(()=>[f.selectedTemplate?(u(),F("div",X,l(f.selectedTemplate.content),1)):k("",!0)]),_:1},8,["show"])],64)}}});export{x as default};
