import{u as F,H as D,I as so,m as A,q as co,r as i,t as R,o as U,w as _,d as c,a as S,e as s,f as e,F as L,y as po,v as h,x as f,N as io,K as uo}from"./app-Cvm44xuh.js";function V(y,u){return{copyToAll:t=>{const d=y.copies[t][u];y.copies.forEach((m,l)=>{l!==t&&(m[u]=d)})},copyToAbove:t=>{const d=y.copies[t][u];for(let m=0;m<t;m++)y.copies[m][u]=d},copyToBelow:t=>{const d=y.copies[t][u];for(let m=t+1;m<y.copies.length;m++)y.copies[m][u]=d}}}const bo={class:"grid grid-cols-3 gap-6"},mo={class:"col-span-2 sm:col-span-1"},yo={class:"grid grid-cols-3 gap-4"},vo={class:"col-span-3 sm:col-span-1"},_o={class:"flex items-end justify-between space-x-4"},ko={class:"flex-1"},Vo={class:"col-span-3 sm:col-span-1"},$o={class:"col-span-3 sm:col-span-1"},wo={class:"col-span-3 sm:col-span-1"},To={class:"col-span-3 sm:col-span-1"},fo={class:"col-span-3 sm:col-span-1"},Bo={class:"col-span-3 sm:col-span-1"},No={class:"col-span-3 sm:col-span-1"},ho={class:"col-span-3 sm:col-span-1"},Uo={class:"mt-4"},Ao={class:"mt-4"},go={class:"col"},Do={name:"LibraryBookAdditionForm"},Ro=Object.assign(Do,{setup(y){const u=F(),b={date:"",copies:[],description:""},B={uuid:D(),book:"",number:"",condition:"",vendor:"",invoiceDate:"",invoiceNumber:"",roomNumber:"",rackNumber:"",shelfNumber:""},$="library/bookAddition/",t=so($),d=A({conditions:[]}),m=A({isLoaded:!u.params.uuid}),l=A({...b}),{copyToAll:P,copyToAbove:C,copyToBelow:j}=V(l,"vendor"),{copyToAll:O,copyToAbove:I,copyToBelow:q}=V(l,"invoiceNumber"),{copyToAll:E,copyToAbove:H,copyToBelow:z}=V(l,"invoiceDate"),{copyToAll:K,copyToAbove:M,copyToBelow:G}=V(l,"roomNumber"),{copyToAll:J,copyToAbove:Q,copyToBelow:W}=V(l,"rackNumber"),{copyToAll:X,copyToAbove:Y,copyToBelow:Z}=V(l,"shelfNumber"),x=n=>{Object.assign(d,n)},g=()=>{l.copies.push({...B,uuid:D()})},oo=async n=>{await io()&&(l.copies.length==1?l.copies=[B]:l.copies.splice(n,1))},eo=n=>{var w;let p=[];n.copies.forEach(T=>{var N,v;p.push({...T,condition:(N=T.condition)==null?void 0:N.uuid,invoiceDate:(v=T.invoiceDate)==null?void 0:v.value})}),Object.assign(b,{...n,copies:p,date:(w=n.date)==null?void 0:w.value}),Object.assign(l,uo(b)),m.isLoaded=!0};return co(async()=>{u.params.uuid||g()}),(n,p)=>{const w=i("DatePicker"),T=i("BaseButton"),N=i("BaseSelectSearch"),v=i("BaseInput"),ro=i("BaseSelect"),k=i("RowCopyButtons"),to=i("BaseFieldset"),ao=i("BaseBadge"),lo=i("BaseTextarea"),no=i("FormAction");return U(),R(no,{"pre-requisites":!0,onSetPreRequisites:x,"init-url":$,"init-form":b,form:l,"set-form":eo,redirect:"LibraryBookAddition"},{default:_(()=>[c("div",bo,[c("div",mo,[s(w,{modelValue:l.date,"onUpdate:modelValue":p[0]||(p[0]=a=>l.date=a),name:"date",label:n.$trans("library.book_addition.props.date"),"no-clear":"",error:e(t).date,"onUpdate:error":p[1]||(p[1]=a=>e(t).date=a)},null,8,["modelValue","label","error"])])]),(U(!0),S(L,null,po(l.copies,(a,o)=>(U(),R(to,{class:"mt-4",key:a.uuid},{legend:_(()=>[h(f(n.$trans("library.book.book"))+" "+f(o+1),1)]),default:_(()=>[c("div",yo,[c("div",vo,[c("div",_o,[c("div",null,[s(T,{size:"xs",design:"danger",onClick:r=>oo(o)},{default:_(()=>p[4]||(p[4]=[c("i",{class:"fas fa-trash"},null,-1)])),_:2,__:[4]},1032,["onClick"])]),c("div",ko,[s(N,{name:`copies.${o}.book`,label:n.$trans("global.select",{attribute:n.$trans("library.book.book")}),modelValue:a.book,"onUpdate:modelValue":r=>a.book=r,error:e(t)[`copies.${o}.book`],"onUpdate:error":r=>e(t)[`copies.${o}.book`]=r,"label-prop":"title","value-prop":"uuid","object-prop":!0,"search-key":"title","search-action":"library/book/list"},{selectedOption:_(r=>[h(f(r.value.title),1)]),listOption:_(r=>[h(f(r.option.title),1)]),_:2},1032,["name","label","modelValue","onUpdate:modelValue","error","onUpdate:error"])])])]),c("div",Vo,[s(v,{type:"text",modelValue:a.number,"onUpdate:modelValue":r=>a.number=r,name:`copies.${o}.number`,label:n.$trans("library.book_addition.props.number"),error:e(t)[`copies.${o}.number`],"onUpdate:error":r=>e(t)[`copies.${o}.number`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])]),c("div",$o,[s(ro,{name:`copies.${o}.detail`,label:n.$trans("global.select",{attribute:n.$trans("library.book_condition.book_condition")}),modelValue:a.condition,"onUpdate:modelValue":r=>a.condition=r,error:e(t)[`copies.${o}.condition`],"onUpdate:error":r=>e(t)[`copies.${o}.condition`]=r,"value-prop":"uuid","label-prop":"name",options:d.conditions},null,8,["name","label","modelValue","onUpdate:modelValue","error","onUpdate:error","options"])]),c("div",wo,[s(v,{type:"text",modelValue:a.vendor,"onUpdate:modelValue":r=>a.vendor=r,name:`copies.${o}.vendor`,label:n.$trans("library.book_addition.props.vendor"),error:e(t)[`copies.${o}.vendor`],"onUpdate:error":r=>e(t)[`copies.${o}.vendor`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"]),s(k,{"field-label":"vendor","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(P)(o),"on-copy-to-above":()=>e(C)(o),"on-copy-to-below":()=>e(j)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])]),c("div",To,[s(v,{type:"text",modelValue:a.invoiceNumber,"onUpdate:modelValue":r=>a.invoiceNumber=r,name:`copies.${o}.invoiceNumber`,label:n.$trans("library.book_addition.props.invoice_number"),error:e(t)[`copies.${o}.invoiceNumber`],"onUpdate:error":r=>e(t)[`copies.${o}.invoiceNumber`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"]),s(k,{"field-label":"invoiceNumber","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(O)(o),"on-copy-to-above":()=>e(I)(o),"on-copy-to-below":()=>e(q)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])]),c("div",fo,[s(w,{modelValue:a.invoiceDate,"onUpdate:modelValue":r=>a.invoiceDate=r,name:"invoiceDate",label:n.$trans("library.book_addition.props.invoice_date"),"no-clear":"",error:e(t)[`copies.${o}.invoiceDate`],"onUpdate:error":r=>e(t)[`copies.${o}.invoiceDate`]=r},null,8,["modelValue","onUpdate:modelValue","label","error","onUpdate:error"]),s(k,{"field-label":"invoiceDate","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(E)(o),"on-copy-to-above":()=>e(H)(o),"on-copy-to-below":()=>e(z)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])]),c("div",Bo,[s(v,{type:"text",modelValue:a.roomNumber,"onUpdate:modelValue":r=>a.roomNumber=r,name:`copies.${o}.roomNumber`,label:n.$trans("library.book_addition.props.room_number"),error:e(t)[`copies.${o}.roomNumber`],"onUpdate:error":r=>e(t)[`copies.${o}.roomNumber`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"]),s(k,{"field-label":"roomNumber","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(K)(o),"on-copy-to-above":()=>e(M)(o),"on-copy-to-below":()=>e(G)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])]),c("div",No,[s(v,{type:"text",modelValue:a.rackNumber,"onUpdate:modelValue":r=>a.rackNumber=r,name:`copies.${o}.rackNumber`,label:n.$trans("library.book_addition.props.rack_number"),error:e(t)[`copies.${o}.rackNumber`],"onUpdate:error":r=>e(t)[`copies.${o}.rackNumber`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"]),s(k,{"field-label":"rackNumber","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(J)(o),"on-copy-to-above":()=>e(Q)(o),"on-copy-to-below":()=>e(W)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])]),c("div",ho,[s(v,{type:"text",modelValue:a.shelfNumber,"onUpdate:modelValue":r=>a.shelfNumber=r,name:`copies.${o}.shelfNumber`,label:n.$trans("library.book_addition.props.shelf_number"),error:e(t)[`copies.${o}.shelfNumber`],"onUpdate:error":r=>e(t)[`copies.${o}.shelfNumber`]=r},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"]),s(k,{"field-label":"shelfNumber","current-index":o,"total-rows":l.copies.length,"on-copy-to-all":()=>e(X)(o),"on-copy-to-above":()=>e(Y)(o),"on-copy-to-below":()=>e(Z)(o)},null,8,["current-index","total-rows","on-copy-to-all","on-copy-to-above","on-copy-to-below"])])])]),_:2},1024))),128)),c("div",Uo,[s(ao,{design:"primary",onClick:g,class:"cursor-pointer"},{default:_(()=>[h(f(n.$trans("global.add",{attribute:n.$trans("general.row")})),1)]),_:1})]),c("div",Ao,[c("div",go,[s(lo,{rows:1,modelValue:l.remarks,"onUpdate:modelValue":p[2]||(p[2]=a=>l.remarks=a),name:"remarks",label:n.$trans("library.book_addition.props.remarks"),error:e(t).remarks,"onUpdate:error":p[3]||(p[3]=a=>e(t).remarks=a)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),Fo={name:"LibraryBookAdditionAction"},Lo=Object.assign(Fo,{setup(y){const u=F();return(b,B)=>{const $=i("PageHeaderAction"),t=i("PageHeader"),d=i("ParentTransition");return U(),S(L,null,[s(t,{title:b.$trans(e(u).meta.trans,{attribute:b.$trans(e(u).meta.label)}),navs:[{label:b.$trans("library.library"),path:"Library"},{label:b.$trans("library.book_addition.book_addition"),path:"LibraryBookAdditionList"}]},{default:_(()=>[s($,{name:"LibraryBookAddition",title:b.$trans("library.book_addition.book_addition"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),s(d,{appear:"",visibility:!0},{default:_(()=>[s(Ro)]),_:1})],64)}}});export{Lo as default};
