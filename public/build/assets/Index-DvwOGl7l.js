import{u as M,m as D,q as J,r,t as p,o as m,w as t,d as _,e as n,i as K,k as W,z as g,p as X,f as u,a as T,F as S,y as U,v as l,b as $,x as i,aj as Y}from"./app-Cvm44xuh.js";const Z={class:"grid grid-cols-3 gap-6"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},oe={class:"col-span-3 sm:col-span-1"},se={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(q,{emit:B}){M();const b=B,y=q,C={codeNumber:"",admissionNumber:"",employeeNumber:"",template:"",search:"",startDate:"",endDate:""},s=D({...C}),A=D({templates:y.preRequisites.templates}),N=D({isLoaded:!0});return J(async()=>{N.isLoaded=!0}),(c,o)=>{const k=r("BaseInput"),h=r("BaseSelect"),F=r("DatePicker"),I=r("FilterForm");return m(),p(I,{"init-form":C,form:s,multiple:[],onHide:o[7]||(o[7]=e=>b("hide"))},{default:t(()=>[_("div",Z,[_("div",x,[n(k,{type:"text",modelValue:s.codeNumber,"onUpdate:modelValue":o[0]||(o[0]=e=>s.codeNumber=e),name:"codeNumber",label:c.$trans("academic.certificate.props.code_number")},null,8,["modelValue","label"])]),_("div",ee,[n(k,{type:"text",modelValue:s.admissionNumber,"onUpdate:modelValue":o[1]||(o[1]=e=>s.admissionNumber=e),name:"admissionNumber",label:c.$trans("student.admission.props.code_number")},null,8,["modelValue","label"])]),_("div",te,[n(k,{type:"text",modelValue:s.employeeNumber,"onUpdate:modelValue":o[2]||(o[2]=e=>s.employeeNumber=e),name:"employeeNumber",label:c.$trans("employee.props.code_number")},null,8,["modelValue","label"])]),_("div",ae,[n(h,{modelValue:s.template,"onUpdate:modelValue":o[3]||(o[3]=e=>s.template=e),name:"template",label:c.$trans("academic.certificate.template.template"),options:A.templates,"label-prop":"name","value-prop":"uuid"},null,8,["modelValue","label","options"])]),_("div",ne,[n(k,{type:"search",modelValue:s.search,"onUpdate:modelValue":o[4]||(o[4]=e=>s.search=e),name:"search",label:c.$trans("general.search"),placeholder:c.$trans("academic.certificate.search_placeholder")},null,8,["modelValue","label","placeholder"])]),_("div",oe,[n(F,{start:s.startDate,"onUpdate:start":o[5]||(o[5]=e=>s.startDate=e),end:s.endDate,"onUpdate:end":o[6]||(o[6]=e=>s.endDate=e),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},le={name:"AcademicCertificateList"},re=Object.assign(le,{setup(q){const B=M(),b=K(),y=W("emitter");let C=["filter"];g("certificate:create")&&C.unshift("create");let s=[];g("certificate:export")&&(s=["print","pdf","excel"]);const A="academic/certificate/",N=D({templates:[]}),c=X(!1),o=D({}),k=e=>{Object.assign(o,e)},h=e=>{Object.assign(N,e)},F=e=>{window.open(`/app/academic/certificates/${e.uuid}/export?action=print`)},I=()=>{let e="/app/academic/certificates/export-all",d=B.query;window.open(Y(e,d),"_blank").focus()};return(e,d)=>{const R=r("BaseButton"),j=r("DropdownItem"),H=r("PageHeaderAction"),L=r("PageHeader"),P=r("ParentTransition"),O=r("BaseBadge"),v=r("DataCell"),V=r("TextMuted"),w=r("FloatingMenuItem"),E=r("FloatingMenu"),z=r("DataRow"),Q=r("DataTable"),G=r("ListItem");return m(),p(G,{"init-url":A,"pre-requisites":!0,onSetPreRequisites:h,onSetItems:k},{header:t(()=>[n(L,{title:e.$trans("academic.certificate.certificate"),navs:[{label:e.$trans("academic.academic"),path:"Academic"}]},{default:t(()=>[n(H,{url:"academic/certificates/",name:"AcademicCertificate",title:e.$trans("academic.certificate.certificate"),actions:u(C),"dropdown-actions":u(s),onToggleFilter:d[2]||(d[2]=a=>c.value=!c.value)},{dropdown:t(()=>[n(j,{icon:"fas fa-arrow-right-from-file",onClick:d[1]||(d[1]=a=>I())},{default:t(()=>[l(i(e.$trans("general.export_all")),1)]),_:1})]),default:t(()=>[u(g)("certificate-template:read")?(m(),p(R,{key:0,design:"white",onClick:d[0]||(d[0]=a=>u(b).push({name:"AcademicCertificateTemplate"}))},{default:t(()=>[l(i(e.$trans("academic.certificate.template.template")),1)]),_:1})):$("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[n(P,{appear:"",visibility:c.value},{default:t(()=>[n(se,{onRefresh:d[3]||(d[3]=a=>u(y).emit("listItems")),"pre-requisites":N,onHide:d[4]||(d[4]=a=>c.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:t(()=>[n(P,{appear:"",visibility:!0},{default:t(()=>[n(Q,{header:o.headers,meta:o.meta,module:"academic.certificate",onRefresh:d[6]||(d[6]=a=>u(y).emit("listItems"))},{actionButton:t(()=>[u(g)("certificate:create")?(m(),p(R,{key:0,onClick:d[5]||(d[5]=a=>u(b).push({name:"AcademicCertificateCreate"}))},{default:t(()=>[l(i(e.$trans("global.add",{attribute:e.$trans("academic.certificate.certificate")})),1)]),_:1})):$("",!0)]),default:t(()=>[(m(!0),T(S,null,U(o.data,a=>(m(),p(z,{key:a.uuid,onDoubleClick:f=>u(b).push({name:"AcademicCertificateShow",params:{uuid:a.uuid}})},{default:t(()=>[n(v,{name:"codeNumber"},{default:t(()=>[l(i(a.codeNumber)+" ",1),a.isDuplicate?(m(),p(O,{key:0,design:"primary"},{default:t(()=>[l(i(e.$trans("general.duplicate")),1)]),_:1})):$("",!0)]),_:2},1024),n(v,{name:"template"},{default:t(()=>[l(i(a.template.name)+" ",1),n(V,{block:""},{default:t(()=>[l(i(a.template.for.label),1)]),_:2},1024)]),_:2},1024),n(v,{name:"to"},{default:t(()=>[l(i(a.to.name)+" ",1),n(V,{block:""},{default:t(()=>[l(i(a.to.contactNumber),1)]),_:2},1024),a.to.codeNumber?(m(),p(V,{key:0,block:""},{default:t(()=>[l(i(a.to.codeNumber),1)]),_:2},1024)):$("",!0),(m(!0),T(S,null,U(a.customFields,f=>(m(),p(V,{block:"",key:f.label},{default:t(()=>[l(i(f.label+": "+f.value),1)]),_:2},1024))),128))]),_:2},1024),n(v,{name:"date"},{default:t(()=>[l(i(a.date.formatted),1)]),_:2},1024),n(v,{name:"createdAt"},{default:t(()=>[l(i(a.createdAt.formatted),1)]),_:2},1024),n(v,{name:"action"},{default:t(()=>[n(E,null,{default:t(()=>[n(w,{icon:"fas fa-arrow-circle-right",onClick:f=>u(b).push({name:"AcademicCertificateShow",params:{uuid:a.uuid}})},{default:t(()=>[l(i(e.$trans("general.show")),1)]),_:2},1032,["onClick"]),n(w,{icon:"fas fa-print",onClick:f=>F(a)},{default:t(()=>[l(i(e.$trans("general.print")),1)]),_:2},1032,["onClick"]),u(g)("certificate:edit")?(m(),p(w,{key:0,icon:"fas fa-edit",onClick:f=>u(b).push({name:"AcademicCertificateEdit",params:{uuid:a.uuid}})},{default:t(()=>[l(i(e.$trans("general.edit")),1)]),_:2},1032,["onClick"])):$("",!0),u(g)("certificate:create")?(m(),p(w,{key:1,icon:"fas fa-copy",onClick:f=>u(b).push({name:"AcademicCertificateDuplicate",params:{uuid:a.uuid}})},{default:t(()=>[l(i(e.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):$("",!0),u(g)("certificate:delete")?(m(),p(w,{key:2,icon:"fas fa-trash",onClick:f=>u(y).emit("deleteItem",{uuid:a.uuid})},{default:t(()=>[l(i(e.$trans("general.delete")),1)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{re as default};
