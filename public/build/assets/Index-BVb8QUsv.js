import{u as j,m as B,q as M,r as l,t as v,o as y,w as e,d as D,b as $,v as p,x as r,e as a,i as U,k as R,z as b,p as z,f as u,a as E,F as V,y as G}from"./app-Cvm44xuh.js";import{_ as J}from"./ModuleDropdown-DaLRyR4M.js";const K={class:"grid grid-cols-3 gap-6"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(w,{emit:g}){const d=j(),q=g,k={employees:[],leaveTypes:[],startDate:"",endDate:""},m=B({...k}),f=B({employees:[],leaveTypes:[],isLoaded:!(d.query.employees||d.query.leaveTypes)});return M(async()=>{f.employees=d.query.employees?d.query.employees.split(","):[],f.leaveTypes=d.query.leaveTypes?d.query.leaveTypes.split(","):[],f.isLoaded=!0}),(c,n)=>{const T=l("BaseSelectSearch"),h=l("BaseSelect"),o=l("DatePicker"),i=l("FilterForm");return y(),v(i,{"init-form":k,form:m,multiple:["employees","leaveTypes"],onHide:n[4]||(n[4]=s=>q("hide"))},{default:e(()=>[D("div",K,[D("div",Q,[f.isLoaded?(y(),v(T,{key:0,multiple:"",name:"employees",label:c.$trans("global.select",{attribute:c.$trans("employee.employee")}),modelValue:m.employees,"onUpdate:modelValue":n[0]||(n[0]=s=>m.employees=s),"value-prop":"uuid","init-search":f.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(s=>[p(r(s.value.name)+" ("+r(s.value.codeNumber)+") ",1)]),listOption:e(s=>[p(r(s.option.name)+" ("+r(s.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):$("",!0)]),D("div",W,[a(h,{multiple:"",name:"leaveTypes",label:c.$trans("global.select",{attribute:c.$trans("employee.leave.type.type")}),modelValue:m.leaveTypes,"onUpdate:modelValue":n[1]||(n[1]=s=>m.leaveTypes=s),"label-prop":"name","value-prop":"uuid",options:w.preRequisites.types},null,8,["label","modelValue","options"])]),D("div",X,[a(o,{start:m.startDate,"onUpdate:start":n[2]||(n[2]=s=>m.startDate=s),end:m.endDate,"onUpdate:end":n[3]||(n[3]=s=>m.endDate=s),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Z={name:"EmployeeLeaveRequestList"},te=Object.assign(Z,{setup(w){const g=U(),d=R("emitter");let q=["filter"];b("leave-request:create")&&q.unshift("create"),b("leave:config")&&q.unshift("config");let k=[];b("leave-request:export")&&(k=["print","pdf","excel"]);const m="employee/leave/request/",f=B({types:[]}),c=z(!1),n=B({}),T=o=>{Object.assign(f,o)},h=o=>{Object.assign(n,o)};return(o,i)=>{const s=l("PageHeaderAction"),I=l("PageHeader"),F=l("ParentTransition"),_=l("DataCell"),S=l("BaseBadge"),C=l("FloatingMenuItem"),P=l("FloatingMenu"),H=l("DataRow"),N=l("BaseButton"),O=l("DataTable"),A=l("ListItem");return y(),v(A,{"init-url":m,"pre-requisites":!0,onSetPreRequisites:T,onSetItems:h},{header:e(()=>[a(I,{title:o.$trans("employee.leave.request.request"),navs:[{label:o.$trans("employee.leave.leave"),path:"EmployeeLeave"}]},{default:e(()=>[a(s,{url:"employee/leave/requests/",name:"EmployeeLeaveRequest","config-path":"EmployeeLeaveConfig",title:o.$trans("employee.leave.request.request"),actions:u(q),"dropdown-actions":u(k),onToggleFilter:i[0]||(i[0]=t=>c.value=!c.value)},{moduleOption:e(()=>[a(J)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(F,{appear:"",visibility:c.value},{default:e(()=>[a(Y,{onRefresh:i[1]||(i[1]=t=>u(d).emit("listItems")),"pre-requisites":f,onHide:i[2]||(i[2]=t=>c.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[a(F,{appear:"",visibility:!0},{default:e(()=>[a(O,{header:n.headers,meta:n.meta,module:"employee.leave.request",onRefresh:i[4]||(i[4]=t=>u(d).emit("listItems"))},{actionButton:e(()=>[u(b)("leave-request:create")?(y(),v(N,{key:0,onClick:i[3]||(i[3]=t=>u(g).push({name:"EmployeeLeaveRequestCreate"}))},{default:e(()=>[p(r(o.$trans("global.add",{attribute:o.$trans("employee.leave.request.request")})),1)]),_:1})):$("",!0)]),default:e(()=>[(y(!0),E(V,null,G(n.data,t=>(y(),v(H,{key:t.uuid,onDoubleClick:L=>u(g).push({name:"EmployeeLeaveRequestShow",params:{uuid:t.uuid}})},{default:e(()=>[a(_,{name:"employee"},{default:e(()=>[p(r(t.employee.name)+" ("+r(t.employee.codeNumber)+") ",1)]),_:2},1024),a(_,{name:"leaveType"},{default:e(()=>[p(r(t.leaveType.name),1)]),_:2},1024),a(_,{name:"startDate"},{default:e(()=>[p(r(t.startDate.formatted)+" ",1),t.isHalfDay?(y(),v(S,{key:0,label:o.$trans("employee.leave.request.props.half_day"),design:"primary"},null,8,["label"])):$("",!0)]),_:2},1024),a(_,{name:"endDate"},{default:e(()=>[p(r(t.endDate.formatted),1)]),_:2},1024),a(_,{name:"status"},{default:e(()=>[a(S,{label:t.status.label,design:t.status.color},null,8,["label","design"])]),_:2},1024),a(_,{name:"createdAt"},{default:e(()=>[p(r(t.createdAt.formatted),1)]),_:2},1024),a(_,{name:"action"},{default:e(()=>[a(P,null,{default:e(()=>[a(C,{icon:"fas fa-arrow-circle-right",onClick:L=>u(g).push({name:"EmployeeLeaveRequestShow",params:{uuid:t.uuid}})},{default:e(()=>[p(r(o.$trans("general.show")),1)]),_:2},1032,["onClick"]),t.status.value=="requested"?(y(),E(V,{key:0},[u(b)("leave-request:edit")?(y(),v(C,{key:0,icon:"fas fa-edit",onClick:L=>u(g).push({name:"EmployeeLeaveRequestEdit",params:{uuid:t.uuid}})},{default:e(()=>[p(r(o.$trans("general.edit")),1)]),_:2},1032,["onClick"])):$("",!0),u(b)("leave-request:delete")?(y(),v(C,{key:1,icon:"fas fa-trash",onClick:L=>u(d).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[p(r(o.$trans("general.delete")),1)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{te as default};
