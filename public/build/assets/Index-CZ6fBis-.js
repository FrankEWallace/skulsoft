import{u as R,m as F,q as N,r as o,t as g,o as m,w as e,d as k,e as t,i as U,k as q,z as D,p as E,f as l,a as S,F as M,y as j,v as f,x as d,b as I}from"./app-Cvm44xuh.js";const O={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},G={__name:"Filter",emits:["hide"],setup(h,{emit:p}){R();const v=p,_={subject:"",startDate:"",endDate:""},r=F({..._}),$=F({isLoaded:!0});return N(async()=>{$.isLoaded=!0}),(c,n)=>{const w=o("BaseInput"),i=o("DatePicker"),s=o("FilterForm");return m(),g(s,{"init-form":_,form:r,multiple:[],onHide:n[3]||(n[3]=u=>v("hide"))},{default:e(()=>[k("div",O,[k("div",z,[t(w,{type:"text",modelValue:r.subject,"onUpdate:modelValue":n[0]||(n[0]=u=>r.subject=u),name:"subject",label:c.$trans("communication.sms.props.subject")},null,8,["modelValue","label"])]),k("div",x,[t(i,{start:r.startDate,"onUpdate:start":n[1]||(n[1]=u=>r.startDate=u),end:r.endDate,"onUpdate:end":n[2]||(n[2]=u=>r.endDate=u),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},J={name:"CommunicationSMSList"},Q=Object.assign(J,{setup(h){const p=U(),v=q("emitter");let _=["filter"];D("sms:send")&&_.unshift("new");let r=[];D("sms:read")&&(r=["print","pdf","excel"]);const $="communication/sms/",c=E(!1),n=F({}),w=i=>{Object.assign(n,i)};return(i,s)=>{const u=o("PageHeaderAction"),P=o("PageHeader"),y=o("ParentTransition"),b=o("DataCell"),B=o("FloatingMenuItem"),L=o("FloatingMenu"),T=o("DataRow"),V=o("BaseButton"),A=o("DataTable"),H=o("ListItem");return m(),g(H,{"init-url":$,"additional-query":{},onSetItems:w},{header:e(()=>[t(P,{title:i.$trans("communication.sms.sms"),navs:[{label:i.$trans("communication.communication"),path:"Communication"}]},{default:e(()=>[t(u,{url:"communication/sms/",name:"CommunicationSMS",title:i.$trans("communication.sms.sms"),actions:l(_),"dropdown-actions":l(r),"config-path":"CommunicationConfig",onToggleFilter:s[0]||(s[0]=a=>c.value=!c.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(y,{appear:"",visibility:c.value},{default:e(()=>[t(G,{onRefresh:s[1]||(s[1]=a=>l(v).emit("listItems")),onHide:s[2]||(s[2]=a=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(y,{appear:"",visibility:!0},{default:e(()=>[t(A,{header:n.headers,meta:n.meta,module:"communication.sms",onRefresh:s[4]||(s[4]=a=>l(v).emit("listItems"))},{actionButton:e(()=>[l(D)("sms:send")?(m(),g(V,{key:0,onClick:s[3]||(s[3]=a=>l(p).push({name:"CommunicationSMSNew"}))},{default:e(()=>[f(d(i.$trans("global.new",{attribute:i.$trans("communication.sms.sms")})),1)]),_:1})):I("",!0)]),default:e(()=>[(m(!0),S(M,null,j(n.data,a=>(m(),g(T,{key:a.uuid,onDoubleClick:C=>l(p).push({name:"CommunicationSMSShow",params:{uuid:a.uuid}})},{default:e(()=>[t(b,{name:"subject"},{default:e(()=>[f(d(a.subjectExcerpt),1)]),_:2},1024),t(b,{name:"audience"},{default:e(()=>[(m(!0),S(M,null,j(a.audienceTypes,C=>(m(),S("div",null,d(C),1))),256))]),_:2},1024),t(b,{name:"recipientCount"},{default:e(()=>[f(d(a.recipientCount),1)]),_:2},1024),t(b,{name:"createdAt"},{default:e(()=>[f(d(a.createdAt.formatted),1)]),_:2},1024),t(b,{name:"action"},{default:e(()=>[t(L,null,{default:e(()=>[t(B,{icon:"fas fa-arrow-circle-right",onClick:C=>l(p).push({name:"CommunicationSMSShow",params:{uuid:a.uuid}})},{default:e(()=>[f(d(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(D)("sms:send")?(m(),g(B,{key:0,icon:"fas fa-copy",onClick:C=>l(p).push({name:"CommunicationSMSDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[f(d(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):I("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Q as default};
