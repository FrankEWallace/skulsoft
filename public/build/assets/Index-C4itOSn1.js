import{u as z,i as U,k as G,z as C,m as I,p as J,L as K,r as c,t as f,o as d,w as a,e as n,f as l,a as A,F as Q,y as W,v as o,b as p,x as r}from"./app-Cvm44xuh.js";import{_ as X,a as Y}from"./GeneralFilter-iH9-dGNy.js";const Z={key:0,class:"font-semibold"},x={key:0,class:"font-semibold"},q={name:"ApprovalRequestList"},ae=Object.assign(q,{setup(R){const F=z(),g=U(),k=G("emitter");let w=["create","filter"];C("approval:config")&&w.push("config");const M="approval/request/",B=I({types:[]}),h=J(!1),P=s=>{Object.assign(B,s)},y=I({}),L=s=>{Object.assign(y,s)};return K(()=>{var s;return(s=F.query)==null?void 0:s.scope},()=>{k.emit("listItems")}),(s,m)=>{const D=c("BaseButton"),E=c("PageHeaderAction"),H=c("PageHeader"),T=c("ParentTransition"),v=c("TextMuted"),u=c("DataCell"),N=c("BaseBadge"),b=c("FloatingMenuItem"),O=c("FloatingMenu"),S=c("DataRow"),j=c("DataTable"),V=c("ListItem");return d(),f(V,{"init-url":M,"pre-requisites":!0,onSetPreRequisites:P,onSetItems:L},{header:a(()=>[n(H,{title:s.$trans("approval.request.request"),navs:[{label:s.$trans("approval.approval"),path:"Approval"}]},{default:a(()=>[n(E,{url:"approval/requests/",name:"ApprovalRequest","config-path":"ApprovalConfig",title:s.$trans("approval.request.request"),actions:l(w),"dropdown-actions":["print","pdf","excel"],headers:y.headers,onToggleFilter:m[1]||(m[1]=e=>h.value=!h.value)},{default:a(()=>[l(C)("approval-type:manage")?(d(),f(D,{key:0,design:"white",onClick:m[0]||(m[0]=e=>l(g).push({name:"ApprovalTypeList"}))},{default:a(()=>[o(r(s.$trans("approval.type.type")),1)]),_:1})):p("",!0)]),_:1},8,["title","actions","headers"])]),_:1},8,["title","navs"])]),"after-header":a(()=>[n(Y)]),filter:a(()=>[n(T,{appear:"",visibility:h.value},{default:a(()=>[n(X,{onRefresh:m[2]||(m[2]=e=>l(k).emit("listItems")),"pre-requisites":B,onHide:m[3]||(m[3]=e=>h.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:a(()=>[n(T,{appear:"",visibility:!0},{default:a(()=>[n(j,{header:y.headers,meta:y.meta,module:"approval.request",onRefresh:m[5]||(m[5]=e=>l(k).emit("listItems"))},{actionButton:a(()=>[n(D,{onClick:m[4]||(m[4]=e=>l(g).push({name:"ApprovalRequestCreate"}))},{default:a(()=>[o(r(s.$trans("global.add",{attribute:s.$trans("approval.request.request")})),1)]),_:1})]),default:a(()=>[(d(!0),A(Q,null,W(y.data,e=>(d(),f(S,{key:e.uuid,onDoubleClick:t=>l(g).push({name:"ApprovalRequestShow",params:{uuid:e.uuid}})},{default:a(()=>[n(u,{name:"codeNumber"},{default:a(()=>[o(r(e.codeNumber)+" ",1),e.otherTeam?(d(),f(v,{key:0},{default:a(()=>{var t,i;return[o(r((i=(t=e.type)==null?void 0:t.team)==null?void 0:i.code),1)]}),_:2},1024)):p("",!0)]),_:2},1024),n(u,{name:"team"},{default:a(()=>{var t,i;return[o(r(((i=(t=e.type)==null?void 0:t.team)==null?void 0:i.name)||"-"),1)]}),_:2},1024),n(u,{name:"title"},{default:a(()=>[o(r(e.title),1)]),_:2},1024),n(u,{name:"type"},{default:a(()=>{var t;return[o(r(((t=e.type)==null?void 0:t.name)||"-"),1)]}),_:2},1024),n(u,{name:"group"},{default:a(()=>{var t;return[o(r(((t=e.group)==null?void 0:t.name)||"-"),1)]}),_:2},1024),n(u,{name:"nature"},{default:a(()=>{var t;return[o(r(((t=e.nature)==null?void 0:t.name)||"-"),1)]}),_:2},1024),n(u,{name:"category"},{default:a(()=>{var t,i;return[o(r(((i=(t=e.type)==null?void 0:t.category)==null?void 0:i.label)||"-"),1)]}),_:2},1024),n(u,{name:"priority"},{default:a(()=>{var t;return[o(r(((t=e.priority)==null?void 0:t.name)||"-"),1)]}),_:2},1024),n(u,{name:"date"},{default:a(()=>{var t,i;return[o(r((t=e.date)==null?void 0:t.formatted)+" ",1),(i=e.dueDate)!=null&&i.formatted?(d(),f(v,{key:0,block:""},{default:a(()=>{var _;return[o(r((_=e.dueDate)==null?void 0:_.formatted),1)]}),_:2},1024)):p("",!0)]}),_:2},1024),n(u,{name:"amount"},{default:a(()=>{var t,i;return[o(r(((t=e.amount)==null?void 0:t.value)>0?(i=e.amount)==null?void 0:i.formatted:"-"),1)]}),_:2},1024),n(u,{name:"status"},{default:a(()=>{var t;return[n(N,{design:(t=e.status)==null?void 0:t.color},{default:a(()=>{var i;return[o(r(((i=e.status)==null?void 0:i.label)||"-"),1)]}),_:2},1032,["design"])]}),_:2},1024),n(u,{name:"requester"},{default:a(()=>{var t,i;return[o(r(((t=e.requester)==null?void 0:t.name)||"-")+" ",1),(i=e.requester)!=null&&i.uuid?(d(),f(v,{key:0,block:""},{default:a(()=>{var _,$;return[o(r(((_=e.requester)==null?void 0:_.designation)||"-")+" ",1),($=e.requester)!=null&&$.isOtherTeamMember?(d(),A("span",Z,r(e.requester.teamCode),1)):p("",!0)]}),_:2},1024)):p("",!0)]}),_:2},1024),n(u,{name:"approver"},{default:a(()=>{var t,i;return[o(r(((t=e.approver)==null?void 0:t.name)||"-")+" ",1),(i=e.approver)!=null&&i.uuid?(d(),f(v,{key:0,block:""},{default:a(()=>{var _,$;return[o(r(((_=e.approver)==null?void 0:_.designation)||"-")+" ",1),($=e.approver)!=null&&$.isOtherTeamMember?(d(),A("span",x,r(e.approver.teamCode),1)):p("",!0)]}),_:2},1024)):p("",!0)]}),_:2},1024),n(u,{name:"createdAt"},{default:a(()=>[o(r(e.createdAt.formatted),1)]),_:2},1024),n(u,{name:"action"},{default:a(()=>[n(O,null,{default:a(()=>[n(b,{icon:"fas fa-arrow-circle-right",onClick:t=>l(g).push({name:"ApprovalRequestShow",params:{uuid:e.uuid}})},{default:a(()=>[o(r(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(C)("approval-request:edit")&&e.isEditable?(d(),f(b,{key:0,icon:"fas fa-edit",onClick:t=>l(g).push({name:"ApprovalRequestEdit",params:{uuid:e.uuid}})},{default:a(()=>[o(r(s.$trans("general.edit")),1)]),_:2},1032,["onClick"])):p("",!0),l(C)("approval-request:edit")&&e.isEditable?(d(),f(b,{key:1,icon:"far fa-circle-xmark",onClick:t=>l(k).emit("actionItem",{uuid:e.uuid,action:"cancel",confirmation:!0})},{default:a(()=>[o(r(s.$trans("general.cancel")),1)]),_:2},1032,["onClick"])):p("",!0),n(b,{icon:"fas fa-copy",onClick:t=>l(g).push({name:"ApprovalRequestDuplicate",params:{uuid:e.uuid}})},{default:a(()=>[o(r(s.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),l(C)("approval-request:delete")&&e.isEditable?(d(),f(b,{key:2,icon:"fas fa-trash",onClick:t=>l(k).emit("deleteItem",{uuid:e.uuid})},{default:a(()=>[o(r(s.$trans("general.delete")),1)]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{ae as default};
