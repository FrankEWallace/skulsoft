import{u as L,m as w,I as A,r as o,t as f,o as _,w as t,d as $,e as a,f as i,j as D,i as E,p as O,a as H,b as q,v as r,x as n,C as M,z as C,F as z}from"./app-Cvm44xuh.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3"},Q={class:"col-span-3"},W={name:"StudentServiceRequestActionForm"},X=Object.assign(W,{props:{serviceRequest:{type:Object,required:!0}},emits:["completed"],setup(N,{emit:g}){const S=g;L();const k={status:"",comment:"",remarks:""},B="student/serviceRequest/",v=w({statuses:[]}),e=A(B),c=w({...k}),s=p=>{Object.assign(v,p)},d=()=>{S("completed")};return(p,l)=>{const m=o("BaseSelect"),R=o("BaseTextarea"),V=o("FormAction");return _(),f(V,{"no-card":"","pre-requisites":!0,onSetPreRequisites:s,"keep-adding":!1,"init-url":B,uuid:N.serviceRequest.uuid,"no-data-fetch":!0,action:"updateStatus","init-form":k,form:c,"after-submit":d},{default:t(()=>[$("div",G,[$("div",J,[a(m,{name:"status",label:p.$trans("global.select",{attribute:p.$trans("student.service_request.props.status")}),modelValue:c.status,"onUpdate:modelValue":l[0]||(l[0]=u=>c.status=u),options:v.statuses,error:i(e).status,"onUpdate:error":l[1]||(l[1]=u=>i(e).status=u)},null,8,["label","modelValue","options","error"])]),$("div",K,[a(R,{rows:1,modelValue:c.comment,"onUpdate:modelValue":l[2]||(l[2]=u=>c.comment=u),name:"comment",label:p.$trans("student.service_request.props.comment"),error:i(e).comment,"onUpdate:error":l[3]||(l[3]=u=>i(e).comment=u)},null,8,["modelValue","label","error"])]),$("div",Q,[a(R,{rows:1,modelValue:c.remarks,"onUpdate:modelValue":l[4]||(l[4]=u=>c.remarks=u),name:"remarks",label:p.$trans("student.service_request.props.remarks"),error:i(e).remarks,"onUpdate:error":l[5]||(l[5]=u=>i(e).remarks=u)},null,8,["modelValue","label","error"])])])]),_:1},8,["uuid","form"])}}}),Y={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Z={class:"mt-4 text-sm space-y-2"},x={name:"StudentServiceRequestShow"},te=Object.assign(x,{setup(N){D();const g=L(),S=E(),k={},B="student/serviceRequest/",v=O(!1),e=w({...k}),c=s=>{Object.assign(e,s)};return(s,d)=>{const p=o("PageHeaderAction"),l=o("PageHeader"),m=o("ListItemView"),R=o("BaseBadge"),V=o("ListContainerVertical"),u=o("BaseCard"),b=o("BaseDataView"),T=o("TextMuted"),h=o("ListMedia"),I=o("BaseButton"),P=o("ShowButton"),U=o("DetailLayoutVertical"),F=o("ShowItem"),j=o("ParentTransition");return _(),H(z,null,[a(l,{title:s.$trans(i(g).meta.trans,{attribute:s.$trans(i(g).meta.label)}),navs:[{label:s.$trans("student.student"),path:"Student"},{label:s.$trans("student.service_request.service_request"),path:"StudentServiceRequestList"}]},{default:t(()=>[a(p,{name:"StudentServiceRequest",title:s.$trans("student.service_request.service_request"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),a(j,{appear:"",visibility:!0},{default:t(()=>[a(F,{"init-url":B,uuid:i(g).params.uuid,onSetItem:c,onRedirectTo:d[2]||(d[2]=y=>i(S).push({name:"StudentServiceRequest"})),refresh:v.value,onRefreshed:d[3]||(d[3]=y=>v.value=!1)},{default:t(()=>[e.uuid?(_(),f(U,{key:0},{detail:t(()=>[a(u,{"no-padding":"","no-content-padding":""},{title:t(()=>[r(n(s.$trans("global.detail",{attribute:s.$trans("student.service_request.service_request")})),1)]),default:t(()=>[a(V,null,{default:t(()=>[a(m,{label:s.$trans("student.service_request.props.code_number")},{default:t(()=>[r(n(e.codeNumber),1)]),_:1},8,["label"]),a(m,{dynamic:"",label:s.$trans("student.service_request.props.status")},{default:t(()=>[a(R,{design:e.status.color},{default:t(()=>[r(n(e.status.label),1)]),_:1},8,["design"])]),_:1},8,["label"]),a(m,{label:s.$trans("student.props.name")},{default:t(()=>[r(n(e.student.name),1)]),_:1},8,["label"]),a(m,{label:s.$trans("student.admission.props.code_number")},{default:t(()=>[r(n(e.student.codeNumber),1)]),_:1},8,["label"]),a(m,{label:s.$trans("contact.props.father_name")},{default:t(()=>[r(n(e.student.fatherName),1)]),_:1},8,["label"]),a(m,{label:s.$trans("contact.props.mother_name")},{default:t(()=>[r(n(e.student.motherName),1)]),_:1},8,["label"]),a(m,{label:s.$trans("contact.props.contact_number")},{default:t(()=>[r(n(e.student.contactNumber),1)]),_:1},8,["label"]),a(m,{label:s.$trans("academic.course.course")},{default:t(()=>[r(n(e.student.courseName+" "+e.student.batchName),1)]),_:1},8,["label"])]),_:1})]),_:1})]),default:t(()=>[a(u,null,{title:t(()=>[r(n(s.$trans("student.service_request.service_request")),1)]),footer:t(()=>[a(P,null,{default:t(()=>[i(C)("student:service-request")&&e.isEditable?(_(),f(I,{key:0,design:"primary",onClick:d[0]||(d[0]=y=>i(S).push({name:"StudentServiceRequestEdit",params:{uuid:e.uuid}}))},{default:t(()=>[r(n(s.$trans("general.edit")),1)]),_:1})):q("",!0)]),_:1})]),default:t(()=>[$("dl",Y,[a(b,{label:s.$trans("student.service_request.props.date")},{default:t(()=>[r(n(e.date.formatted),1)]),_:1},8,["label"]),a(b,{label:s.$trans("student.service_request.props.type")},{default:t(()=>[r(n(e.type.label)+" ",1),e.transportStoppage?(_(),f(T,{key:0,block:""},{default:t(()=>[r(n(e.transportStoppage.name),1)]),_:1})):q("",!0)]),_:1},8,["label"]),a(b,{label:s.$trans("student.service_request.props.request_type")},{default:t(()=>[r(n(e.requestType.label),1)]),_:1},8,["label"]),a(b,{label:s.$trans("student.service_request.props.requester")},{default:t(()=>[r(n(e.requester.profile.name),1)]),_:1},8,["label"]),a(b,{class:"col-span-1 sm:col-span-2",label:s.$trans("student.service_request.props.description")},{default:t(()=>[r(n(e.description),1)]),_:1},8,["label"]),e.comment?(_(),f(b,{key:0,class:"col-span-1 sm:col-span-2",label:s.$trans("student.service_request.props.comment")},{default:t(()=>[r(n(e.comment),1)]),_:1},8,["label"])):q("",!0),e.remarks&&!i(M)(["student","guardian"],"any")?(_(),f(b,{key:1,class:"col-span-1 sm:col-span-2",label:s.$trans("student.service_request.props.remarks")},{default:t(()=>[r(n(e.remarks),1)]),_:1},8,["label"])):q("",!0)]),$("div",Z,[a(h,{media:e.media,url:`/app/student/service-requests/${e.uuid}/`},null,8,["media","url"])])]),_:1}),i(C)("student:service-request-action")&&e.status.value=="requested"?(_(),f(u,{key:0},{title:t(()=>[r(n(s.$trans("student.service_request.props.action")),1)]),default:t(()=>[a(X,{serviceRequest:e,onCompleted:d[1]||(d[1]=y=>v.value=!0)},null,8,["serviceRequest"])]),_:1})):q("",!0)]),_:1})):q("",!0)]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{te as default};
