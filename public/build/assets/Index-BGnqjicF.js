import{u as Q,m as E,q as W,r as i,t as c,o as s,w as t,d,e as n,b as g,i as X,k as Y,z as $,p as Z,f as r,C as ee,a as D,F as S,y as A,x as a,h as te,v as l}from"./app-Cvm44xuh.js";const ae={class:"grid grid-cols-3 gap-6"},ne={class:"col-span-3 sm:col-span-1"},oe={class:"col-span-3 sm:col-span-1"},se={class:"col-span-3 sm:col-span-1"},le={class:"col-span-3 sm:col-span-1"},ie={class:"col-span-3 sm:col-span-1"},re={__name:"Filter",emits:["hide"],setup(R,{emit:h}){const v=Q(),w=h,B={codeNumber:"",title:"",types:[],for:"",startDate:"",endDate:""},p=E({...B}),b=E({types:[],isLoaded:!v.query.types});return W(async()=>{b.types=v.query.types?v.query.types.split(","):[],b.isLoaded=!0}),(u,m)=>{const I=i("BaseInput"),F=i("BaseSelectSearch"),o=i("BaseSelect"),_=i("DatePicker"),P=i("FilterForm");return s(),c(P,{"init-form":B,form:p,multiple:["types"],onHide:m[6]||(m[6]=y=>w("hide"))},{default:t(()=>[d("div",ae,[d("div",ne,[n(I,{type:"text",modelValue:p.codeNumber,"onUpdate:modelValue":m[0]||(m[0]=y=>p.codeNumber=y),name:"codeNumber",label:u.$trans("calendar.event.props.code_number")},null,8,["modelValue","label"])]),d("div",oe,[n(I,{type:"text",modelValue:p.title,"onUpdate:modelValue":m[1]||(m[1]=y=>p.title=y),name:"title",label:u.$trans("calendar.event.props.title")},null,8,["modelValue","label"])]),d("div",se,[b.isLoaded?(s(),c(F,{key:0,multiple:"",name:"types",label:u.$trans("global.select",{attribute:u.$trans("calendar.event.type.type")}),modelValue:p.types,"onUpdate:modelValue":m[2]||(m[2]=y=>p.types=y),"value-prop":"uuid","init-search":b.types,"search-action":"option/list","additional-search-query":{type:"event_type"}},null,8,["label","modelValue","init-search"])):g("",!0)]),d("div",le,[n(o,{modelValue:p.for,"onUpdate:modelValue":m[3]||(m[3]=y=>p.for=y),name:"for",label:u.$trans("calendar.event.props.for"),options:[{label:u.$trans("calendar.event.props.for_alumni"),value:"for_alumni"},{label:u.$trans("calendar.event.props.is_public"),value:"is_public"}]},null,8,["modelValue","label","options"])]),d("div",ie,[n(_,{start:p.startDate,"onUpdate:start":m[4]||(m[4]=y=>p.startDate=y),end:p.endDate,"onUpdate:end":m[5]||(m[5]=y=>p.endDate=y),name:"dateBetween",as:"range",label:u.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},de={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},ue=["onClick"],ce=["src"],me={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},pe={class:"flex items-center justify-between"},fe={class:"font-medium"},_e={class:"text-sm"},ye={class:"mt-2 flex items-center"},ge={class:"mt-2 text-xs"},ve={class:"text-xl font-semibold"},be={key:0,class:"fas fa-thumbtack"},ke={name:"CalendarEventList"},he=Object.assign(ke,{setup(R){const h=X(),v=Y("emitter");let w=["filter"];$("calendar:config")&&w.push("config"),$("event:create")&&w.unshift("create");let B=[];$("event:export")&&(B=["print","pdf","excel"]);const p="calendar/event/",b=Z(!1),u=E({}),m=o=>{Object.assign(u,o)},I=async o=>{v.emit("actionItem",{uuid:o.uuid,action:"pin",confirmation:!0})},F=async o=>{v.emit("actionItem",{uuid:o.uuid,action:"unpin",confirmation:!0})};return(o,_)=>{const P=i("PageHeaderAction"),y=i("PageHeader"),T=i("ParentTransition"),V=i("TextMuted"),H=i("CardView"),q=i("Pagination"),j=i("CardList"),k=i("DataCell"),x=i("BaseBadge"),C=i("FloatingMenuItem"),z=i("FloatingMenu"),O=i("DataRow"),G=i("BaseButton"),J=i("DataTable"),K=i("ListItem");return s(),c(K,{"init-url":p,onSetItems:m},{header:t(()=>[n(y,{title:o.$trans("calendar.event.event"),navs:[{label:o.$trans("calendar.calendar"),path:"Calendar"}]},{default:t(()=>[n(P,{url:"calendar/events/",name:"CalendarEvent",title:o.$trans("calendar.event.event"),actions:r(w),"dropdown-actions":r(B),"config-path":"CalendarConfig",onToggleFilter:_[0]||(_[0]=e=>b.value=!b.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[n(T,{appear:"",visibility:b.value},{default:t(()=>[n(re,{onRefresh:_[1]||(_[1]=e=>r(v).emit("listItems")),onHide:_[2]||(_[2]=e=>b.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[r(ee)(["student","guardian"],"any")?(s(),c(T,{key:0,appear:"",visibility:!0},{default:t(()=>[n(j,{header:u.headers,meta:u.meta},{content:t(()=>[d("div",ve,a(o.$trans("dashboard.nothing_to_show")),1)]),default:t(()=>[d("div",de,[(s(!0),D(S,null,A(u.data,e=>(s(),D("div",{key:e.uuid,class:"cursor-pointer",onClick:f=>r(h).push({name:"CalendarEventShow",params:{uuid:e.uuid}})},[d("div",null,[d("img",{class:"rounded-tl-lg rounded-tr-lg",src:e.coverImage},null,8,ce)]),n(H,{"no-padding":"","rounded-bottom":""},{default:t(()=>[d("div",me,[d("div",pe,[d("span",fe,a(e.title),1),d("span",_e,a(e.duration),1)]),d("div",ye,[d("span",{class:"px-2 py-1 text-gray-50 text-xs rounded-lg mr-2",style:te(`background-color: ${e.type.color}`)},a(e.type.name),5),e.venue?(s(),c(V,{key:0,block:""},{default:t(()=>[l(" @ "+a(e.venue),1)]),_:2},1024)):g("",!0)]),d("p",ge,a(e.durationInDetail),1)])]),_:2},1024)],8,ue))),128))]),d("div",null,[n(q,{"card-view":"",meta:u.meta,onRefresh:_[3]||(_[3]=e=>r(v).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(s(),c(T,{key:1,appear:"",visibility:!0},{default:t(()=>[n(J,{header:u.headers,meta:u.meta,module:"calendar.event",onRefresh:_[5]||(_[5]=e=>r(v).emit("listItems"))},{actionButton:t(()=>[r($)("event:create")?(s(),c(G,{key:0,onClick:_[4]||(_[4]=e=>r(h).push({name:"CalendarEventCreate"}))},{default:t(()=>[l(a(o.$trans("global.add",{attribute:o.$trans("calendar.event.event")})),1)]),_:1})):g("",!0)]),default:t(()=>[(s(!0),D(S,null,A(u.data,e=>(s(),c(O,{key:e.uuid,onDoubleClick:f=>r(h).push({name:"CalendarEventShow",params:{uuid:e.uuid}})},{default:t(()=>[n(k,{name:"codeNumber"},{default:t(()=>[l(a(e.codeNumber)+" ",1),e.isPinned?(s(),D("i",be)):g("",!0)]),_:2},1024),n(k,{name:"type"},{default:t(()=>[l(a(e.type.name),1)]),_:2},1024),n(k,{name:"title"},{default:t(()=>[l(a(e.title)+" ",1),n(V,{block:""},{default:t(()=>[l(a(e.venue),1)]),_:2},1024)]),_:2},1024),n(k,{name:"startDate"},{default:t(()=>[l(a(e.startDate.formatted)+" ",1),e.startTime.value?(s(),c(V,{key:0,block:""},{default:t(()=>[l(a(e.startTime.formatted),1)]),_:2},1024)):g("",!0)]),_:2},1024),n(k,{name:"endDate"},{default:t(()=>{var f;return[l(a(((f=e.endDate)==null?void 0:f.formatted)||"-")+" ",1),e.endTime.value?(s(),c(V,{key:0,block:""},{default:t(()=>[l(a(e.endTime.formatted),1)]),_:2},1024)):g("",!0)]}),_:2},1024),n(k,{name:"audience"},{default:t(()=>[e.forAlumni?(s(),c(x,{key:0},{default:t(()=>[l(a(o.$trans("calendar.event.props.for_alumni")),1)]),_:1})):g("",!0),(s(!0),D(S,null,A(e.audienceTypes,f=>(s(),D("div",null,a(f),1))),256))]),_:2},1024),n(k,{name:"incharge"},{default:t(()=>{var f,N,L;return[l(a(((N=(f=e.incharge)==null?void 0:f.employee)==null?void 0:N.name)||"-")+" ",1),(L=e.incharge)!=null&&L.employee?(s(),c(V,{key:0,block:""},{default:t(()=>{var U,M;return[l(a((M=(U=e.incharge)==null?void 0:U.employee)==null?void 0:M.designation),1)]}),_:2},1024)):g("",!0)]}),_:2},1024),n(k,{name:"createdAt"},{default:t(()=>[l(a(e.createdAt.formatted),1)]),_:2},1024),n(k,{name:"action"},{default:t(()=>[n(z,null,{default:t(()=>[n(C,{icon:"fas fa-arrow-circle-right",onClick:f=>r(h).push({name:"CalendarEventShow",params:{uuid:e.uuid}})},{default:t(()=>[l(a(o.$trans("general.show")),1)]),_:2},1032,["onClick"]),r($)("event:edit")&&!e.isPinned?(s(),c(C,{key:0,icon:"fas fa-thumbtack",onClick:f=>I(e)},{default:t(()=>[l(a(o.$trans("global.pin",{attribute:o.$trans("calendar.event.event")})),1)]),_:2},1032,["onClick"])):r($)("event:edit")&&e.isPinned?(s(),c(C,{key:1,icon:"fas fa-thumbtack-slash",onClick:f=>F(e)},{default:t(()=>[l(a(o.$trans("global.unpin",{attribute:o.$trans("calendar.event.event")})),1)]),_:2},1032,["onClick"])):g("",!0),r($)("event:edit")?(s(),c(C,{key:2,icon:"fas fa-edit",onClick:f=>r(h).push({name:"CalendarEventEdit",params:{uuid:e.uuid}})},{default:t(()=>[l(a(o.$trans("general.edit")),1)]),_:2},1032,["onClick"])):g("",!0),r($)("event:create")?(s(),c(C,{key:3,icon:"fas fa-copy",onClick:f=>r(h).push({name:"CalendarEventDuplicate",params:{uuid:e.uuid}})},{default:t(()=>[l(a(o.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):g("",!0),r($)("event:delete")?(s(),c(C,{key:4,icon:"fas fa-trash",onClick:f=>r(v).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[l(a(o.$trans("general.delete")),1)]),_:2},1032,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{he as default};
