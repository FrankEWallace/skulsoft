import{k as O,I as Q,m as N,q as X,r,t as _,o as c,w as e,d as m,a as d,e as s,v as l,x as n,F as b,y as v,f as t,K as Y,j as Z,u as ee,i as te,g as ae,p as U,b as y,z as H}from"./app-Cvm44xuh.js";const se={class:"sm:grid grid-cols-3 gap-6 hidden"},oe={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},ce={class:"mt-4 grid grid-cols-3 gap-6"},le={class:"col-span-3 sm:col-span-1 flex items-center"},re={class:"col-span-3 sm:col-span-1"},ie={name:"AcademicCourseEnrollmentSeatForm"},de=Object.assign(ie,{props:{course:{type:Object,default:()=>({})}},emits:["completed"],setup(w,{emit:A}){const x=A;O("emitter");const T=w,a={enrollmentTypes:[]},B="academic/course/",k=Q(B),C=N({...a}),o=()=>{x("completed")},L=()=>{T.course.enrollmentSeats.forEach(p=>{a.enrollmentTypes.push({...p.enrollmentType,maxSeat:p.maxSeat})}),Object.assign(C,Y(a))};return X(()=>{L()}),(p,D)=>{const f=r("BaseLabel"),I=r("BaseInput"),g=r("FormAction");return c(),_(g,{"init-url":B,uuid:w.course.uuid,"no-data-fetch":"",action:"updateEnrollmentSeat","init-form":a,form:C,"keep-adding":!1,"stay-on":!0,"after-submit":o},{default:e(()=>[m("div",se,[m("div",oe,[s(f,null,{default:e(()=>[l(n(p.$trans("student.enrollment_type.enrollment_type")),1)]),_:1})]),m("div",ne,[s(f,null,{default:e(()=>[l(n(p.$trans("academic.course.enrollment_seat.props.max_seat")),1)]),_:1})])]),(c(!0),d(b,null,v(C.enrollmentTypes,(u,S)=>(c(),d("div",ce,[m("div",le,[s(f,null,{default:e(()=>[l(n(u.name),1)]),_:2},1024)]),m("div",re,[s(I,{type:"number",name:`enrollmentTypes.${S}.maxSeat`,modelValue:u.maxSeat,"onUpdate:modelValue":j=>u.maxSeat=j,placeholder:p.$trans("academic.course.enrollment_seat.props.max_seat"),error:t(k)[`enrollmentTypes.${S}.maxSeat`],"onUpdate:error":j=>t(k)[`enrollmentTypes.${S}.maxSeat`]=j},null,8,["name","modelValue","onUpdate:modelValue","placeholder","error","onUpdate:error"])])]))),256))]),_:1},8,["uuid","form"])}}}),ue={class:"space-y-2"},me={key:0},pe={class:"flex flex-wrap gap-2"},_e={class:"grid grid-cols-1 gap-x-4 gap-y-8 px-4 pt-4 sm:grid-cols-2"},fe={class:"flex flex-wrap gap-2"},be={class:"text-sm"},ge={class:"flex flex-wrap gap-2"},he={class:"mt-4"},ye={name:"AcademicCourseShow"},xe=Object.assign(ye,{setup(w){const A=Z(),x=ee(),T=te(),a=O("$trans"),B={},k="academic/course/",C=[{key:"batch",label:a("academic.batch.batch"),visibility:!0},{key:"subjects",label:a("academic.subject.subject"),visibility:!0},{key:"action",label:"",visibility:!0}],o=N({...B}),L=g=>{Object.assign(o,g)},p=ae("periods"),D=U(!1),f=U(!1),I=g=>{D.value=!0,A.dispatch(k+"updateCurrentPeriod",{uuid:o.uuid,form:{period_id:g.id}}).then(()=>{f.value=!0}).catch(()=>{}).finally(()=>{D.value=!1})};return(g,u)=>{const S=r("PageHeaderAction"),j=r("PageHeader"),P=r("TextMuted"),h=r("ListItemView"),M=r("ListContainerVertical"),V=r("BaseCard"),F=r("DataCell"),z=r("DataRow"),q=r("SimpleTable"),R=r("BaseDataView"),K=r("BaseBadge"),W=r("DetailLayoutVertical"),G=r("ShowItem"),J=r("ParentTransition");return c(),d(b,null,[s(j,{title:t(a)(t(x).meta.trans,{attribute:t(a)(t(x).meta.label)}),navs:[{label:t(a)("academic.academic"),path:"Academic"},{label:t(a)("academic.course.course"),path:"AcademicCourseList"}]},{default:e(()=>[s(S,{name:"AcademicCourse",title:t(a)("academic.course.course"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),s(J,{appear:"",visibility:!0},{default:e(()=>[s(G,{"init-url":k,uuid:t(x).params.uuid,onSetItem:L,onRedirectTo:u[0]||(u[0]=i=>t(T).push({name:"AcademicCourse"})),refresh:f.value,onRefreshed:u[1]||(u[1]=i=>f.value=!1)},{default:e(()=>[o.uuid?(c(),_(W,{key:0},{detail:e(()=>[m("div",ue,[s(V,{"no-padding":"","no-content-padding":""},{title:e(()=>[l(n(t(a)("academic.course.course")),1)]),action:e(()=>u[2]||(u[2]=[])),default:e(()=>[s(M,null,{default:e(()=>[s(h,{label:t(a)("academic.course.props.name")},{default:e(()=>[l(n(o.name)+" ",1),o.term?(c(),d("span",me,"("+n(o.term)+")",1)):y("",!0),o.pgAccount?(c(),_(P,{key:1,block:""},{default:e(()=>[l(n(o.pgAccount),1)]),_:1})):y("",!0)]),_:1},8,["label"]),s(h,{label:t(a)("academic.division.division")},{default:e(()=>[l(n(o.division.name),1)]),_:1},8,["label"]),s(h,{label:t(a)("academic.course.props.code")},{default:e(()=>[l(n(o.code)+" ",1),s(P,{block:""},{default:e(()=>[l(n(o.shortcode),1)]),_:1})]),_:1},8,["label"]),s(h,{label:t(a)("academic.course.props.batch_with_same_subject")},{default:e(()=>[l(n(o.batchWithSameSubject?t(a)("general.yes"):t(a)("general.no")),1)]),_:1},8,["label"]),s(h,{label:t(a)("general.created_at")},{default:e(()=>[l(n(o.createdAt.formatted),1)]),_:1},8,["label"]),s(h,{label:t(a)("general.updated_at")},{default:e(()=>[l(n(o.updatedAt.formatted),1)]),_:1},8,["label"])]),_:1})]),_:1})])]),default:e(()=>[s(V,{"no-padding":"","no-content-padding":"","bottom-content-padding":""},{title:e(()=>[l(n(t(a)("global.detail",{attribute:t(a)("academic.course.course")})),1)]),default:e(()=>[o.batches.length>0?(c(),_(q,{key:0,header:C},{default:e(()=>[(c(!0),d(b,null,v(o.batches,i=>(c(),_(z,{key:i.uuid},{default:e(()=>[s(F,{name:"batch"},{default:e(()=>[l(n(i.name),1)]),_:2},1024),s(F,{name:"subjects"},{default:e(()=>[(c(!0),d(b,null,v(i.subjectRecords,$=>{var E;return c(),d("span",pe,n((E=$.subject)==null?void 0:E.name),1)}),256))]),_:2},1024),s(F,{name:"action"})]),_:2},1024))),128))]),_:1})):y("",!0),m("dl",_e,[s(R,{class:"col-span-1 sm:col-span-2",label:t(a)("academic.subject.subjects")},{default:e(()=>[m("div",fe,[(c(!0),d(b,null,v(o.subjectRecords,i=>{var $;return c(),d("span",be,n(($=i.subject)==null?void 0:$.name),1)}),256))])]),_:1},8,["label"]),s(R,{class:"col-span-1 sm:col-span-2",label:t(a)("academic.course.props.description")},{default:e(()=>[l(n(o.description),1)]),_:1},8,["label"])])]),_:1}),t(H)("course:edit")&&o.uuid?(c(),_(V,{key:0,"no-padding":"","no-content-padding":""},{title:e(()=>[l(n(t(a)("academic.enrollment_seat.enrollment_seat")),1)]),default:e(()=>[s(de,{course:o},null,8,["course"])]),_:1})):y("",!0),t(H)("course:edit")?(c(),_(V,{key:1},{title:e(()=>[l(n(t(a)("global.update",{attribute:t(a)("academic.period.current_period")})),1)]),default:e(()=>[m("div",ge,[(c(!0),d(b,null,v(t(p),i=>(c(),_(K,{key:i.id,size:"md",design:"info",class:"cursor-pointer",onClick:$=>I(i)},{default:e(()=>[l(n(i.name),1)]),_:2},1032,["onClick"]))),128))]),m("div",he,[(c(!0),d(b,null,v(o.periodHistory,i=>(c(),d("div",{class:"dark:text-gray-400 text-sm",key:i.id},n(i.name)+" - "+n(i.datetime.formatted),1))),128))])]),_:1})):y("",!0)]),_:1})):y("",!0)]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{xe as default};
