import{m as R,r as a,t as c,o as d,w as e,d as F,e as s,u as q,i as z,j as E,k as x,g as G,c as J,p as k,q as K,f as r,a as Q,F as W,y as X,v as p,x as f,b as y}from"./app-Cvm44xuh.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(i,{emit:v}){const I=v,_={search:""},l=R({..._});return(w,m)=>{const $=a("BaseInput"),C=a("FilterForm");return d(),c(C,{"init-form":_,form:l,onHide:m[1]||(m[1]=u=>I("hide"))},{default:e(()=>[F("div",Y,[F("div",Z,[s($,{type:"text",modelValue:l.search,"onUpdate:modelValue":m[0]||(m[0]=u=>l.search=u),name:"search",label:w.$trans("general.search")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},te={name:"TeamConfigRoleList"},oe=Object.assign(te,{props:{team:{type:Object,default(){return{name:""}}}},setup(i){const v=q(),I=z(),_=E(),l=x("emitter"),w=i;let m=["print","pdf","excel"];G("teams");const $=J(()=>_.getters["auth/user/currentTeamId"]),C="team/role/",u=k(!1),g=k(!1),b=R({}),h=n=>{Object.assign(b,n)},D=()=>{window.open("/app/roles-and-permissions","_blank")};return K(()=>{var n;$.value==((n=w.team)==null?void 0:n.id)&&m.unshift("import")}),(n,t)=>{const A=a("DropdownItem"),j=a("PageHeaderAction"),H=a("PageHeader"),B=a("ParentTransition"),P=a("BaseAlert"),V=a("BaseImport"),T=a("DataCell"),L=a("FloatingMenuItem"),M=a("FloatingMenu"),N=a("DataRow"),O=a("BaseButton"),S=a("DataTable"),U=a("ListItem");return d(),c(U,{"init-url":C,uuid:r(v).params.uuid,onSetItems:h},{header:e(()=>[i.team.uuid?(d(),c(H,{key:0,title:n.$trans("team.config.role.role"),navs:[{label:n.$trans("team.team"),path:"TeamList"},{label:i.team.name,path:{name:"TeamShow",params:{uuid:i.team.uuid}}},{label:n.$trans("team.config.config"),path:"TeamConfig"}]},{default:e(()=>[s(j,{url:`teams/${i.team.uuid}/roles/`,name:"TeamConfigRole",title:n.$trans("team.config.role.role"),actions:["create","filter"],"dropdown-actions":r(m),onToggleFilter:t[0]||(t[0]=o=>u.value=!u.value),onToggleImport:t[1]||(t[1]=o=>g.value=!g.value)},{dropdown:e(()=>[$.value===i.team.id?(d(),c(A,{key:0,icon:"fas fa-download",onClick:D},{default:e(()=>[p(f(n.$trans("general.download")),1)]),_:1})):y("",!0)]),_:1},8,["url","title","dropdown-actions"])]),_:1},8,["title","navs"])):y("",!0)]),filter:e(()=>[s(B,{appear:"",visibility:u.value},{default:e(()=>[s(ee,{onRefresh:t[2]||(t[2]=o=>r(l).emit("listItems")),onHide:t[3]||(t[3]=o=>u.value=!1)})]),_:1},8,["visibility"])]),import:e(()=>[s(B,{appear:"",visibility:g.value},{default:e(()=>[s(V,{path:`teams/${i.team.uuid}/roles/import`,onCancelled:t[4]||(t[4]=o=>g.value=!1),onHide:t[5]||(t[5]=o=>g.value=!1),onCompleted:t[6]||(t[6]=o=>r(l).emit("listItems")),"has-validation":!1,"allowed-extensions":["json"]},{header:e(()=>[s(P,{size:"xs",design:"info"},{default:e(()=>[p(f(n.$trans("team.config.role.import_info")),1)]),_:1})]),_:1},8,["path"])]),_:1},8,["visibility"])]),default:e(()=>[s(B,{appear:"",visibility:!0},{default:e(()=>[s(S,{header:b.headers,meta:b.meta,module:"team.config.role",onRefresh:t[8]||(t[8]=o=>r(l).emit("listItems"))},{actionButton:e(()=>[s(O,{onClick:t[7]||(t[7]=o=>r(I).push({name:"TeamConfigRoleCreate"}))},{default:e(()=>[p(f(n.$trans("global.add",{attribute:n.$trans("team.config.role.role")})),1)]),_:1})]),default:e(()=>[(d(!0),Q(W,null,X(b.data,o=>(d(),c(N,{key:o.uuid},{default:e(()=>[s(T,{name:"name"},{default:e(()=>[p(f(o.label),1)]),_:2},1024),s(T,{name:"createdAt"},{default:e(()=>[p(f(o.createdAt.formatted),1)]),_:2},1024),s(T,{name:"action"},{default:e(()=>[o.isDefault?y("",!0):(d(),c(M,{key:0},{default:e(()=>[s(L,{icon:"fas fa-trash",onClick:ae=>r(l).emit("deleteItem",{uuid:r(v).params.uuid,moduleUuid:o.uuid})},{default:e(()=>[p(f(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{oe as default};
