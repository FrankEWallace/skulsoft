import{u as h,I as O,m as I,r as u,t as v,o as _,w as r,d as f,a as B,b as S,e as a,f as e,j as E,i as M,k as P,F as q,y as z,v as s,x as l}from"./app-Cvm44xuh.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={key:0,class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3"},Z={name:"LibraryBookIssueReturnForm"},ee=Object.assign(Z,{props:{bookCopies:{type:Array,required:!0}},emits:["refresh"],setup(w,{emit:k}){h();const C=k,n={number:"",returnDate:"",condition:"",returnStatus:"",libraryCharge:0,remarks:""},D="library/transaction/",p=O(D),V=I({conditions:[],returnStatuses:[]}),d=I({...n}),i=m=>{Object.assign(V,m)},T=()=>{C("refresh")};return(m,t)=>{const $=u("BaseInput"),L=u("DatePicker"),b=u("BaseSelect"),U=u("BaseTextarea"),R=u("FormAction");return _(),v(R,{"no-card":"","pre-requisites":!0,"pre-requisite-custom-url":"actionPreRequisite",onSetPreRequisites:i,"no-data-fetch":"",action:"returnBook","keep-adding":!1,"init-url":D,"init-form":n,form:d,"after-submit":T},{default:r(()=>[f("div",G,[f("div",J,[a($,{type:"text",modelValue:d.number,"onUpdate:modelValue":t[0]||(t[0]=o=>d.number=o),name:"number",label:m.$trans("library.book.props.number"),error:e(p).number,"onUpdate:error":t[1]||(t[1]=o=>e(p).number=o)},null,8,["modelValue","label","error"])]),f("div",K,[a(L,{modelValue:d.returnDate,"onUpdate:modelValue":t[2]||(t[2]=o=>d.returnDate=o),name:"returnDate",label:m.$trans("library.transaction.props.return_date"),"no-clear":"",error:e(p).returnDate,"onUpdate:error":t[3]||(t[3]=o=>e(p).returnDate=o)},null,8,["modelValue","label","error"])]),f("div",Q,[a(b,{name:"returnStatus",label:m.$trans("global.select",{attribute:m.$trans("library.transaction.props.return_status")}),modelValue:d.returnStatus,"onUpdate:modelValue":t[4]||(t[4]=o=>d.returnStatus=o),error:e(p).returnStatus,"onUpdate:error":t[5]||(t[5]=o=>e(p).returnStatus=o),options:V.returnStatuses},null,8,["label","modelValue","error","options"])]),f("div",W,[a($,{currency:"",modelValue:d.libraryCharge,"onUpdate:modelValue":t[6]||(t[6]=o=>d.libraryCharge=o),name:"libraryCharge",label:m.$trans("library.transaction.props.library_charge"),error:e(p).libraryCharge,"onUpdate:error":t[7]||(t[7]=o=>e(p).libraryCharge=o)},null,8,["modelValue","label","error"])]),d.returnStatus!="lost"?(_(),B("div",X,[a(b,{name:"condition",label:m.$trans("global.select",{attribute:m.$trans("library.book_condition.book_condition")}),modelValue:d.condition,"onUpdate:modelValue":t[8]||(t[8]=o=>d.condition=o),error:e(p).condition,"onUpdate:error":t[9]||(t[9]=o=>e(p).condition=o),"value-prop":"uuid","label-prop":"name",options:V.conditions},null,8,["label","modelValue","error","options"])])):S("",!0),f("div",Y,[a(U,{modelValue:d.remarks,"onUpdate:modelValue":t[10]||(t[10]=o=>d.remarks=o),name:"remarks",label:m.$trans("library.transaction.props.remarks"),error:e(p).remarks,"onUpdate:error":t[11]||(t[11]=o=>e(p).remarks=o)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),te={class:"space-y-2"},re={class:"space-y-4"},ae={key:1,class:"px-4 py-2"},oe={name:"LibraryTransactionShow"},se=Object.assign(oe,{setup(w){E();const k=h(),C=M(),n=P("$trans"),D=P("emitter"),p={},V="library/transaction/",d=[{key:"number",label:n("library.book_copy.props.number_short"),visibility:!0},{key:"title",label:n("library.book.props.title"),visibility:!0},{key:"author",label:n("library.book.props.author"),visibility:!0},{key:"price",label:n("library.book.props.price"),visibility:!0},{key:"condition",label:n("library.book.props.condition"),visibility:!0},{key:"returnDate",label:n("library.transaction.props.return_date"),visibility:!0}],i=I({...p}),T=m=>{Object.assign(i,m)};return(m,t)=>{const $=u("PageHeaderAction"),L=u("PageHeader"),b=u("ListItemView"),U=u("TextMuted"),R=u("ListContainerVertical"),o=u("BaseCard"),g=u("DataCell"),A=u("DataRow"),F=u("SimpleTable"),j=u("BaseAlert"),N=u("DetailLayoutVertical"),x=u("ShowItem"),H=u("ParentTransition");return _(),B(q,null,[a(L,{title:e(n)(e(k).meta.trans,{attribute:e(n)(e(k).meta.label)}),navs:[{label:e(n)("library.library"),path:"Library"},{label:e(n)("library.transaction.transaction"),path:"LibraryTransactionList"}]},{default:r(()=>[a($,{name:"LibraryTransaction",title:e(n)("library.transaction.transaction"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),a(H,{appear:"",visibility:!0},{default:r(()=>[a(x,{"init-url":V,uuid:e(k).params.uuid,onSetItem:T,onRedirectTo:t[1]||(t[1]=c=>e(C).push({name:"LibraryTransaction"}))},{default:r(()=>[i.uuid?(_(),v(N,{key:0},{detail:r(()=>[f("div",te,[a(o,{"no-padding":"","no-content-padding":""},{title:r(()=>[s(l(e(n)("library.transaction.transaction")),1)]),action:r(()=>t[2]||(t[2]=[])),default:r(()=>[a(R,null,{default:r(()=>[a(b,{label:e(n)("library.transaction.props.code_number_short")},{default:r(()=>[s(l(i.codeNumber),1)]),_:1},8,["label"]),a(b,{label:e(n)("library.transaction.props.to")},{default:r(()=>[s(l(i.to.label),1)]),_:1},8,["label"]),a(b,{label:e(n)("library.transaction.props.requester")},{default:r(()=>[s(l(i.requester.name)+" ",1),a(U,{block:""},{default:r(()=>[s(l(i.requester.contactNumber),1)]),_:1})]),_:1},8,["label"]),a(b,{label:e(n)("library.transaction.props.issue_date")},{default:r(()=>[s(l(i.issueDate.formatted),1)]),_:1},8,["label"]),a(b,{label:e(n)("library.transaction.props.due_date")},{default:r(()=>[s(l(i.dueDate.formatted),1)]),_:1},8,["label"]),a(b,{label:e(n)("library.transaction.props.remarks")},{default:r(()=>[s(l(i.remarks),1)]),_:1},8,["label"]),a(b,{label:e(n)("general.created_at")},{default:r(()=>[s(l(i.createdAt.formatted),1)]),_:1},8,["label"]),a(b,{label:e(n)("general.updated_at")},{default:r(()=>[s(l(i.updatedAt.formatted),1)]),_:1},8,["label"])]),_:1})]),_:1})])]),default:r(()=>[f("div",re,[a(o,{"no-padding":"","no-content-padding":""},{title:r(()=>[s(l(e(n)("library.transaction.props.details")),1)]),footer:r(()=>t[3]||(t[3]=[])),default:r(()=>[i.records.length>0?(_(),v(F,{key:0,header:d},{default:r(()=>[(_(!0),B(q,null,z(i.records,c=>(_(),v(A,{key:c.uuid},{default:r(()=>[a(g,{name:"number"},{default:r(()=>[s(l(c.copy.number),1)]),_:2},1024),a(g,{name:"title"},{default:r(()=>[s(l(c.copy.book.title),1)]),_:2},1024),a(g,{name:"author"},{default:r(()=>{var y;return[s(l(((y=c.copy.book.author)==null?void 0:y.name)||"-"),1)]}),_:2},1024),a(g,{name:"author"},{default:r(()=>{var y;return[s(l(((y=c.copy.book.price)==null?void 0:y.formatted)||"-"),1)]}),_:2},1024),a(g,{name:"condition"},{default:r(()=>{var y;return[s(l(((y=c.copy.condition)==null?void 0:y.name)||"-"),1)]}),_:2},1024),a(g,{name:"returnDate"},{default:r(()=>[s(l(c.returnDate.formatted),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):S("",!0),i.records.length===0?(_(),B("div",ae,[a(j,{design:"info",size:"xs"},{default:r(()=>[s(l(e(n)("general.errors.record_not_found")),1)]),_:1})])):S("",!0)]),_:1}),i.isReturned?S("",!0):(_(),v(o,{key:0},{title:r(()=>[s(l(e(n)("library.transaction.return")),1)]),default:r(()=>[a(ee,{"book-copies":i.records.map(c=>c.copy),uuid:e(k).params.uuid,onRefresh:t[0]||(t[0]=c=>e(D).emit("refreshItem"))},null,8,["book-copies","uuid"])]),_:1}))])]),_:1})):S("",!0)]),_:1},8,["uuid"])]),_:1})],64)}}});export{se as default};
