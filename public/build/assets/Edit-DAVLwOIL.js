import{u as I,i as F,I as O,m as B,q as E,r as m,t as v,o as c,w as p,d as i,e as d,f as s,H as M,b as U,K as H,k as j,p as K,A as R,a as C,B as A,v as L,x,F as N}from"./app-Cvm44xuh.js";import{_ as q,a as z}from"./Og-BJLiiJAC.js";const G={class:"grid w-full grid-cols-3 gap-y-2"},J={class:"col-span-3 sm:col-span-1"},Q={class:"mt-4 grid w-full grid-cols-1 gap-y-2"},W={class:"col-span-1"},X={class:"col-span-1"},Y={class:"col-span-1"},Z={name:"SitePageEditContent"},h=Object.assign(Z,{props:{page:{type:Object,default(){return{}}}},emits:["refresh"],setup(w,{emit:P}){I();const T=F(),_=P,u=w,f={name:"",title:"",subTitle:"",content:""},g="site/page/",e=O(g),o=B({...f}),y=()=>{_("refresh")};return E(()=>{Object.assign(f,{name:u.page.name,title:u.page.title,subTitle:u.page.subTitle,content:u.page.content}),Object.assign(o,f)}),(n,l)=>{const $=m("BaseInput"),b=m("MdEditor"),t=m("FormAction");return c(),v(t,{"no-card":"","no-data-fetch":"","button-padding":"",action:"update","keep-adding":!1,"stay-on":!0,"init-url":g,"init-form":f,form:o,"after-submit":y,onCancelled:l[8]||(l[8]=r=>s(T).push({name:"SitePageShow",params:{uuid:w.page.uuid}}))},{default:p(()=>[i("div",G,[i("div",J,[d($,{type:"text",modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=r=>o.name=r),name:"name",label:n.$trans("site.page.props.name"),error:s(e).name,"onUpdate:error":l[1]||(l[1]=r=>s(e).name=r)},null,8,["modelValue","label","error"])])]),i("div",Q,[i("div",W,[d($,{type:"text",modelValue:o.title,"onUpdate:modelValue":l[2]||(l[2]=r=>o.title=r),name:"title",label:n.$trans("site.page.props.title"),error:s(e).title,"onUpdate:error":l[3]||(l[3]=r=>s(e).title=r)},null,8,["modelValue","label","error"])]),i("div",X,[d($,{type:"text",modelValue:o.subTitle,"onUpdate:modelValue":l[4]||(l[4]=r=>o.subTitle=r),name:"subTitle",label:n.$trans("site.page.props.sub_title"),error:s(e).subTitle,"onUpdate:error":l[5]||(l[5]=r=>s(e).subTitle=r)},null,8,["modelValue","label","error"])]),i("div",Y,[d(b,{modelValue:o.content,"onUpdate:modelValue":l[6]||(l[6]=r=>o.content=r),error:s(e).content,"onUpdate:error":l[7]||(l[7]=r=>s(e).content=r)},null,8,["modelValue","error"])])])]),_:1},8,["form"])}}}),ee={class:"grid w-full grid-cols-1 gap-y-4"},te={class:"col-span-1"},oe={class:"col-span-1"},se={class:"col-span-1"},ae={class:"col-span-1"},ne={class:"col-span-1"},le={class:"col-span-1"},re={class:"col-span-1"},ie={name:"SitePageEditMeta"},de=Object.assign(ie,{props:{page:{type:Object,default(){return{}}}},emits:["refresh"],setup(w,{emit:P}){const T=I();F();const _=P,u=w,f={seo:{robots:!1,isPublic:!1,slug:"",metaTitle:"",metaDescription:"",metaKeywords:""},media:[],mediaUpdated:!1,mediaToken:M(),mediaHash:[]},g="site/page/",e=O(g),o=B({...f}),y=B({isLoaded:!T.params.uuid}),n=()=>{_("refresh")},l=()=>{o.mediaToken=M(),o.mediaHash=[]},$=()=>{Object.assign(f,{seo:{robots:u.page.seo.robots,isPublic:u.page.seo.isPublic,slug:u.page.seo.slug,metaTitle:u.page.seo.metaTitle,metaDescription:u.page.seo.metaDescription,metaKeywords:u.page.seo.metaKeywords},media:u.page.media,mediaToken:u.page.mediaToken}),Object.assign(o,H(f)),y.isLoaded=!0};return E(()=>{$()}),(b,t)=>{const r=m("BaseSwitch"),k=m("BaseInput"),S=m("BaseTextarea"),D=m("MediaUpload"),V=m("FormAction");return c(),v(V,{"no-card":"","no-data-fetch":"",action:"updateMeta","keep-adding":!1,"stay-on":!0,"init-url":g,"init-form":f,form:o,"after-submit":n,onResetMediaFiles:l},{default:p(()=>[i("div",ee,[i("div",te,[d(r,{modelValue:o.seo.robots,"onUpdate:modelValue":t[0]||(t[0]=a=>o.seo.robots=a),name:"robots",label:b.$trans("site.seo.robots"),error:s(e)["seo.robots"],"onUpdate:error":t[1]||(t[1]=a=>s(e)["seo.robots"]=a)},null,8,["modelValue","label","error"])]),i("div",oe,[d(r,{modelValue:o.seo.isPublic,"onUpdate:modelValue":t[2]||(t[2]=a=>o.seo.isPublic=a),name:"isPublic",label:b.$trans("site.seo.is_public"),error:s(e)["seo.isPublic"],"onUpdate:error":t[3]||(t[3]=a=>s(e)["seo.isPublic"]=a)},null,8,["modelValue","label","error"])]),i("div",se,[d(k,{type:"text",modelValue:o.seo.slug,"onUpdate:modelValue":t[4]||(t[4]=a=>o.seo.slug=a),name:"slug",label:b.$trans("site.seo.slug"),error:s(e)["seo.slug"],"onUpdate:error":t[5]||(t[5]=a=>s(e)["seo.slug"]=a)},null,8,["modelValue","label","error"])]),i("div",ae,[d(k,{type:"text",modelValue:o.seo.metaTitle,"onUpdate:modelValue":t[6]||(t[6]=a=>o.seo.metaTitle=a),name:"seoMetaTitle",label:b.$trans("site.seo.meta_title"),error:s(e)["seo.metaTitle"],"onUpdate:error":t[7]||(t[7]=a=>s(e)["seo.metaTitle"]=a)},null,8,["modelValue","label","error"])]),i("div",ne,[d(S,{rows:1,modelValue:o.seo.metaDescription,"onUpdate:modelValue":t[8]||(t[8]=a=>o.seo.metaDescription=a),name:"seoMetaDescription",label:b.$trans("site.seo.meta_description"),error:s(e)["seo.metaDescription"],"onUpdate:error":t[9]||(t[9]=a=>s(e)["seo.metaDescription"]=a)},null,8,["modelValue","label","error"])]),i("div",le,[d(S,{rows:1,modelValue:o.seo.metaKeywords,"onUpdate:modelValue":t[10]||(t[10]=a=>o.seo.metaKeywords=a),name:"seoMetaKeywords",label:b.$trans("site.seo.meta_keywords"),error:s(e)["seo.metaKeywords"],"onUpdate:error":t[11]||(t[11]=a=>s(e)["seo.metaKeywords"]=a)},null,8,["modelValue","label","error"])]),i("div",re,[y.isLoaded?(c(),v(D,{key:0,multiple:"",label:b.$trans("general.file"),module:"site_page",media:o.media,"media-token":o.mediaToken,onIsUpdated:t[12]||(t[12]=a=>o.mediaUpdated=!0),onSetHash:t[13]||(t[13]=a=>o.mediaHash.push(a))},null,8,["label","media","media-token"])):U("",!0)])])]),_:1},8,["form"])}}}),ue={class:"space-y-2"},me={class:"px-4 py-2"},pe={name:"SitePageEdit"},be=Object.assign(pe,{setup(w){const P=I(),T=F(),_=j("$trans");j("emitter");const u={uuid:""},f="site/page/",g=K(!1),e=B({...u}),o=y=>{Object.assign(e,y)};return(y,n)=>{const l=m("BaseButton"),$=m("PageHeaderAction"),b=m("PageHeader"),t=m("BaseCard"),r=m("DetailLayoutVertical"),k=m("ShowItem"),S=m("ParentTransition"),D=R("tooltip");return c(),C(N,null,[e.uuid?(c(),v(b,{key:0,title:e.title,navs:[{label:s(_)("site.site"),path:"Site"},{label:s(_)("site.page.page"),path:"SitePageList"}]},{default:p(()=>[d($,{name:"SitePage",title:s(_)("site.page.page"),actions:["list"]},{default:p(()=>[A((c(),v(l,{design:"white",onClick:n[0]||(n[0]=V=>s(T).push({name:"SitePageShow",params:{uuid:e.uuid}}))},{default:p(()=>n[7]||(n[7]=[i("i",{class:"fas fa-eye"},null,-1)])),_:1,__:[7]})),[[D,s(_)("general.preview")]])]),_:1},8,["title"])]),_:1},8,["title","navs"])):U("",!0),d(S,{appear:"",visibility:!0},{default:p(()=>[d(k,{"init-url":f,uuid:s(P).params.uuid,onSetItem:o,onRedirectTo:n[5]||(n[5]=V=>s(T).push({name:"SitePage"})),refresh:g.value,onRefreshed:n[6]||(n[6]=V=>g.value=!1)},{default:p(()=>[e.uuid?(c(),v(r,{key:0},{detail:p(()=>[i("div",ue,[d(t,null,{default:p(()=>[e.uuid?(c(),v(de,{key:0,page:e,onRefreshItem:n[1]||(n[1]=V=>g.value=!0)},null,8,["page"])):U("",!0)]),_:1}),d(t,{"no-padding":""},{title:p(()=>[L(x(s(_)("site.assets.custom_og")),1)]),default:p(()=>[e.uuid?(c(),v(z,{key:0,page:e,onRefreshItem:n[2]||(n[2]=V=>g.value=!0)},null,8,["page"])):U("",!0)]),_:1})])]),default:p(()=>[i("div",null,[d(t,{"no-padding":"","no-content-padding":""},{default:p(()=>[e.uuid?(c(),v(q,{key:0,page:e,onRefreshItem:n[3]||(n[3]=V=>g.value=!0)},null,8,["page"])):U("",!0),i("div",me,[e.uuid?(c(),v(h,{key:0,page:e,onRefreshItem:n[4]||(n[4]=V=>g.value=!0)},null,8,["page"])):U("",!0)])]),_:1})])]),_:1})):U("",!0)]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{be as default};
