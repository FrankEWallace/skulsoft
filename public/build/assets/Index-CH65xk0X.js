import{u as L,m as N,q as j,r,t as y,o as V,w as t,d as c,e,i as G,k as E,z as B,p as O,f as b,a as z,F as x,y as J,v as i,x as u,b as K}from"./app-Cvm44xuh.js";const Q={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},se={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(C,{emit:k}){L();const v=k,w=C,D={firstName:"",lastName:"",gender:"",contactNumber:"",email:"",birthStartDate:"",birthEndDate:"",startDate:"",endDate:"",address:""},n=N({...D}),g=N({genders:w.preRequisites.genders}),h=N({isLoaded:!0});return j(async()=>{h.isLoaded=!0}),(l,a)=>{const _=r("BaseInput"),m=r("BaseSelect"),d=r("DatePicker"),F=r("FilterForm");return V(),y(F,{"init-form":D,form:n,multiple:[],onHide:a[10]||(a[10]=s=>v("hide"))},{default:t(()=>[c("div",Q,[c("div",W,[e(_,{type:"text",modelValue:n.firstName,"onUpdate:modelValue":a[0]||(a[0]=s=>n.firstName=s),name:"firstName",label:l.$trans("contact.props.first_name")},null,8,["modelValue","label"])]),c("div",X,[e(_,{type:"text",modelValue:n.lastName,"onUpdate:modelValue":a[1]||(a[1]=s=>n.lastName=s),name:"lastName",label:l.$trans("contact.props.last_name")},null,8,["modelValue","label"])]),c("div",Y,[e(m,{modelValue:n.gender,"onUpdate:modelValue":a[2]||(a[2]=s=>n.gender=s),name:"gender",label:l.$trans("contact.props.gender"),options:g.genders},null,8,["modelValue","label","options"])]),c("div",Z,[e(_,{type:"text",modelValue:n.contactNumber,"onUpdate:modelValue":a[3]||(a[3]=s=>n.contactNumber=s),name:"contactNumber",label:l.$trans("contact.props.contact_number")},null,8,["modelValue","label"])]),c("div",ee,[e(_,{type:"text",modelValue:n.email,"onUpdate:modelValue":a[4]||(a[4]=s=>n.email=s),name:"email",label:l.$trans("contact.props.email")},null,8,["modelValue","label"])]),c("div",te,[e(d,{start:n.birthStartDate,"onUpdate:start":a[5]||(a[5]=s=>n.birthStartDate=s),end:n.birthEndDate,"onUpdate:end":a[6]||(a[6]=s=>n.birthEndDate=s),name:"birthDateBetween",as:"range",label:l.$trans("global.date_between",{attribute:l.$trans("contact.props.birth_date")})},null,8,["start","end","label"])]),c("div",ae,[e(d,{start:n.startDate,"onUpdate:start":a[7]||(a[7]=s=>n.startDate=s),end:n.endDate,"onUpdate:end":a[8]||(a[8]=s=>n.endDate=s),name:"dateBetween",as:"range",label:l.$trans("global.date_between",{attribute:l.$trans("general.created_at")})},null,8,["start","end","label"])]),c("div",ne,[e(_,{type:"text",modelValue:n.address,"onUpdate:modelValue":a[9]||(a[9]=s=>n.address=s),name:"address",label:l.$trans("contact.props.address.address")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},oe={name:"GuardianList"},re=Object.assign(oe,{setup(C){const k=G(),v=E("emitter");let w=["filter"];B("guardian:config")&&w.unshift("config");let D=[];B("guardian:export")&&(D=["print","pdf","excel"]);const n="guardian/",g=O(!1),h=N({genders:[]}),l=N({}),a=m=>{Object.assign(l,m)},_=m=>{Object.assign(h,m)};return(m,d)=>{const F=r("PageHeaderAction"),s=r("PageHeader"),I=r("ParentTransition"),p=r("DataCell"),R=r("TextMuted"),U=r("FloatingMenuItem"),T=r("FloatingMenu"),M=r("DataRow"),A=r("DataTable"),H=r("ListItem");return V(),y(H,{"pre-requisites":!0,onSetPreRequisites:_,"init-url":n,onSetItems:a},{header:t(()=>[e(s,{title:m.$trans("guardian.guardian"),navs:[{label:m.$trans("guardian.guardian"),path:"Guardian"}]},{default:t(()=>[e(F,{url:"guardians/",name:"Guardian",title:m.$trans("guardian.guardian"),actions:b(w),"dropdown-actions":b(D),headers:l.headers,onToggleFilter:d[0]||(d[0]=o=>g.value=!g.value)},null,8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"])]),filter:t(()=>[e(I,{appear:"",visibility:g.value},{default:t(()=>[e(se,{"pre-requisites":h,onRefresh:d[1]||(d[1]=o=>b(v).emit("listItems")),onHide:d[2]||(d[2]=o=>g.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:t(()=>[e(I,{appear:"",visibility:!0},{default:t(()=>[e(A,{header:l.headers,meta:l.meta,module:"guardian",onRefresh:d[3]||(d[3]=o=>b(v).emit("listItems"))},{actionButton:t(()=>d[4]||(d[4]=[])),default:t(()=>[(V(!0),z(x,null,J(l.data,o=>(V(),y(M,{key:o.uuid,onDoubleClick:f=>b(k).push({name:"GuardianShow",params:{uuid:o.uuid}})},{default:t(()=>[e(p,{name:"name"},{default:t(()=>[i(u(o.name),1)]),_:2},1024),e(p,{name:"gender"},{default:t(()=>[i(u(o.gender.label),1)]),_:2},1024),e(p,{name:"birthDate"},{default:t(()=>[i(u(o.birthDate.formatted),1)]),_:2},1024),e(p,{name:"contactNumber"},{default:t(()=>[i(u(o.contactNumber),1)]),_:2},1024),e(p,{name:"relation"},{default:t(()=>[i(u(o.relation.label),1)]),_:2},1024),e(p,{name:"studentName"},{default:t(()=>[i(u(o.studentName)+" ",1),e(R,{block:""},{default:t(()=>{var f,$;return[i(u((($=(f=o.student)==null?void 0:f.admission)==null?void 0:$.codeNumber)||"-"),1)]}),_:2},1024)]),_:2},1024),e(p,{name:"course"},{default:t(()=>{var f,$,P;return[i(u(((P=($=(f=o.student)==null?void 0:f.batch)==null?void 0:$.course)==null?void 0:P.name)||"-")+" ",1),e(R,{block:""},{default:t(()=>{var S,q;return[i(u(((q=(S=o.student)==null?void 0:S.batch)==null?void 0:q.name)||"-"),1)]}),_:2},1024)]}),_:2},1024),e(p,{name:"address"},{default:t(()=>[i(u(o.address),1)]),_:2},1024),e(p,{name:"createdAt"},{default:t(()=>[i(u(o.createdAt.formatted),1)]),_:2},1024),e(p,{name:"action"},{default:t(()=>[e(T,null,{default:t(()=>[e(U,{icon:"fas fa-arrow-circle-right",onClick:f=>b(k).push({name:"GuardianShow",params:{uuid:o.uuid}})},{default:t(()=>[i(u(m.$trans("general.show")),1)]),_:2},1032,["onClick"]),b(B)("guardian:delete")?(V(),y(U,{key:0,icon:"fas fa-trash",onClick:f=>b(v).emit("deleteItem",{uuid:o.uuid})},{default:t(()=>[i(u(m.$trans("general.delete")),1)]),_:2},1032,["onClick"])):K("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{re as default};
