import{u as M,m as y,q as N,r as o,t as g,o as u,w as e,d as k,e as t,i as S,k as U,z as D,p as q,f as r,a as F,F as I,y as h,v as f,x as d,b as E}from"./app-Cvm44xuh.js";const O={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},G={__name:"Filter",emits:["hide"],setup(P,{emit:p}){M();const v=p,_={subject:"",startDate:"",endDate:""},l=y({..._}),$=y({isLoaded:!0});return N(async()=>{$.isLoaded=!0}),(c,n)=>{const w=o("BaseInput"),s=o("DatePicker"),i=o("FilterForm");return u(),g(i,{"init-form":_,form:l,multiple:[],onHide:n[3]||(n[3]=m=>v("hide"))},{default:e(()=>[k("div",O,[k("div",z,[t(w,{type:"text",modelValue:l.subject,"onUpdate:modelValue":n[0]||(n[0]=m=>l.subject=m),name:"subject",label:c.$trans("communication.email.props.subject")},null,8,["modelValue","label"])]),k("div",x,[t(s,{start:l.startDate,"onUpdate:start":n[1]||(n[1]=m=>l.startDate=m),end:l.endDate,"onUpdate:end":n[2]||(n[2]=m=>l.endDate=m),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},J={name:"CommunicationEmailList"},Q=Object.assign(J,{setup(P){const p=S(),v=U("emitter");let _=["filter"];D("email:send")&&_.unshift("new");let l=[];D("email:read")&&(l=["print","pdf","excel"]);const $="communication/email/",c=q(!1),n=y({}),w=s=>{Object.assign(n,s)};return(s,i)=>{const m=o("PageHeaderAction"),T=o("PageHeader"),B=o("ParentTransition"),b=o("DataCell"),j=o("FloatingMenuItem"),V=o("FloatingMenu"),A=o("DataRow"),H=o("BaseButton"),L=o("DataTable"),R=o("ListItem");return u(),g(R,{"init-url":$,"additional-query":{},onSetItems:w},{header:e(()=>[t(T,{title:s.$trans("communication.email.email"),navs:[{label:s.$trans("communication.communication"),path:"Communication"}]},{default:e(()=>[t(m,{url:"communication/emails/",name:"CommunicationEmail",title:s.$trans("communication.email.email"),actions:r(_),"dropdown-actions":r(l),"config-path":"CommunicationConfig",onToggleFilter:i[0]||(i[0]=a=>c.value=!c.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(B,{appear:"",visibility:c.value},{default:e(()=>[t(G,{onRefresh:i[1]||(i[1]=a=>r(v).emit("listItems")),onHide:i[2]||(i[2]=a=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(B,{appear:"",visibility:!0},{default:e(()=>[t(L,{header:n.headers,meta:n.meta,module:"communication.email",onRefresh:i[4]||(i[4]=a=>r(v).emit("listItems"))},{actionButton:e(()=>[r(D)("email:send")?(u(),g(H,{key:0,onClick:i[3]||(i[3]=a=>r(p).push({name:"CommunicationEmailNew"}))},{default:e(()=>[f(d(s.$trans("global.new",{attribute:s.$trans("communication.email.email")})),1)]),_:1})):E("",!0)]),default:e(()=>[(u(!0),F(I,null,h(n.data,a=>(u(),g(A,{key:a.uuid,onDoubleClick:C=>r(p).push({name:"CommunicationEmailShow",params:{uuid:a.uuid}})},{default:e(()=>[t(b,{name:"subject"},{default:e(()=>[f(d(a.subjectExcerpt),1)]),_:2},1024),t(b,{name:"audience"},{default:e(()=>[(u(!0),F(I,null,h(a.audienceTypes,C=>(u(),F("div",null,d(C),1))),256))]),_:2},1024),t(b,{name:"recipientCount"},{default:e(()=>[f(d(a.recipientCount),1)]),_:2},1024),t(b,{name:"createdAt"},{default:e(()=>[f(d(a.createdAt.formatted),1)]),_:2},1024),t(b,{name:"action"},{default:e(()=>[t(V,null,{default:e(()=>[t(j,{icon:"fas fa-arrow-circle-right",onClick:C=>r(p).push({name:"CommunicationEmailShow",params:{uuid:a.uuid}})},{default:e(()=>[f(d(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),r(D)("email:send")?(u(),g(j,{key:0,icon:"fas fa-copy",onClick:C=>r(p).push({name:"CommunicationEmailDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[f(d(s.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Q as default};
