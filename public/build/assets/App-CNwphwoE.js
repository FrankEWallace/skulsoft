import{a as s,o as t,d as e,i as V,j as H,k as q,l as Z,c as S,m as ne,p as O,q as K,s as ae,r as u,t as D,w as x,b as r,v as P,x as p,F as w,y as oe,n as U,e as l,f as a,u as Q,g as v,z as E,A as re,B as F,C as G,D as ie,E as le,G as ce}from"./app-Cvm44xuh.js";function de(M,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Zm0 5.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function ue(M,m,d){window.Echo&&window.Echo.private(M).listen("."+m,f=>{d(f)})}const pe={class:"space-y-2"},me={key:1,class:"text-sm text-gray-800 dark:text-gray-400"},he={"aria-label":"Progress"},fe={role:"list",class:"mt-4 overflow-hidden"},_e={key:0,class:"absolute left-4 top-4 -ml-px mt-0.5 h-full w-0.5 bg-primary dark:bg-dark-body","aria-hidden":"true"},ye=["onClick"],ge={class:"ml-4 flex min-w-0 flex-col"},ve={class:"text-sm font-medium dark:text-gray-400"},be={key:0,class:"text-sm font-medium"},ke={class:"text-sm text-gray-500"},xe={class:"mt-2 flex justify-end"},we={key:0,class:"absolute left-4 top-4 -ml-px mt-0.5 h-full w-0.5 bg-gray-300","aria-hidden":"true"},Se=["onClick"],Ce={class:"ml-4 flex min-w-0 flex-col"},$e={class:"text-sm font-medium text-gray-800 dark:text-gray-200"},ze={key:0,class:"text-sm font-medium"},Ae={class:"text-sm text-gray-500"},Be={class:"mt-2 flex justify-end"},Me={key:0,class:"absolute left-4 top-4 -ml-px mt-0.5 h-full w-0.5 bg-gray-300","aria-hidden":"true"},Pe=["onClick"],Te={class:"ml-4 flex min-w-0 flex-col"},je={class:"text-sm font-medium text-gray-500"},Le={key:0,class:"text-sm font-medium"},De={class:"text-sm text-gray-500"},Ue={class:"mt-2 flex justify-end"},Ne={key:2},We={key:0,class:"mt-4 text-sm text-gray-800 dark:text-gray-400"},He={key:3},Re={key:0,class:"mt-4 text-sm text-gray-800 dark:text-gray-400"},Ee={name:"SetupWizard"},Fe=Object.assign(Ee,{setup(M){const m=V(),d=H(),f=q("emitter");Z("profile.name");const C=S(()=>c.steps.every(i=>i.isCompleted)),h=O(null),b=O(!1),c=ne({header:"",footer:"",completed:"",steps:[]}),k=i=>{h.value=i},A=async()=>{b.value=!0,await d.dispatch("setup/wizard/getSteps").then(i=>{b.value=!1,Object.assign(c,i),h.value=c.steps.find(g=>!g.isCompleted)}).catch(i=>{b.value=!1})},_=async()=>{await d.dispatch("config/store",{form:{type:"system",showSetupWizard:!1}}).then(i=>{d.dispatch("config/get"),m.push({name:"Dashboard"})}).catch(i=>{})};return K(async()=>{await A(),f.on("refreshSetupWizard",()=>{A()})}),ae(()=>{f.all.delete("refreshSetupWizard")}),(i,g)=>{const T=u("BaseAlert"),$=u("BaseButton"),j=u("BaseCard");return t(),D(j,{"is-loading":b.value},{title:x(()=>[P(p(i.$trans("config.system.props.setup_wizard")),1)]),action:x(()=>[e("i",{class:"fas fa-times fa-lg text-gray-500 cursor-pointer",onClick:_})]),default:x(()=>[e("div",pe,[c.steps.length==0?(t(),D(T,{key:0,size:"xs",design:"info"},{default:x(()=>[P(p(i.$trans("config.system.setup_wizard_not_available")),1)]),_:1})):r("",!0),c.header?(t(),s("p",me,p(c.header),1)):r("",!0),e("nav",he,[e("ol",fe,[(t(!0),s(w,null,oe(c.steps,(o,z)=>{var N,W,y,n;return t(),s("li",{key:o.name,class:U([z!==c.steps.length-1?"pb-10":"","relative"])},[o.isCompleted?(t(),s(w,{key:0},[z!==c.steps.length-1?(t(),s("div",_e)):r("",!0),e("span",{onClick:B=>k(o),class:"group relative flex items-center cursor-pointer"},[g[0]||(g[0]=e("span",{class:"flex h-9 items-center"},[e("span",{class:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full bg-primary dark:bg-dark-body group-hover:bg-primary dark:group-hover:bg-dark-body"},[e("i",{class:"fas fa-check text-white"})])],-1)),e("span",ge,[e("span",ve,p(o.title),1),o.name==((N=h.value)==null?void 0:N.name)?(t(),s(w,{key:0},[o.summary?(t(),s("span",be,p(o.summary),1)):r("",!0),e("span",ke,p(o.description),1),e("div",xe,[l($,{size:"xs",onClick:B=>a(m).push({name:o.route})},{default:x(()=>[P(p(i.$trans("general.proceed")),1)]),_:2},1032,["onClick"])])],64)):r("",!0)])],8,ye)],64)):o.name==((W=h.value)==null?void 0:W.name)?(t(),s(w,{key:1},[z!==c.steps.length-1?(t(),s("div",we)):r("",!0),e("span",{onClick:B=>k(o),class:"cursor-pointer group relative flex items-start","aria-current":"step"},[g[1]||(g[1]=e("span",{class:"flex h-9 items-center","aria-hidden":"true"},[e("span",{class:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-primary dark:border-dark-body bg-white"},[e("span",{class:"h-2.5 w-2.5 rounded-full bg-primary"})])],-1)),e("span",Ce,[e("span",$e,p(o.title),1),o.name==((y=h.value)==null?void 0:y.name)?(t(),s(w,{key:0},[o.summary?(t(),s("span",ze,p(o.summary),1)):r("",!0),e("span",Ae,p(o.description),1),e("div",Be,[l($,{size:"xs",onClick:B=>a(m).push({name:o.route})},{default:x(()=>[P(p(i.$trans("general.proceed")),1)]),_:2},1032,["onClick"])])],64)):r("",!0)])],8,Se)],64)):(t(),s(w,{key:2},[z!==c.steps.length-1?(t(),s("div",Me)):r("",!0),e("span",{onClick:B=>k(o),class:"cursor-pointer group relative flex items-center"},[g[2]||(g[2]=e("span",{class:"flex h-9 items-center","aria-hidden":"true"},[e("span",{class:"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-gray-300 bg-white group-hover:border-gray-400"},[e("span",{class:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-gray-300"})])],-1)),e("span",Te,[e("span",je,p(o.title),1),o.name==((n=h.value)==null?void 0:n.name)?(t(),s(w,{key:0},[o.summary?(t(),s("span",Le,p(o.summary),1)):r("",!0),e("span",De,p(o.description),1),e("div",Ue,[l($,{size:"xs",onClick:B=>a(m).push({name:o.route})},{default:x(()=>[P(p(i.$trans("general.proceed")),1)]),_:2},1032,["onClick"])])],64)):r("",!0)])],8,Pe)],64))],2)}),128))])]),C.value?(t(),s("div",Ne,[c.completed?(t(),s("p",We,p(c.completed),1)):r("",!0),l($,{block:"",size:"sm",onClick:_,class:"mt-2"},{default:x(()=>[P(p(i.$trans("global.hide",{attribute:i.$trans("config.system.props.setup_wizard")})),1)]),_:1})])):(t(),s("div",He,[c.footer?(t(),s("p",Re,p(c.footer),1)):r("",!0)]))])]),_:1},8,["is-loading"])}}}),Oe={class:"hidden lg:flex lg:shrink-0"},Ve={class:"scroller-thin-y scroller-hidden flex h-0 flex-1 flex-col overflow-x-hidden"},qe={class:"mt-6 px-0"},Ze={__name:"AppSidebar",setup(M){const m=H(),d=S(()=>m.getters["layout/getSidebarType"]),f=S(()=>d.value==="mini"),C=S(()=>d.value==="full"),h=S(()=>d.value==="pinned");S(()=>C.value||h.value);const b=()=>{h.value||m.dispatch("layout/setSidebarType","full")},c=()=>{h.value||m.dispatch("layout/setSidebarType","mini")};return(k,A)=>{const _=u("MobileSidebar"),i=u("AppNavigation");return t(),s(w,null,[l(_),e("div",Oe,[e("div",{onMouseover:b,onMouseleave:c,class:U(["border-primary bg-primary dark:bg-dark-header flex flex-col border-r pb-4 pt-5 transition-all duration-200 ease-out dark:border-gray-700",{"absolute left-0 top-0 z-40 h-full":!h.value,"w-16":f.value,"w-64":C.value||h.value}])},[e("div",Ve,[e("nav",qe,[l(i)])])],34)])],64)}}},Ke={class:"dark:bg-dark-header relative z-10 flex h-16 shrink-0 justify-between bg-black dark:border-b dark:border-gray-700"},Qe={class:"flex"},Ge={class:"flex items-center"},Ie=["src"],Je=["src"],Xe={key:0,class:"far fa-circle h-6 w-6","aria-hidden":"true"},Ye={key:1,class:"fas fa-dot-circle h-6 w-6","aria-hidden":"true"},et={class:"flex items-center justify-between space-x-4 px-4"},tt={key:5},st={key:6},nt={key:7,class:"hidden sm:block"},at={class:"flex items-center"},ot={__name:"AppHeader",setup(M){const m=Q(),d=V(),f=H(),C=v("isImpersonating").value,h=E("config:store"),b=v("assets.logoLight"),c=v("layout.display").value=="dark"?v("assets.iconLight"):v("assets.icon"),k=v("system.mode"),A=v("system.enableMaintenanceMode"),_=S(()=>f.getters["layout/getSidebarType"]==="pinned"),i=v("chat.enableChat").value,g=v("feature.enablePost").value,T=v("employee.enableQrCodeAttendance").value,$=y=>{f.dispatch("layout/setMobileSidebar",y)},j=y=>{f.dispatch("layout/setUserLayout",y)},o=()=>{let y=_.value?"mini":"pinned";j({sidebar:y})},z=async y=>{await f.dispatch("auth/user/unimpersonate").then(n=>{window.open("/app","_self")}).catch(n=>{})},N=q("keySearch"),W=()=>{N.openSearch()};return(y,n)=>{const B=u("BaseBadge"),I=u("TimesheetClock"),J=u("StudentTimesheetClock"),X=u("PeriodSelection"),Y=u("SessionWisePeriodSelection"),ee=u("TeamSelection"),te=u("router-link"),se=u("ProfileDropdown"),R=re("tooltip");return t(),s("div",Ke,[e("div",Qe,[e("div",Ge,[e("img",{src:a(b),class:"ml-4 mr-2 hidden h-12 sm:block"},null,8,Ie),e("img",{src:a(c),class:"mx-2 h-12 sm:hidden"},null,8,Je),F((t(),s("button",{type:"button",class:"hidden h-full w-full px-4 text-gray-500 focus:outline-none lg:block",onClick:o},[n[6]||(n[6]=e("span",{class:"sr-only"},"Pinned Sidebar",-1)),_.value?(t(),s("i",Ye)):(t(),s("i",Xe))])),[[R,y.$trans("global.toggle",{attribute:y.$trans("general.sidebar")})]]),e("button",{type:"button",class:"h-full w-full px-2 text-gray-500 focus:outline-none sm:px-4 lg:hidden",onClick:n[0]||(n[0]=L=>$(!0))},[n[7]||(n[7]=e("span",{class:"sr-only"},"Open Mobile Sidebar",-1)),l(a(de),{class:"h-6 w-6","aria-hidden":"true"})]),a(T)&&a(G)(["admin","attendance-assistant"],"any")?(t(),s("span",{key:0,onClick:n[2]||(n[2]=L=>a(d).push({name:"AttendanceAssistant"})),class:"cursor-pointer"},[e("i",{class:"far fa-clock text-white",onClick:n[1]||(n[1]=L=>a(d).push({name:"AttendanceAssistant"}))})])):r("",!0),a(k)?r("",!0):(t(),D(B,{key:1,class:"hidden sm:block ml-2",design:"danger",label:y.$trans("general.demo")},null,8,["label"]))])]),e("div",et,[l(I),l(J),a(v)("academic.periodSelection").value=="period_wise"?(t(),D(X,{key:0})):r("",!0),a(v)("academic.periodSelection").value=="session_wise"?(t(),D(Y,{key:1})):r("",!0),l(ee),a(i)&&a(E)("chat:access")?(t(),s("span",{key:2,class:"cursor-pointer",onClick:n[3]||(n[3]=L=>a(d).push({name:"Chat"}))},n[8]||(n[8]=[e("i",{class:"far fa-message text-white"},null,-1)]))):r("",!0),a(g)&&a(E)("post:read")&&a(m).name!=="Home"?(t(),s("span",{key:3,class:"text-white cursor-pointer",onClick:n[4]||(n[4]=L=>a(d).push({name:"Home"}))},n[9]||(n[9]=[e("i",{class:"fas fa-house-user"},null,-1)]))):r("",!0),a(g)&&a(m).name!=="Dashboard"&&a(m).name=="Home"?(t(),s("span",{key:4,class:"text-white cursor-pointer",onClick:n[5]||(n[5]=L=>a(d).push({name:"Dashboard"}))},n[10]||(n[10]=[e("i",{class:"fas fa-home"},null,-1)]))):r("",!0),a(h)?(t(),s("div",tt,[l(te,{to:{name:"Config"}},{default:x(()=>n[11]||(n[11]=[e("i",{class:"fas fa-cog text-white"},null,-1)])),_:1,__:[11]})])):r("",!0),a(C)?(t(),s("div",st,[F(e("i",{class:"fas fa-circle text-warning cursor-pointer h-4 w-4",onClick:z},null,512),[[R,y.$trans("user.unimpersonate")]])])):r("",!0),a(A)?F((t(),s("div",nt,n[12]||(n[12]=[e("i",{class:"fas fa-circle text-danger h-4 w-4"},null,-1)]))),[[R,y.$trans("general.under_maintenance")]]):r("",!0),e("button",{onClick:W,class:"text-white sm:hidden"},n[13]||(n[13]=[e("i",{class:"fas fa-search"},null,-1)])),e("div",at,[l(se)])])])}}},rt={class:"dark:bg-dark-body relative flex h-screen overflow-hidden bg-gray-200"},it={key:0,class:"h-screen flex-0 w-1/3 bg-white dark:bg-dark-header"},lt={class:"scroller-thin-y scroller-hidden h-screen overflow-x-hidden"},dt={__name:"App",setup(M){const m=H(),d=Q(),f=O(null);ce("keySearch",{openSearch:()=>{var _;return(_=f.value)==null?void 0:_.openSearch()},closeSearch:()=>{var _;return(_=f.value)==null?void 0:_.closeSearch()}});const C=v("system.showSetupWizard"),h=S(()=>m.getters["layout/getSidebarType"]==="pinned"),b=S(()=>!d.meta.noPadding),k=`users.${Z("uuid").value}`;K(()=>{ue(k,"test.event",_=>{var i=new Audio("/notification.mp3");i.play()})}),ie(()=>{window.Echo.private(k).stopListening("test.event")});const{screenSize:A}=le();return(_,i)=>{const g=u("NotificationBar"),T=u("router-view"),$=u("FooterCredit"),j=u("ReLogin"),o=u("KeySearch"),z=u("UserScope");return t(),s(w,null,[l(g,{type:"app"}),e("div",rt,[l(Ze),e("div",{class:U(["flex w-0 flex-1 flex-col overflow-hidden",{"lg:ml-16":!h.value}])},[l(ot),e("main",{class:U(["scroller-thin-y scroller-hidden relative z-0 flex-1 focus:outline-none",{"overflow-y-auto":a(d).query.view!="board","overflow-y-hidden":a(d).query.view=="board"}])},[e("div",{class:U(["space-y-4",{"py-4 lg:px-4":b.value}])},[l(T)],2),l($)],2)],2),!a(A).small&&a(C)&&a(G)("admin")?(t(),s("div",it,[e("div",lt,[l(Fe)])])):r("",!0)]),l(j),l(o,{ref_key:"keySearchRef",ref:f},null,512),l(z)],64)}}};export{dt as default};
