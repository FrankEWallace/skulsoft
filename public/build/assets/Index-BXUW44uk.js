import{u as M,m as F,q as N,r as o,t as g,o as m,w as t,d as $,e,i as S,k as U,z as h,p as q,f as l,a as k,F as B,y as j,v as f,x as p,b as I}from"./app-Cvm44xuh.js";const E={class:"grid grid-cols-3 gap-6"},O={class:"col-span-3 sm:col-span-1"},z={class:"col-span-3 sm:col-span-1"},x={__name:"Filter",emits:["hide"],setup(P,{emit:d}){M();const v=d,_={subject:"",startDate:"",endDate:""},r=F({..._}),C=F({isLoaded:!0});return N(async()=>{C.isLoaded=!0}),(c,n)=>{const D=o("BaseInput"),i=o("DatePicker"),s=o("FilterForm");return m(),g(s,{"init-form":_,form:r,multiple:[],onHide:n[3]||(n[3]=u=>v("hide"))},{default:t(()=>[$("div",E,[$("div",O,[e(D,{type:"text",modelValue:r.subject,"onUpdate:modelValue":n[0]||(n[0]=u=>r.subject=u),name:"subject",label:c.$trans("communication.whatsapp.props.subject")},null,8,["modelValue","label"])]),$("div",z,[e(i,{start:r.startDate,"onUpdate:start":n[1]||(n[1]=u=>r.startDate=u),end:r.endDate,"onUpdate:end":n[2]||(n[2]=u=>r.endDate=u),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},G={name:"CommunicationWhatsAppList"},K=Object.assign(G,{setup(P){const d=S(),v=U("emitter");let _=["filter"];h("whatsapp:send")&&_.unshift("new");let r=[];h("whatsapp:read")&&(r=["print","pdf","excel"]);const C="communication/whatsapp/",c=q(!1),n=F({}),D=i=>{Object.assign(n,i)};return(i,s)=>{const u=o("PageHeaderAction"),L=o("PageHeader"),y=o("ParentTransition"),b=o("DataCell"),A=o("FloatingMenuItem"),T=o("FloatingMenu"),V=o("DataRow"),H=o("BaseButton"),R=o("DataTable"),W=o("ListItem");return m(),g(W,{"init-url":C,"additional-query":{},onSetItems:D},{header:t(()=>[e(L,{title:i.$trans("communication.whatsapp.whatsapp"),navs:[{label:i.$trans("communication.communication"),path:"Communication"}]},{default:t(()=>[e(u,{url:"communication/whatsapp/",name:"CommunicationWhatsApp",title:i.$trans("communication.whatsapp.whatsapp"),actions:l(_),"dropdown-actions":l(r),"config-path":"CommunicationConfig",onToggleFilter:s[0]||(s[0]=a=>c.value=!c.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[e(y,{appear:"",visibility:c.value},{default:t(()=>[e(x,{onRefresh:s[1]||(s[1]=a=>l(v).emit("listItems")),onHide:s[2]||(s[2]=a=>c.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[e(y,{appear:"",visibility:!0},{default:t(()=>[e(R,{header:n.headers,meta:n.meta,module:"communication.whatsapp",onRefresh:s[4]||(s[4]=a=>l(v).emit("listItems"))},{actionButton:t(()=>[l(h)("whatsapp:send")?(m(),g(H,{key:0,onClick:s[3]||(s[3]=a=>l(d).push({name:"CommunicationWhatsAppNew"}))},{default:t(()=>[f(p(i.$trans("global.new",{attribute:i.$trans("communication.whatsapp.whatsapp")})),1)]),_:1})):I("",!0)]),default:t(()=>[(m(!0),k(B,null,j(n.data,a=>(m(),g(V,{key:a.uuid,onDoubleClick:w=>l(d).push({name:"CommunicationWhatsAppShow",params:{uuid:a.uuid}})},{default:t(()=>[e(b,{name:"subject"},{default:t(()=>[f(p(a.subjectExcerpt),1)]),_:2},1024),e(b,{name:"audience"},{default:t(()=>[(m(!0),k(B,null,j(a.audienceTypes,w=>(m(),k("div",null,p(w),1))),256))]),_:2},1024),e(b,{name:"recipientCount"},{default:t(()=>[f(p(a.recipientCount),1)]),_:2},1024),e(b,{name:"createdAt"},{default:t(()=>[f(p(a.createdAt.formatted),1)]),_:2},1024),e(b,{name:"action"},{default:t(()=>[e(T,null,{default:t(()=>[e(A,{icon:"fas fa-arrow-circle-right",onClick:w=>l(d).push({name:"CommunicationWhatsAppShow",params:{uuid:a.uuid}})},{default:t(()=>[f(p(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(h)("whatsapp:send")?(m(),g(A,{key:0,icon:"fas fa-copy",onClick:w=>l(d).push({name:"CommunicationWhatsAppDuplicate",params:{uuid:a.uuid}})},{default:t(()=>[f(p(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):I("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{K as default};
