import{u as O,m as V,q as G,r as l,t as f,o as s,w as t,d as m,e as a,b as C,i as J,k as K,z as k,p as Q,f as o,C as W,a as w,F as P,y as N,x as i,h as X,v as d}from"./app-Cvm44xuh.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ne={__name:"Filter",emits:["hide"],setup(x,{emit:v}){const y=O(),D=v,A={codeNumber:"",types:[],startDate:"",endDate:""},_=V({...A}),b=V({types:[],isLoaded:!y.query.types});return G(async()=>{b.types=y.query.types?y.query.types.split(","):[],b.isLoaded=!0}),(c,p)=>{const B=l("BaseInput"),F=l("BaseSelectSearch"),n=l("DatePicker"),r=l("FilterForm");return s(),f(r,{"init-form":A,form:_,multiple:["types","batches"],onHide:p[4]||(p[4]=g=>D("hide"))},{default:t(()=>[m("div",Y,[m("div",Z,[a(B,{type:"text",modelValue:_.codeNumber,"onUpdate:modelValue":p[0]||(p[0]=g=>_.codeNumber=g),name:"codeNumber",label:c.$trans("communication.announcement.props.code_number")},null,8,["modelValue","label"])]),m("div",ee,[b.isLoaded?(s(),f(F,{key:0,multiple:"",name:"types",label:c.$trans("global.select",{attribute:c.$trans("communication.announcement.type.type")}),modelValue:_.types,"onUpdate:modelValue":p[1]||(p[1]=g=>_.types=g),"value-prop":"uuid","init-search":b.types,"search-action":"option/list","additional-search-query":{type:"announcement_type"}},null,8,["label","modelValue","init-search"])):C("",!0)]),m("div",te,[a(n,{start:_.startDate,"onUpdate:start":p[2]||(p[2]=g=>_.startDate=g),end:_.endDate,"onUpdate:end":p[3]||(p[3]=g=>_.endDate=g),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},ae={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},oe=["onClick"],ie={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},se={class:"flex items-center justify-between"},le={class:"font-medium"},ue={class:"mt-2 flex justify-between"},re={class:"text-sm"},me={class:"mt-2 text-xs"},ce={class:"text-xl font-semibold"},de={key:0,class:"fas fa-thumbtack"},pe={name:"CommunicationAnnouncementList"},_e=Object.assign(pe,{setup(x){const v=J(),y=K("emitter");let D=["filter"];k("communication:config")&&D.push("config"),k("announcement:create")&&D.unshift("create");let A=[];k("announcement:export")&&(A=["print","pdf","excel"]);const _="communication/announcement/",b=Q(!1),c=V({}),p=n=>{Object.assign(c,n)},B=async n=>{y.emit("actionItem",{uuid:n.uuid,action:"pin",confirmation:!0})},F=async n=>{y.emit("actionItem",{uuid:n.uuid,action:"unpin",confirmation:!0})};return(n,r)=>{const g=l("PageHeaderAction"),L=l("PageHeader"),I=l("ParentTransition"),T=l("CardView"),M=l("Pagination"),R=l("CardList"),h=l("DataCell"),q=l("TextMuted"),$=l("FloatingMenuItem"),H=l("FloatingMenu"),U=l("DataRow"),j=l("BaseButton"),E=l("DataTable"),z=l("ListItem");return s(),f(z,{"init-url":_,"additional-query":{},onSetItems:p},{header:t(()=>[a(L,{title:n.$trans("communication.announcement.announcement"),navs:[{label:n.$trans("communication.communication"),path:"Communication"}]},{default:t(()=>[a(g,{url:"communication/announcements/",name:"CommunicationAnnouncement",title:n.$trans("communication.announcement.announcement"),actions:o(D),"dropdown-actions":o(A),"config-path":"CommunicationConfig",onToggleFilter:r[0]||(r[0]=e=>b.value=!b.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[a(I,{appear:"",visibility:b.value},{default:t(()=>[a(ne,{onRefresh:r[1]||(r[1]=e=>o(y).emit("listItems")),onHide:r[2]||(r[2]=e=>b.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[o(W)(["student","guardian"],"any")?(s(),f(I,{key:0,appear:"",visibility:!0},{default:t(()=>[a(R,{header:c.headers,meta:c.meta},{content:t(()=>[m("div",ce,i(n.$trans("dashboard.nothing_to_show")),1)]),default:t(()=>[m("div",ae,[(s(!0),w(P,null,N(c.data,e=>(s(),w("div",{key:e.uuid,class:"cursor-pointer",onClick:u=>o(v).push({name:"CommunicationAnnouncementShow",params:{uuid:e.uuid}})},[a(T,{"no-padding":""},{default:t(()=>[m("div",ie,[m("div",se,[m("span",le,i(e.title),1)]),m("div",ue,[m("span",re,i(e.codeNumber),1),m("span",{class:"px-2 py-1 text-gray-50 text-xs rounded-lg",style:X(`background-color: ${e.type.color}`)},i(e.type.name),5)]),m("p",me,i(e.publishedAt.formatted),1)])]),_:2},1024)],8,oe))),128))]),m("div",null,[a(M,{"card-view":"",meta:c.meta,onRefresh:r[3]||(r[3]=e=>o(y).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(s(),f(I,{key:1,appear:"",visibility:!0},{default:t(()=>[a(E,{header:c.headers,meta:c.meta,module:"communication.announcement",onRefresh:r[5]||(r[5]=e=>o(y).emit("listItems"))},{actionButton:t(()=>[o(k)("announcement:create")?(s(),f(j,{key:0,onClick:r[4]||(r[4]=e=>o(v).push({name:"CommunicationAnnouncementCreate"}))},{default:t(()=>[d(i(n.$trans("global.add",{attribute:n.$trans("communication.announcement.announcement")})),1)]),_:1})):C("",!0)]),default:t(()=>[(s(!0),w(P,null,N(c.data,e=>(s(),f(U,{key:e.uuid,onDoubleClick:u=>o(v).push({name:"CommunicationAnnouncementShow",params:{uuid:e.uuid}})},{default:t(()=>[a(h,{name:"codeNumber"},{default:t(()=>[d(i(e.codeNumber)+" ",1),e.isPinned?(s(),w("i",de)):C("",!0)]),_:2},1024),a(h,{name:"title"},{default:t(()=>[d(i(e.titleExcerpt),1)]),_:2},1024),a(h,{name:"type"},{default:t(()=>{var u;return[d(i(((u=e.type)==null?void 0:u.name)||"-"),1)]}),_:2},1024),a(h,{name:"employee"},{default:t(()=>{var u;return[d(i(((u=e.employee)==null?void 0:u.name)||"-")+" ",1),a(q,{block:""},{default:t(()=>{var S;return[d(i((S=e.employee)==null?void 0:S.codeNumber),1)]}),_:2},1024)]}),_:2},1024),a(h,{name:"audience"},{default:t(()=>[(s(!0),w(P,null,N(e.audienceTypes,u=>(s(),w("div",null,i(u),1))),256))]),_:2},1024),a(h,{name:"createdAt"},{default:t(()=>[d(i(e.createdAt.formatted),1)]),_:2},1024),a(h,{name:"action"},{default:t(()=>[a(H,null,{default:t(()=>[a($,{icon:"fas fa-arrow-circle-right",onClick:u=>o(v).push({name:"CommunicationAnnouncementShow",params:{uuid:e.uuid}})},{default:t(()=>[d(i(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),o(k)("announcement:edit")&&!e.isPinned?(s(),f($,{key:0,icon:"fas fa-thumbtack",onClick:u=>B(e)},{default:t(()=>[d(i(n.$trans("global.pin",{attribute:n.$trans("communication.announcement.announcement")})),1)]),_:2},1032,["onClick"])):o(k)("announcement:edit")&&e.isPinned?(s(),f($,{key:1,icon:"fas fa-thumbtack-slash",onClick:u=>F(e)},{default:t(()=>[d(i(n.$trans("global.unpin",{attribute:n.$trans("communication.announcement.announcement")})),1)]),_:2},1032,["onClick"])):C("",!0),o(k)("announcement:edit")?(s(),f($,{key:2,icon:"fas fa-edit",onClick:u=>o(v).push({name:"CommunicationAnnouncementEdit",params:{uuid:e.uuid}})},{default:t(()=>[d(i(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])):C("",!0),o(k)("announcement:create")?(s(),f($,{key:3,icon:"fas fa-copy",onClick:u=>o(v).push({name:"CommunicationAnnouncementDuplicate",params:{uuid:e.uuid}})},{default:t(()=>[d(i(n.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):C("",!0),o(k)("announcement:delete")?(s(),f($,{key:4,icon:"fas fa-trash",onClick:u=>o(y).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[d(i(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{_e as default};
