import{m as V,r as l,t as p,o as r,w as e,d as w,e as o,u as M,i as N,k as U,z as s,p as O,f as a,a as I,F as S,y as z,v as u,b as c,x as m}from"./app-Cvm44xuh.js";const q={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(n,{emit:h}){const y=h,f={title:""},D=V({...f});return(_,g)=>{const v=l("BaseInput"),k=l("FilterForm");return r(),p(k,{"init-form":f,form:D,onHide:g[1]||(g[1]=b=>y("hide"))},{default:e(()=>[w("div",q,[w("div",G,[o(v,{type:"text",modelValue:D.title,"onUpdate:modelValue":g[0]||(g[0]=b=>D.title=b),name:"title",label:_.$trans("employee.document.props.title")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},K={name:"EmployeeDocumentList"},W=Object.assign(K,{props:{employee:{type:Object,default(){return{}}}},setup(n){const h=M(),y=N(),f=U("emitter"),D=n;let _=["filter"];(s("employee:edit")||s("employee-record:manage")||D.employee.selfService)&&_.unshift("create");const g="employee/document/",v=O(!1),k=V({}),b=i=>{Object.assign(k,i)};return(i,d)=>{const H=l("PageHeaderAction"),P=l("PageHeader"),F=l("ParentTransition"),E=l("BaseBadge"),$=l("DataCell"),C=l("FloatingMenuItem"),R=l("FloatingMenu"),T=l("DataRow"),A=l("BaseButton"),j=l("DataTable"),L=l("ListItem");return r(),p(L,{"init-url":g,uuid:a(h).params.uuid,onSetItems:b},{header:e(()=>[n.employee.uuid?(r(),p(P,{key:0,title:i.$trans("employee.document.document"),navs:[{label:i.$trans("employee.employee"),path:"Employee"},{label:n.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:n.employee.uuid}}}]},{default:e(()=>[o(H,{url:`employees/${n.employee.uuid}/documents/`,name:"EmployeeDocument",title:i.$trans("employee.document.document"),actions:a(_),"dropdown-actions":["print","pdf","excel"],onToggleFilter:d[0]||(d[0]=t=>v.value=!v.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):c("",!0)]),filter:e(()=>[o(F,{appear:"",visibility:v.value},{default:e(()=>[o(J,{onRefresh:d[1]||(d[1]=t=>a(f).emit("listItems")),onHide:d[2]||(d[2]=t=>v.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[o(F,{appear:"",visibility:!0},{default:e(()=>[o(j,{header:k.headers,meta:k.meta,module:"employee.document",onRefresh:d[4]||(d[4]=t=>a(f).emit("listItems"))},{actionButton:e(()=>[a(s)("employee:edit")||a(s)("employee-record:manage")||n.employee.selfService?(r(),p(A,{key:0,onClick:d[3]||(d[3]=t=>a(y).push({name:"EmployeeDocumentCreate"}))},{default:e(()=>[u(m(i.$trans("global.add",{attribute:i.$trans("employee.document.document")})),1)]),_:1})):c("",!0)]),default:e(()=>[(r(!0),I(S,null,z(k.data,t=>(r(),p(T,{key:t.uuid,onDoubleClick:B=>a(y).push({name:"EmployeeDocumentShow",params:{uuid:t.uuid}})},{default:e(()=>[o($,{name:"title"},{default:e(()=>[u(m(t.title)+" ",1),t.selfUpload?(r(),p(E,{key:0,design:t.verificationStatus.color},{default:e(()=>[u(m(t.verificationStatus.label),1)]),_:2},1032,["design"])):c("",!0)]),_:2},1024),o($,{name:"type"},{default:e(()=>[u(m(t.type.name),1)]),_:2},1024),o($,{name:"startDate"},{default:e(()=>[u(m(t.startDate.formatted),1)]),_:2},1024),o($,{name:"endDate"},{default:e(()=>[u(m(t.endDate.formatted)+" ",1),t.isExpired?(r(),p(E,{key:0,design:"danger"},{default:e(()=>[u(m(i.$trans("employee.document.expired")),1)]),_:1})):c("",!0)]),_:2},1024),o($,{name:"createdAt"},{default:e(()=>[u(m(t.createdAt.formatted),1)]),_:2},1024),o($,{name:"action"},{default:e(()=>[o(R,null,{default:e(()=>[o(C,{icon:"fas fa-arrow-circle-right",onClick:B=>a(y).push({name:"EmployeeDocumentShow",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[u(m(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),a(s)("employee:edit")||a(s)("employee-record:manage")||n.employee.selfService?(r(),I(S,{key:0},[a(s)("employee:edit")||a(s)("employee-record:manage")||n.employee.selfService?(r(),p(C,{key:0,icon:"fas fa-edit",onClick:B=>a(y).push({name:"EmployeeDocumentEdit",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[u(m(i.$trans("general.edit")),1)]),_:2},1032,["onClick"])):c("",!0),a(s)("employee:edit")||a(s)("employee-record:manage")?(r(),p(C,{key:1,icon:"fas fa-copy",onClick:B=>a(y).push({name:"EmployeeDocumentDuplicate",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[u(m(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):c("",!0),a(s)("employee:edit")||a(s)("employee-record:manage")?(r(),p(C,{key:2,icon:"fas fa-trash",onClick:B=>a(f).emit("deleteItem",{uuid:n.employee.uuid,moduleUuid:t.uuid})},{default:e(()=>[u(m(i.$trans("general.delete")),1)]),_:2},1032,["onClick"])):c("",!0)],64)):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{W as default};
