import{k as W,I as ge,m as J,r as b,t as p,o as i,w as e,d as w,e as r,f as t,j as qe,u as ke,i as ve,g as q,a as D,b as m,v as s,x as o,F as V,y as P,z as R,aj as we}from"./app-Cvm44xuh.js";const Ue={class:"grid grid-cols-3 gap-6"},Ie={class:"col-span-3 sm:col-span-1"},De={class:"col-span-3 sm:col-span-1"},Ne={class:"col-span-3 sm:col-span-1"},Fe={class:"col-span-3 sm:col-span-1"},Ve={class:"col-span-3"},Ce={name:"EnquiryFollowUpForm"},xe=Object.assign(Ce,{props:{uuid:{type:String,default:""}},emits:["completed"],setup(K,{emit:E}){const C=E,n=W("emitter"),x={followUpDate:null,nextFollowUpDate:null,status:"",stage:"",remarks:""},S="reception/enquiryFollowUp/",U=ge(S),B=J({statuses:[],stages:[]}),k=J({...x}),j=N=>{Object.assign(B,N)},H=()=>{C("completed"),n.emit("listItems")};return(N,_)=>{const L=b("DatePicker"),h=b("BaseSelect"),M=b("BaseTextarea"),z=b("FormAction");return i(),p(z,{"pre-requisites":!0,onSetPreRequisites:j,"init-url":S,uuid:K.uuid,"no-data-fetch":"",action:"create","init-form":x,form:k,"keep-adding":!1,"after-submit":H},{default:e(()=>[w("div",Ue,[w("div",Ie,[r(L,{modelValue:k.followUpDate,"onUpdate:modelValue":_[0]||(_[0]=y=>k.followUpDate=y),name:"followUpDate",label:N.$trans("reception.enquiry.follow_up.props.follow_up_date"),"no-clear":"",error:t(U).followUpDate,"onUpdate:error":_[1]||(_[1]=y=>t(U).followUpDate=y)},null,8,["modelValue","label","error"])]),w("div",De,[r(L,{modelValue:k.nextFollowUpDate,"onUpdate:modelValue":_[2]||(_[2]=y=>k.nextFollowUpDate=y),name:"nextFollowUpDate",label:N.$trans("reception.enquiry.follow_up.props.next_follow_up_date"),error:t(U).nextFollowUpDate,"onUpdate:error":_[3]||(_[3]=y=>t(U).nextFollowUpDate=y)},null,8,["modelValue","label","error"])]),w("div",Ne,[r(h,{name:"status",label:N.$trans("reception.enquiry.follow_up.props.status"),modelValue:k.status,"onUpdate:modelValue":_[4]||(_[4]=y=>k.status=y),"label-prop":"label","value-prop":"value",options:B.statuses,error:t(U).status,"onUpdate:error":_[5]||(_[5]=y=>t(U).status=y)},null,8,["label","modelValue","options","error"])]),w("div",Fe,[r(h,{name:"stage",label:N.$trans("reception.enquiry.stage.stage"),modelValue:k.stage,"onUpdate:modelValue":_[6]||(_[6]=y=>k.stage=y),"label-prop":"name","value-prop":"uuid",options:B.stages,error:t(U).stage,"onUpdate:error":_[7]||(_[7]=y=>t(U).stage=y)},null,8,["label","modelValue","options","error"])]),w("div",Ve,[r(M,{rows:1,modelValue:k.remarks,"onUpdate:modelValue":_[8]||(_[8]=y=>k.remarks=y),name:"remarks",label:N.$trans("reception.enquiry.follow_up.props.remarks"),error:t(U).remarks,"onUpdate:error":_[9]||(_[9]=y=>t(U).remarks=y)},null,8,["modelValue","label","error"])])])]),_:1},8,["uuid","form"])}}}),Ee={class:"space-y-4"},Be={class:"p-4"},$e={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Re={class:"mt-8 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Se={key:0},Le={key:1},he={class:"mt-4 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},Ae={class:"text-xs"},Te={name:"ReceptionEnquiryShow"},je=Object.assign(Te,{setup(K){qe();const E=ke(),C=ve(),n=W("$trans"),x=W("emitter"),S={},U="reception/enquiry/",B=q("student.isUniqueIdNumber1Enabled"),k=q("student.isUniqueIdNumber2Enabled"),j=q("student.isUniqueIdNumber3Enabled"),H=q("student.isUniqueIdNumber4Enabled"),N=q("student.isUniqueIdNumber5Enabled"),_=q("student.uniqueIdNumber1Label"),L=q("student.uniqueIdNumber2Label"),h=q("student.uniqueIdNumber3Label"),M=q("student.uniqueIdNumber4Label"),z=q("student.uniqueIdNumber5Label"),y=q("contact.enableCategoryField"),ae=q("contact.enableCasteField"),le=q("student.enableMaritalStatus");q("student.enableAnniversaryDate"),n("reception.enquiry.props.student_name"),n("contact.props.birth_date"),n("contact.props.gender"),n("academic.course.course");const ne=[{key:"course",label:n("student.qualification.props.course"),visibility:!0},{key:"institute",label:n("student.qualification.props.institute"),visibility:!0},{key:"level",label:n("student.qualification_level.qualification_level"),visibility:!0},{key:"period",label:n("general.period"),visibility:!0},{key:"result",label:n("student.qualification.props.result"),visibility:!0},{key:"action",label:"",visibility:!0}],oe=[{key:"followUpDate",label:n("reception.enquiry.follow_up.props.follow_up_date"),visibility:!0},{key:"nextFollowUpDate",label:n("reception.enquiry.follow_up.props.next_follow_up_date"),visibility:!0},{key:"status",label:n("reception.enquiry.follow_up.props.status"),visibility:!0},{key:"stage",label:n("reception.enquiry.stage.stage"),visibility:!0},{key:"action",label:"",visibility:!0}],l=J({...S}),re=A=>{Object.assign(l,A)},se=()=>{x.emit("showActionItem",{uuid:l==null?void 0:l.uuid,action:"convertToRegistration",confirmation:!0})},ie=()=>{let A="/app/reception/enquiries/"+l.uuid+"/export",f={};window.open(we(A,f),"_blank").focus()};return(A,f)=>{const $=b("BaseButton"),ue=b("PageHeaderAction"),de=b("PageHeader"),O=b("BaseBadge"),g=b("ListItemView"),G=b("TextMuted"),ce=b("ContactField"),pe=b("ListContainerVertical"),T=b("BaseCard"),c=b("BaseDataView"),X=b("BaseFieldset"),I=b("DataCell"),Q=b("DataRow"),Y=b("SimpleTable"),me=b("ListMedia"),be=b("ShowButton"),_e=b("DetailLayoutVertical"),ye=b("ShowItem"),fe=b("ParentTransition");return i(),D(V,null,[r(de,{title:t(n)(t(E).meta.trans,{attribute:t(n)(t(E).meta.label)}),navs:[{label:t(n)("reception.reception"),path:"Reception"},{label:t(n)("reception.enquiry.enquiry"),path:"ReceptionEnquiryList"}]},{default:e(()=>[r(ue,{name:"ReceptionEnquiry",title:t(n)("reception.enquiry.enquiry"),actions:["list"]},{default:e(()=>{var d;return[((d=l.nature)==null?void 0:d.value)=="admission"?(i(),p($,{key:0,design:"white",onClick:ie},{default:e(()=>[s(o(t(n)("general.print")),1)]),_:1})):m("",!0)]}),_:1},8,["title"])]),_:1},8,["title","navs"]),r(fe,{appear:"",visibility:!0},{default:e(()=>[r(ye,{"init-url":U,uuid:t(E).params.uuid,onSetItem:re,onRedirectTo:f[4]||(f[4]=d=>t(C).push({name:"ReceptionEnquiry"})),"additional-query":{detail:!0}},{default:e(()=>[l.uuid?(i(),p(_e,{key:0},{detail:e(()=>[r(T,{"no-padding":"","no-content-padding":""},{title:e(()=>[s(o(t(n)("global.detail",{attribute:t(n)("reception.enquiry.enquiry")}))+" ",1),r(O,{design:l.status.color},{default:e(()=>[s(o(l.status.label),1)]),_:1},8,["design"])]),default:e(()=>[r(pe,null,{default:e(()=>[r(g,{label:t(n)("reception.enquiry.props.code_number")},{default:e(()=>[s(o(l.codeNumber),1)]),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.assigned_to")},{default:e(()=>{var d;return[s(o(((d=l.employee)==null?void 0:d.name)||"-")+" ",1),l.employee?(i(),p(G,{key:0,block:""},{default:e(()=>{var F;return[s(o(((F=l.employee)==null?void 0:F.designation)||"-"),1)]}),_:1})):m("",!0)]}),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.nature"),dynamic:""},{default:e(()=>[r(O,{design:"primary"},{default:e(()=>[s(o(l.nature.label),1)]),_:1})]),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.date")},{default:e(()=>[s(o(l.date.formatted),1)]),_:1},8,["label"]),l.nature.value=="admission"?(i(),p(g,{key:0,label:t(n)("reception.enquiry.stage.stage")},{default:e(()=>{var d;return[s(o(((d=l.stage)==null?void 0:d.name)||"-"),1)]}),_:1},8,["label"])):m("",!0),r(g,{label:t(n)("reception.enquiry.type.type")},{default:e(()=>{var d;return[s(o(((d=l.type)==null?void 0:d.name)||"-"),1)]}),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.source.source")},{default:e(()=>{var d;return[s(o(((d=l.source)==null?void 0:d.name)||"-"),1)]}),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.name")},{default:e(()=>[s(o(l.name),1)]),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.email")},{default:e(()=>[s(o(l.email),1)]),_:1},8,["label"]),r(g,{label:t(n)("reception.enquiry.props.contact_number"),dynamic:""},{default:e(()=>[r(ce,{"contact-number":l.contactNumber},null,8,["contact-number"])]),_:1},8,["label"]),r(g,{truncate:!1,label:t(n)("reception.enquiry.props.description")},{default:e(()=>[s(o(l.description),1)]),_:1},8,["label"]),r(g,{truncate:!1,label:t(n)("reception.enquiry.props.remarks")},{default:e(()=>[s(o(l.remarks),1)]),_:1},8,["label"]),r(g,{label:t(n)("general.created_at")},{default:e(()=>[s(o(l.createdAt.formatted),1)]),_:1},8,["label"]),r(g,{label:t(n)("general.updated_at")},{default:e(()=>[s(o(l.updatedAt.formatted),1)]),_:1},8,["label"])]),_:1})]),_:1})]),default:e(()=>[w("div",Ee,[r(T,{"no-padding":"","no-content-padding":"","bottom-content-padding":""},{title:e(()=>[s(o(t(n)("reception.enquiry.enquiry")),1)]),action:e(()=>[l.nature.value=="admission"&&!l.isConverted?(i(),p($,{key:0,design:"primary",size:"xs",onClick:se},{default:e(()=>[s(o(t(n)("reception.enquiry.convert_to_registration")),1)]),_:1})):m("",!0),l.isConverted?(i(),D("span",{key:1,onClick:f[0]||(f[0]=d=>t(C).push({name:"StudentRegistrationShow",params:{uuid:l.registration.uuid}})),class:"cursor-pointer"},[r(O,{design:"success"},{default:e(()=>[s(o(t(n)("reception.enquiry.converted_to_registration")),1)]),_:1})])):m("",!0)]),footer:e(()=>[r(be,null,{default:e(()=>[l.isEditable&&l.nature.value=="admission"&&(t(R)("enquiry:create")||t(R)("enquiry:edit"))?(i(),p($,{key:0,design:"primary",onClick:f[1]||(f[1]=d=>t(C).push({name:"ReceptionEnquiryWizard",params:{uuid:l.uuid}}))},{default:e(()=>[s(o(t(n)("general.edit")),1)]),_:1})):m("",!0),l.isEditable&&l.nature.value!="admission"&&t(R)("enquiry:edit")?(i(),p($,{key:1,design:"primary",onClick:f[2]||(f[2]=d=>t(C).push({name:"ReceptionEnquiryEdit",params:{uuid:l.uuid}}))},{default:e(()=>[s(o(t(n)("general.edit")),1)]),_:1})):m("",!0)]),_:1})]),default:e(()=>{var d,F,Z,ee;return[w("div",Be,[l.nature.value=="admission"?(i(),D(V,{key:0},[w("dl",$e,[r(c,{label:t(n)("academic.period.period")},{default:e(()=>{var a;return[s(o(((a=l.period)==null?void 0:a.name)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("academic.course.course")},{default:e(()=>{var a;return[s(o(((a=l.course)==null?void 0:a.name)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.name")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.name)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.contact_number")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.contactNumber)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.gender")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.gender)==null?void 0:u.label)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.birth_date")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.birthDate)==null?void 0:u.formatted)||"-"),1)]}),_:1},8,["label"])]),((F=(d=l.contact)==null?void 0:d.guardians)==null?void 0:F.length)>0?(i(),p(X,{key:0,class:"mt-4 space-y-4"},{legend:e(()=>[s(o(t(n)("guardian.guardian")),1)]),default:e(()=>[(i(!0),D(V,null,P(l.contact.guardians,a=>(i(),D("dl",{class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",key:a.uuid},[r(c,{label:a.relation.label},{default:e(()=>[s(o(a.contact.name)+" ",1),a.contact.occupation?(i(),p(G,{key:0},{default:e(()=>[s("("+o(a.contact.occupation)+")",1)]),_:2},1024)):m("",!0)]),_:2},1032,["label"]),r(c,{label:t(n)("contact.props.contact_number")},{default:e(()=>[s(o(a.contact.contactNumber),1)]),_:2},1032,["label"])]))),128))]),_:1})):m("",!0),((ee=(Z=l.contact)==null?void 0:Z.qualifications)==null?void 0:ee.length)>0?(i(),p(X,{key:1,class:"mt-4 space-y-4"},{legend:e(()=>[s(o(t(n)("student.qualification.qualification")),1)]),default:e(()=>{var a;return[(a=l.contact)!=null&&a.qualifications.length?(i(),p(Y,{key:0,header:ne},{default:e(()=>{var u;return[(i(!0),D(V,null,P((u=l.contact)==null?void 0:u.qualifications,v=>(i(),p(Q,{key:v.uuid},{default:e(()=>[r(I,{name:"course"},{default:e(()=>[s(o(v.course),1)]),_:2},1024),r(I,{name:"institute"},{default:e(()=>[s(o(v.institute),1)]),_:2},1024),r(I,{name:"level"},{default:e(()=>[s(o(v.level.name),1)]),_:2},1024),r(I,{name:"period"},{default:e(()=>[s(o(v.period),1)]),_:2},1024),r(I,{name:"result"},{default:e(()=>{var te;return[s(o(v.result.label||v.result)+" ",1),((te=v.result)==null?void 0:te.value)=="pass"&&v.percentage?(i(),p(G,{key:0,block:""},{default:e(()=>[s(o(v.percentage)+"% ",1)]),_:2},1024)):m("",!0)]}),_:2},1024),r(I,{name:"action"})]),_:2},1024))),128))]}),_:1})):m("",!0)]}),_:1})):m("",!0),w("dl",Re,[t(B)?(i(),p(c,{key:0,label:t(_)},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.uniqueIdNumber1)||"-"),1)]}),_:1},8,["label"])):m("",!0),t(k)?(i(),p(c,{key:1,label:t(L)},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.uniqueIdNumber2)||"-"),1)]}),_:1},8,["label"])):m("",!0),t(j)?(i(),p(c,{key:2,label:t(h)},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.uniqueIdNumber3)||"-"),1)]}),_:1},8,["label"])):m("",!0),t(H)?(i(),p(c,{key:3,label:t(M)},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.uniqueIdNumber4)||"-"),1)]}),_:1},8,["label"])):m("",!0),t(N)?(i(),p(c,{key:4,label:t(z)},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.uniqueIdNumber5)||"-"),1)]}),_:1},8,["label"])):m("",!0),r(c,{label:t(n)("contact.props.birth_place")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.birthPlace)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.nationality")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.nationality)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.mother_tongue")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.motherTongue)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.blood_group")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.bloodGroup)==null?void 0:u.label)||"-"),1)]}),_:1},8,["label"]),t(le)?(i(),p(c,{key:5,label:t(n)("contact.props.marital_status")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.maritalStatus)==null?void 0:u.label)||"-"),1)]}),_:1},8,["label"])):m("",!0),r(c,{label:t(n)("contact.religion.religion")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.religion)==null?void 0:u.name)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.locality")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.locality)==null?void 0:u.label)||"-"),1)]}),_:1},8,["label"]),t(ae)?(i(),p(c,{key:6,label:t(n)("contact.caste.caste")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.caste)==null?void 0:u.name)||"-"),1)]}),_:1},8,["label"])):m("",!0),t(y)?(i(),p(c,{key:7,label:t(n)("contact.category.category")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.category)==null?void 0:u.name)||"-"),1)]}),_:1},8,["label"])):m("",!0),r(c,{label:t(n)("contact.props.email")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.email)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.alternate_contact_number")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.alternateRecords)==null?void 0:u.contactNumber)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.alternate_email")},{default:e(()=>{var a,u;return[s(o(((u=(a=l.contact)==null?void 0:a.alternateRecords)==null?void 0:u.email)||"-"),1)]}),_:1},8,["label"]),(i(!0),D(V,null,P(l.customFields||[],a=>(i(),p(c,{key:a.uuid,label:a.label},{default:e(()=>[s(o(a.formattedValue),1)]),_:2},1032,["label"]))),128)),r(c,{label:t(n)("contact.props.present_address")},{default:e(()=>{var a;return[s(o(((a=l.contact)==null?void 0:a.presentAddressDisplay)||"-"),1)]}),_:1},8,["label"]),r(c,{label:t(n)("contact.props.permanent_address")},{default:e(()=>{var a,u,v;return[(a=l.contact)!=null&&a.sameAsPresentAddress?(i(),D("span",Se,o(((u=l.contact)==null?void 0:u.presentAddressDisplay)||"-"),1)):(i(),D("span",Le,o(((v=l.contact)==null?void 0:v.permanentAddressDisplay)||"-"),1))]}),_:1},8,["label"])])],64)):m("",!0),w("dl",he,[r(c,{class:"col-span-1 sm:col-span-2"},{default:e(()=>[r(me,{media:l.media,url:`/app/reception/enquiries/${l.uuid}/`},null,8,["media","url"])]),_:1})])])]}),_:1}),l.followUps.length>0?(i(),p(T,{key:0,"no-padding":"","no-content-padding":"","bottom-content-padding":""},{title:e(()=>[s(o(t(n)("reception.enquiry.follow_up.follow_up")),1)]),default:e(()=>[l.followUps.length>0?(i(),p(Y,{key:0,header:oe},{default:e(()=>[(i(!0),D(V,null,P(l.followUps,d=>(i(),D(V,{key:d.uuid},[r(Q,null,{default:e(()=>[r(I,{name:"followUpDate"},{default:e(()=>[s(o(d.followUpDate.formatted),1)]),_:2},1024),r(I,{name:"nextFollowUpDate"},{default:e(()=>[s(o(d.nextFollowUpDate.formatted),1)]),_:2},1024),r(I,{name:"status"},{default:e(()=>[s(o(d.status.label),1)]),_:2},1024),r(I,{name:"stage"},{default:e(()=>{var F;return[s(o(((F=d.stage)==null?void 0:F.name)||"-"),1)]}),_:2},1024),r(I,{name:"action"},{default:e(()=>[t(R)("enquiry:follow-up")?(i(),p($,{key:0,size:"xs",design:"danger",onClick:F=>t(x).emit("showActionItem",{uuid:l==null?void 0:l.uuid,moduleUuid:d.uuid,action:"removeFollowUp",confirmation:!0})},{default:e(()=>f[5]||(f[5]=[w("i",{class:"fas fa-trash"},null,-1)])),_:2,__:[5]},1032,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024),r(Q,null,{default:e(()=>[r(I,{colspan:100},{default:e(()=>[w("span",Ae,o(d.remarks),1)]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})):m("",!0)]),_:1})):m("",!0)]),l.isEditable&&t(R)("enquiry:follow-up")?(i(),p(T,{key:0,"no-padding":"","no-content-padding":""},{title:e(()=>[s(o(t(n)("reception.enquiry.follow_up.follow_up")),1)]),default:e(()=>[r(xe,{onCompleted:f[3]||(f[3]=d=>t(x).emit("refreshItem"))})]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1},8,["uuid"])]),_:1})],64)}}});export{je as default};
