import{u as H,m as q,q as L,r as o,t as _,o as d,w as t,d as w,e as a,v as r,x as i,i as O,k as j,z as b,p as M,f as s,a as N,F as W,y as U,b as h}from"./app-Cvm44xuh.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(A,{emit:p}){const u=H(),g=p,$={courses:[],enrollmentTypes:[]},f=q({...$}),y=q({courses:[],enrollmentTypes:[],isLoaded:!(u.query.courses||u.query.enrollmentTypes)});return L(async()=>{y.courses=u.query.courses?u.query.courses.split(","):[],y.enrollmentTypes=u.query.enrollmentTypes?u.query.enrollmentTypes.split(","):[],y.isLoaded=!0}),(c,l)=>{const T=o("BaseSelect"),F=o("FilterForm");return d(),_(F,{"init-form":$,form:f,multiple:["courses","enrollmentTypes"],onHide:l[2]||(l[2]=e=>g("hide"))},{default:t(()=>[w("div",z,[w("div",G,[a(T,{multiple:"",name:"courses",label:c.$trans("global.select",{attribute:c.$trans("academic.course.course")}),modelValue:f.courses,"onUpdate:modelValue":l[0]||(l[0]=e=>f.courses=e),"value-prop":"uuid","track-by":["nameWithTerm","name","term"],options:A.preRequisites.courses},{selectedOption:t(e=>[r(i(e.value.nameWithTerm),1)]),listOption:t(e=>[r(i(e.option.nameWithTerm),1)]),_:1},8,["label","modelValue","options"])]),w("div",J,[a(T,{multiple:"",name:"enrollmentTypes",label:c.$trans("global.select",{attribute:c.$trans("student.enrollment_type.enrollment_type")}),modelValue:f.enrollmentTypes,"onUpdate:modelValue":l[1]||(l[1]=e=>f.enrollmentTypes=e),"value-prop":"uuid","label-prop":"name",options:A.preRequisites.enrollmentTypes},null,8,["label","modelValue","options"])])])]),_:1},8,["form"])}}},Q={name:"AcademicEnrollmentSeatList"},Y=Object.assign(Q,{setup(A){const p=O(),u=j("emitter");let g=["filter"];b("course:edit")&&g.unshift("create");let $=["print","pdf","excel"];const f="academic/enrollmentSeat/",y=q({courses:[],enrollmentTypes:[]}),c=M(!1),l=q({}),T=e=>{Object.assign(y,e)},F=e=>{Object.assign(l,e)};return(e,m)=>{const B=o("PageHeaderAction"),D=o("PageHeader"),R=o("ParentTransition"),v=o("DataCell"),k=o("FloatingMenuItem"),V=o("FloatingMenu"),E=o("DataRow"),I=o("BaseButton"),P=o("DataTable"),S=o("ListItem");return d(),_(S,{"init-url":f,"pre-requisites":!0,onSetPreRequisites:T,onSetItems:F},{header:t(()=>[a(D,{title:e.$trans("academic.enrollment_seat.enrollment_seat"),navs:[{label:e.$trans("academic.academic"),path:"Academic"},{label:e.$trans("academic.course.course"),path:"AcademicCourse"}]},{default:t(()=>[a(B,{url:"academic/enrollment-seats/",name:"AcademicEnrollmentSeat",title:e.$trans("academic.enrollment_seat.enrollment_seat"),actions:s(g),"dropdown-actions":s($),onToggleFilter:m[0]||(m[0]=n=>c.value=!c.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[a(R,{appear:"",visibility:c.value},{default:t(()=>[a(K,{onRefresh:m[1]||(m[1]=n=>s(u).emit("listItems")),onHide:m[2]||(m[2]=n=>c.value=!1),"pre-requisites":y},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:t(()=>[a(R,{appear:"",visibility:!0},{default:t(()=>[a(P,{header:l.headers,meta:l.meta,module:"academic.enrollment_seat",onRefresh:m[4]||(m[4]=n=>s(u).emit("listItems"))},{actionButton:t(()=>[s(b)("course:edit")?(d(),_(I,{key:0,onClick:m[3]||(m[3]=n=>s(p).push({name:"AcademicEnrollmentSeatCreate"}))},{default:t(()=>[r(i(e.$trans("global.add",{attribute:e.$trans("academic.enrollment_seat.enrollment_seat")})),1)]),_:1})):h("",!0)]),default:t(()=>[(d(!0),N(W,null,U(l.data,n=>(d(),_(E,{key:n.uuid,onDoubleClick:C=>s(p).push({name:"AcademicEnrollmentSeatShow",params:{uuid:n.uuid}})},{default:t(()=>[a(v,{name:"course"},{default:t(()=>[r(i(n.course.nameWithTerm),1)]),_:2},1024),a(v,{name:"enrollmentType"},{default:t(()=>[r(i(n.enrollmentType.name),1)]),_:2},1024),a(v,{name:"seat"},{default:t(()=>[r(i(n.seat),1)]),_:2},1024),a(v,{name:"createdAt"},{default:t(()=>[r(i(n.createdAt.formatted),1)]),_:2},1024),a(v,{name:"action"},{default:t(()=>[a(V,null,{default:t(()=>[a(k,{icon:"fas fa-arrow-circle-right",onClick:C=>s(p).push({name:"AcademicEnrollmentSeatShow",params:{uuid:n.uuid}})},{default:t(()=>[r(i(e.$trans("general.show")),1)]),_:2},1032,["onClick"]),s(b)("course:edit")?(d(),_(k,{key:0,icon:"fas fa-edit",onClick:C=>s(p).push({name:"AcademicEnrollmentSeatEdit",params:{uuid:n.uuid}})},{default:t(()=>[r(i(e.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),s(b)("course:edit")?(d(),_(k,{key:1,icon:"fas fa-copy",onClick:C=>s(p).push({name:"AcademicEnrollmentSeatDuplicate",params:{uuid:n.uuid}})},{default:t(()=>[r(i(e.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),s(b)("course:edit")?(d(),_(k,{key:2,icon:"fas fa-trash",onClick:C=>s(u).emit("deleteItem",{uuid:n.uuid})},{default:t(()=>[r(i(e.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
