import{u as W,m as T,q as E,r as l,t as p,o as u,w as e,d as w,e as n,b as g,v as i,x as s,i as z,k as x,z as $,p as V,f as o,a as F,F as H,y as L}from"./app-Cvm44xuh.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={__name:"Filter",emits:["hide"],setup(M,{emit:_}){const h=W(),B=_,k={name:"",courses:[]},b=T({...k}),f=T({courses:[],isLoaded:!h.query.courses});return E(async()=>{f.courses=h.query.courses?h.query.courses.split(","):[],f.isLoaded=!0}),(v,c)=>{const A=l("BaseInput"),r=l("BaseSelectSearch"),a=l("FilterForm");return u(),p(a,{"init-form":k,form:b,multiple:["courses"],onHide:c[2]||(c[2]=d=>B("hide"))},{default:e(()=>[w("div",G,[w("div",J,[n(A,{type:"text",modelValue:b.name,"onUpdate:modelValue":c[0]||(c[0]=d=>b.name=d),name:"name",label:v.$trans("academic.batch.props.name")},null,8,["modelValue","label"])]),w("div",K,[f.isLoaded?(u(),p(r,{key:0,multiple:"",name:"courses",label:v.$trans("global.select",{attribute:v.$trans("academic.course.course")}),modelValue:b.courses,"onUpdate:modelValue":c[1]||(c[1]=d=>b.courses=d),"value-prop":"uuid","init-search":f.courses,"search-action":"academic/course/list"},{selectedOption:e(d=>[i(s(d.value.nameWithTerm),1)]),listOption:e(d=>[i(s(d.option.nameWithTerm),1)]),_:1},8,["label","modelValue","init-search"])):g("",!0)])])]),_:1},8,["form"])}}},X={name:"AcademicBatchList"},Z=Object.assign(X,{setup(M){const _=z(),h=x("emitter");let B=["filter"];$("batch:create")&&B.unshift("create");let k=[];$("batch:export")&&(k=["print","pdf","excel"]),$("batch:create")&&k.unshift("import");const b="academic/batch/",f=V(!1),v=V(!1),c=T({}),A=r=>{Object.assign(c,r)};return(r,a)=>{const d=l("BaseButton"),q=l("PageHeaderAction"),P=l("PageHeader"),R=l("BaseImport"),I=l("ParentTransition"),D=l("TextMuted"),y=l("DataCell"),C=l("FloatingMenuItem"),N=l("FloatingMenu"),O=l("DataRow"),j=l("DataTable"),U=l("ListItem");return u(),p(U,{"init-url":b,"additional-query":{details:!0},onSetItems:A},{header:e(()=>[n(P,{title:r.$trans("academic.batch.batch"),navs:[{label:r.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[n(q,{url:"academic/batches/",name:"AcademicBatch",title:r.$trans("academic.batch.batch"),actions:o(B),"dropdown-actions":o(k),"additional-dropdown-actions-query":{details:!0},onToggleFilter:a[1]||(a[1]=t=>f.value=!f.value),onToggleImport:a[2]||(a[2]=t=>v.value=!v.value)},{default:e(()=>[o($)("batch-incharge:read")?(u(),p(d,{key:0,design:"white",onClick:a[0]||(a[0]=t=>o(_).push({name:"AcademicBatchIncharge"}))},{default:e(()=>[i(s(r.$trans("employee.incharge.incharge")),1)]),_:1})):g("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),import:e(()=>[n(I,{appear:"",visibility:v.value},{default:e(()=>[n(R,{path:"academic/batches/import",onCancelled:a[3]||(a[3]=t=>v.value=!1),onHide:a[4]||(a[4]=t=>v.value=!1),onCompleted:a[5]||(a[5]=t=>o(h).emit("listItems"))})]),_:1},8,["visibility"])]),filter:e(()=>[n(I,{appear:"",visibility:f.value},{default:e(()=>[n(Q,{onRefresh:a[6]||(a[6]=t=>o(h).emit("listItems")),onHide:a[7]||(a[7]=t=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(I,{appear:"",visibility:!0},{default:e(()=>[n(j,{header:c.headers,meta:c.meta,module:"academic.batch",onRefresh:a[9]||(a[9]=t=>o(h).emit("listItems"))},{actionButton:e(()=>[o($)("batch:create")?(u(),p(d,{key:0,onClick:a[8]||(a[8]=t=>o(_).push({name:"AcademicBatchCreate"}))},{default:e(()=>[i(s(r.$trans("global.add",{attribute:r.$trans("academic.batch.batch")})),1)]),_:1})):g("",!0)]),default:e(()=>[(u(!0),F(H,null,L(c.data,t=>(u(),p(O,{key:t.uuid,onDoubleClick:m=>o(_).push({name:"AcademicBatchShow",params:{uuid:t.uuid}})},{default:e(()=>[n(y,{name:"name"},{default:e(()=>[i(s(t.name)+" ",1),t.pgAccount?(u(),p(D,{key:0,block:""},{default:e(()=>[i(s(t.pgAccount),1)]),_:2},1024)):g("",!0)]),_:2},1024),n(y,{name:"course"},{default:e(()=>[i(s(t.course.nameWithTerm),1)]),_:2},1024),n(y,{name:"maxStrength"},{default:e(()=>[i(s(t.currentStrength)+"/"+s(t.maxStrength),1)]),_:2},1024),n(y,{name:"incharge"},{default:e(()=>[(u(!0),F(H,null,L(t.incharges,m=>{var S;return u(),F("div",null,[i(s(((S=m==null?void 0:m.employee)==null?void 0:S.name)||"-")+" ",1),n(D,null,{default:e(()=>[i(s(m==null?void 0:m.period),1)]),_:2},1024)])}),256))]),_:2},1024),n(y,{name:"createdAt"},{default:e(()=>[i(s(t.createdAt.formatted),1)]),_:2},1024),n(y,{name:"action"},{default:e(()=>[n(N,null,{default:e(()=>[n(C,{icon:"fas fa-arrow-circle-right",onClick:m=>o(_).push({name:"AcademicBatchShow",params:{uuid:t.uuid}})},{default:e(()=>[i(s(r.$trans("general.show")),1)]),_:2},1032,["onClick"]),o($)("batch:edit")?(u(),p(C,{key:0,icon:"fas fa-edit",onClick:m=>o(_).push({name:"AcademicBatchEdit",params:{uuid:t.uuid}})},{default:e(()=>[i(s(r.$trans("general.edit")),1)]),_:2},1032,["onClick"])):g("",!0),o($)("batch:create")?(u(),p(C,{key:1,icon:"fas fa-copy",onClick:m=>o(_).push({name:"AcademicBatchDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[i(s(r.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):g("",!0),o($)("batch:delete")?(u(),p(C,{key:2,icon:"fas fa-trash",onClick:m=>o(h).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[i(s(r.$trans("general.delete")),1)]),_:2},1032,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Z as default};
