import{i as A,j as L,p as D,m as j,q as F,r as f,t as w,o as e,w as o,d as t,e as c,a,F as x,y as $,b as h,v as _,x as s,n as M,f as k,A as q,a2 as K,a3 as Q,a4 as H,B as U,a5 as X,C as P,k as Z,l as W,g as G,E as ee,c as te,a6 as se,u as ae,z as Y}from"./app-Cvm44xuh.js";import{C as ne,a as re,L as le,B as oe,p as ie,b as de,c as ce,d as E}from"./index-fjC5H_Zl.js";import{_ as ue}from"./EditRequestInfo-k1F8QqQ3.js";import{F as me}from"./index-Dfe-y4c7.js";const _e={class:"bg-black px-4 pb-16 pt-6"},he={class:"dark:bg-dark-header rounded-lg bg-white border-b border-gray-200 dark:border-gray-700"},ge={class:"flex items-center p-4"},pe={class:"shrink-0"},be={key:0,class:"text-xl font-semibold leading-none text-gray-900 dark:text-gray-400 sm:text-2xl"},fe={key:0,class:"text-2xl sm:text-3xl"},ye={key:1,class:"text-2xl font-semibold leading-none text-gray-900 dark:text-gray-400 sm:text-3xl"},ve={class:"mt-2 text-base font-normal uppercase text-gray-500"},xe={key:0,class:"mt-1 flex items-center gap-2"},ke={class:"text-sm font-semibold leading-none text-gray-500 dark:text-gray-400"},$e={class:"ml-5 flex w-0 flex-1 items-center justify-end font-bold"},we={class:"px-4 py-2 space-y-2"},Se={key:0},Ce={key:1},Te={key:0,class:"px-4 py-2 space-y-2"},Be={key:1,class:"px-4 py-2 space-y-2"},Me={name:"DashboardStat"},De=Object.assign(Me,{setup(S){ne.register(re,le,oe,ie,de,ce);const y=A(),p=L(),d=D(!1),g=j({stats:[],serviceSummary:[],attendanceSummary:[],feeSummary:[],studentStrengthChartData:[],transactionChartData:[],showSummary:"fee"});return F(async()=>{d.value=!0,await p.dispatch("dashboard/getStat").then(i=>{d.value=!1,Object.assign(g,i)}).catch(i=>{d.value=!1})}),(i,l)=>{const m=f("BaseFlexCard"),v=f("TextMuted"),r=f("BaseLabel"),n=f("ProgressBar"),b=f("BaseButton"),T=f("BaseFlexContainer"),B=f("BaseLoader");return e(),w(B,{"is-loading":d.value},{default:o(()=>[t("div",_e,[c(T,null,{default:o(()=>[c(m,{class:"md:w-1/3"},{title:o(()=>[_(s(i.$trans("dashboard.statistics")),1)]),default:o(()=>[(e(!0),a(x,null,$(g.stats,u=>(e(),a("div",he,[t("div",ge,[t("div",pe,[t("div",null,[u.subCount?(e(),a("span",be,[_(s(u.count),1),u.subCount?(e(),a("span",fe,"/"+s(u.subCount),1)):h("",!0)])):(e(),a("span",ye,s(u.count),1)),t("h3",ve,s(u.title),1)]),u.subTitle?(e(),a("div",xe,[t("i",{class:M(u.subTitleIcon)},null,2),t("span",ke,s(u.subTitleCount)+" "+s(u.subTitle),1)])):h("",!0)]),t("div",$e,[t("div",{class:M(["rounded-full",[u.color]])},[t("i",{class:M([u.icon,"flex h-12 w-12 items-center justify-center text-white"])},null,2)],2)])])]))),256))]),_:1}),c(m,{class:"md:w-1/3"},{title:o(()=>[_(s(i.$trans("global.summary",{attribute:i.$trans("student.attendance.attendance")})),1)]),action:o(()=>[t("i",{class:"cursor-pointer text-gray-800 dark:text-gray-400 fa-solid fa-up-right-from-square",onClick:l[0]||(l[0]=u=>k(y).push({name:"StudentReportDateWiseAttendance"}))})]),default:o(()=>[t("div",we,[(e(!0),a(x,null,$(g.attendanceSummary,u=>(e(),a("div",null,[c(r,null,{default:o(()=>[_(s(u.label)+" ",1),c(v,null,{default:o(()=>[_(s(u.value)+" / "+s(u.max),1)]),_:2},1024)]),_:2},1024),c(n,{space:"",height:"h-2",percent:u.percent,max:u.max,color:u.color},null,8,["percent","max","color"])]))),256))])]),_:1}),c(m,{class:"md:w-1/3"},{title:o(()=>[g.showSummary=="fee"?(e(),a("span",Se,s(i.$trans("global.summary",{attribute:i.$trans("student.fee.fee")})),1)):g.showSummary=="service"?(e(),a("span",Ce,s(i.$trans("global.summary",{attribute:i.$trans("student.service.service")})),1)):h("",!0)]),action:o(()=>[g.showSummary=="fee"?(e(),w(b,{key:0,size:"xs",onClick:l[1]||(l[1]=u=>g.showSummary="service")},{default:o(()=>[_(s(i.$trans("student.service.service")),1)]),_:1})):h("",!0),g.showSummary=="service"?(e(),w(b,{key:1,size:"xs",onClick:l[2]||(l[2]=u=>g.showSummary="fee")},{default:o(()=>[_(s(i.$trans("student.fee.fee")),1)]),_:1})):h("",!0)]),default:o(()=>[g.showSummary=="fee"?(e(),a("div",Te,[(e(!0),a(x,null,$(g.feeSummary,u=>(e(),a("div",null,[c(r,null,{default:o(()=>[_(s(u.label)+" ",1),c(v,null,{default:o(()=>[_(s(u.value)+" / "+s(u.max),1)]),_:2},1024)]),_:2},1024),c(n,{space:"",height:"h-2",percent:u.percent,max:u.max,color:u.color},null,8,["percent","max","color"])]))),256)),(e(!0),a(x,null,$(g.feeCollectionSummary,u=>(e(),a("div",null,[c(r,null,{default:o(()=>[_(s(u.label)+" ",1),c(v,{block:""},{default:o(()=>[_(s(u.value.formatted),1)]),_:2},1024)]),_:2},1024)]))),256))])):h("",!0),g.showSummary=="service"?(e(),a("div",Be,[(e(!0),a(x,null,$(g.serviceSummary,u=>(e(),a("div",null,[c(r,null,{default:o(()=>[_(s(u.label)+" ",1),c(v,null,{default:o(()=>[_(s(u.value)+" / "+s(u.max),1)]),_:2},1024)]),_:2},1024),c(n,{space:"",height:"h-2",percent:u.percent,max:u.max,color:u.color},null,8,["percent","max","color"])]))),256))])):h("",!0)]),_:1})]),_:1})]),c(T,{class:"-mt-12 px-4"},{default:o(()=>[c(m,{class:"md:w-1/2","is-loading":d.value},{title:o(()=>[_(s(i.$trans("academic.student_strength")),1)]),default:o(()=>[g.studentStrengthChartData.labels?(e(),w(k(E),{key:0,data:g.studentStrengthChartData,options:{responsive:!0}},null,8,["data"])):h("",!0)]),_:1},8,["is-loading"]),c(m,{class:"md:w-1/2","is-loading":d.value},{title:o(()=>[_(s(i.$trans("finance.receipt_vs_payment")),1)]),default:o(()=>[g.transactionChartData.labels?(e(),w(k(E),{key:0,data:g.transactionChartData,options:{responsive:!0}},null,8,["data"])):h("",!0)]),_:1},8,["is-loading"])]),_:1})]),_:1},8,["is-loading"])}}}),Le={class:"lg:flex lg:h-full lg:flex-col"},je={class:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4 lg:flex-none"},Fe={class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-300"},Ne={datetime:"2022-01"},Ae={class:"flex items-center"},ze={class:"relative flex items-center rounded-md bg-white dark:bg-dark-header shadow-sm md:items-stretch"},Pe={class:"sr-only"},Ie={class:"sr-only"},Oe={class:"hidden md:ml-4 md:flex md:items-center"},Re={class:"shadow ring-1 ring-black ring-opacity-5 lg:flex lg:flex-auto lg:flex-col"},Ge={class:"grid grid-cols-7 gap-px border-b border-gray-300 dark:border-gray-600 bg-gray-200 dark:bg-gray-700 text-center text-xs font-semibold leading-6 text-gray-700 dark:text-gray-400 lg:flex-none"},Ve={class:"bg-white dark:bg-dark-body py-2"},Ye={class:"bg-white dark:bg-dark-body py-2"},Ee={class:"bg-white dark:bg-dark-body py-2"},qe={class:"bg-white dark:bg-dark-body py-2"},He={class:"bg-white dark:bg-dark-body py-2"},Ue={class:"bg-white dark:bg-dark-body py-2"},We={class:"bg-white dark:bg-dark-body py-2"},Je={class:"flex bg-gray-200 dark:bg-gray-700 text-xs leading-6 text-gray-700 dark:text-gray-400 lg:flex-auto"},Ke=["datetime"],Qe={class:"flex"},Xe={key:0,class:"mt-2"},Ze=["href"],et={class:"flex-auto truncate font-medium text-gray-900 dark:text-gray-400 group-hover:text-gray-300"},tt=["datetime"],st={key:0,class:"text-gray-500"},at=["datetime"],nt={class:"flex"},rt={class:"sr-only"},lt={key:0,class:"-mx-0.5 mt-auto flex flex-wrap-reverse"},ot={key:0,class:"px-4 py-10 sm:px-6 lg:hidden"},it={class:"divide-y divide-gray-100 overflow-hidden rounded-lg bg-white text-sm shadow ring-1 ring-black ring-opacity-5"},dt={class:"flex-auto"},ct={class:"font-semibold text-gray-900"},ut=["datetime"],mt=["href"],_t={class:"sr-only"},ht={name:"DashboardScheduleCalendar"},gt=Object.assign(ht,{props:{calendar:{type:Object,required:!0}},emits:["previousMonth","nextMonth"],setup(S,{emit:y}){const p=y,g=S.calendar.days.find(i=>i.isSelected);return(i,l)=>{var v;const m=q("tooltip");return e(),a("div",Le,[t("header",je,[t("h1",Fe,[t("time",Ne,s(S.calendar.month),1)]),t("div",Ae,[t("div",ze,[t("span",{class:"cursor-pointer flex h-9 w-12 items-center justify-center rounded-l-md border-y border-l border-gray-300 dark:border-gray-500 pr-1 text-gray-400 dark:text-gray-500 hover:text-gray-500 focus:relative md:w-9 md:pr-0 md:hover:bg-gray-50 dark:md:hover:bg-black",onClick:l[0]||(l[0]=r=>p("previousMonth"))},[t("span",Pe,s(i.$trans("pagination.previous")),1),c(k(K),{class:"h-5 w-5","aria-hidden":"true"})]),l[2]||(l[2]=t("span",{class:"relative -mx-px h-5 w-px bg-gray-300 md:hidden"},null,-1)),t("span",{class:"cursor-pointer flex h-9 w-12 items-center justify-center rounded-r-md border-y border-r border-gray-300 dark:border-gray-500 pl-1 text-gray-400 dark:text-gray-500 hover:text-gray-500 focus:relative md:w-9 md:pl-0 md:hover:bg-gray-50 dark:md:hover:bg-black",onClick:l[1]||(l[1]=r=>p("nextMonth"))},[t("span",Ie,s(i.$trans("pagination.next")),1),c(k(Q),{class:"h-5 w-5","aria-hidden":"true"})])]),t("div",Oe,[H(i.$slots,"action")])])]),t("div",Re,[t("div",Ge,[t("div",Ve,s(i.$trans("list.days_short.monday")),1),t("div",Ye,s(i.$trans("list.days_short.tuesday")),1),t("div",Ee,s(i.$trans("list.days_short.wednesday")),1),t("div",qe,s(i.$trans("list.days_short.thursday")),1),t("div",He,s(i.$trans("list.days_short.friday")),1),t("div",Ue,s(i.$trans("list.days_short.saturday")),1),t("div",We,s(i.$trans("list.days_short.sunday")),1)]),t("div",Je,[t("div",{class:M(["hidden w-full lg:grid lg:grid-cols-7 lg:gap-px",{"lg:grid-rows-4":S.calendar.days.length<=28,"lg:grid-rows-5":S.calendar.days.length>28&&S.calendar.days.length<=35,"lg:grid-rows-6":S.calendar.days.length>35}])},[(e(!0),a(x,null,$(S.calendar.days,r=>(e(),a("div",{key:r.date,class:M([r.isCurrentMonth?"bg-white dark:bg-dark-header":"bg-gray-50 dark:bg-dark-body text-gray-500","relative px-3 py-2"])},[t("time",{datetime:r.date,class:M(r.isToday?"flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-dark-primary font-semibold text-white":void 0)},s(r.date.split("-").pop().replace(/^0/,"")),11,Ke),t("div",Qe,[(e(!0),a(x,null,$(r.attendances,n=>(e(),a("span",{key:n.studentName},[t("small",null,[n.code?(e(),a("span",{key:0,class:M(["rounded-full px-2 py-1 text-white",{"bg-primary":n.code==="H","bg-success":n.code==="P","bg-danger":n.code==="A","bg-info":n.code==="L","bg-warning":n.code==="HD"}])},s(r.attendances.length>1?n.idNumber:n.code),3)):h("",!0)])]))),128))]),r.events.length>0?(e(),a("ol",Xe,[(e(!0),a(x,null,$(r.events.slice(0,2),n=>(e(),a("li",{key:n.id},[t("a",{href:n.href,class:"group flex"},[U((e(),a("p",et,[_(s(n.name),1)])),[[m,n.name]]),t("time",{datetime:n.datetime,class:"ml-3 hidden flex-none text-gray-500 group-hover:text-gray-300 xl:block"},s(n.time),9,tt)],8,Ze)]))),128)),r.events.length>2?(e(),a("li",st," + "+s(r.events.length-2)+" "+s(i.$trans("general.more")),1)):h("",!0)])):h("",!0)],2))),128))],2),t("div",{class:M(["isolate grid w-full grid-cols-7 gap-px lg:hidden",{"lg:grid-rows-4":S.calendar.days.length<=28,"lg:grid-rows-5":S.calendar.days.length>28&&S.calendar.days.length<=35,"lg:grid-rows-6":S.calendar.days.length>35}])},[(e(!0),a(x,null,$(S.calendar.days,r=>(e(),a("button",{key:r.date,type:"button",class:M([r.isCurrentMonth?"bg-white":"bg-gray-50",(r.isSelected||r.isToday)&&"font-semibold",r.isSelected&&"text-white",!r.isSelected&&r.isToday&&"text-primary",!r.isSelected&&r.isCurrentMonth&&!r.isToday&&"text-gray-900",!r.isSelected&&!r.isCurrentMonth&&!r.isToday&&"text-gray-500","flex h-14 flex-col px-3 py-2 hover:bg-gray-100 focus:z-10"])},[t("time",{datetime:r.date,class:M([r.isSelected&&"flex h-6 w-6 items-center justify-center rounded-full",r.isSelected&&r.isToday&&"bg-primary dark:bg-dark-primary",r.isSelected&&!r.isToday&&"bg-gray-900","ml-auto"])},s(r.date.split("-").pop().replace(/^0/,"")),11,at),t("div",nt,[(e(!0),a(x,null,$(r.attendances,(n,b)=>(e(),a("span",{key:n.studentName},[t("small",null,[n.code?(e(),a("span",{key:0,class:M(["rounded-full px-2 py-1 text-white",{"bg-success":n.code==="P","bg-danger":n.code==="A","bg-info":n.code==="L","bg-warning":n.code==="HD"}])},s(b+1),3)):h("",!0)])]))),128))]),t("span",rt,s(r.events.length)+" "+s(i.$trans("general.events")),1),r.events.length>0?(e(),a("span",lt,[(e(!0),a(x,null,$(r.events,n=>(e(),a("span",{key:n.id,class:"mx-0.5 mb-1 h-1.5 w-1.5 rounded-full bg-gray-400"}))),128))])):h("",!0)],2))),128))],2)])]),((v=k(g))==null?void 0:v.events.length)>0?(e(),a("div",ot,[t("ol",it,[(e(!0),a(x,null,$(k(g).events,r=>(e(),a("li",{key:r.id,class:"group flex p-4 pr-6 focus-within:bg-gray-50 hover:bg-gray-50"},[t("div",dt,[t("p",ct,s(r.name),1),t("time",{datetime:r.datetime,class:"mt-2 flex items-center text-gray-700"},[c(k(X),{class:"mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),_(" "+s(r.time),1)],8,ut)]),t("a",{href:r.href,class:"ml-6 flex-none self-center rounded-md bg-white px-3 py-2 font-semibold text-gray-900 opacity-0 shadow-sm ring-1 ring-inset ring-gray-300 hover:ring-gray-400 focus:opacity-100 group-hover:opacity-100"},[l[3]||(l[3]=_("Edit")),t("span",_t,", "+s(r.name),1)],8,mt)]))),128))])])):h("",!0)])}}}),pt={class:"scroller-thin-y scroller-hidden max-h-96"},bt=["onClick"],ft={class:"flex items-center"},yt={class:"shrink-0"},vt={class:"ml-5 flex w-0 flex-1 items-center"},xt={class:"dark:text-gray-400"},kt={key:0,class:"fas fa-thumbtack"},$t={key:0,class:"p-2"},wt={__name:"FeedItem",props:{feedItems:{type:Array,default:()=>[]}},setup(S){const y=A(),p=d=>{d.hasDetail&&(d.type=="announcement"?y.push({name:"CommunicationAnnouncementShow",params:{uuid:d.uuid}}):d.type=="event"?y.push({name:"CalendarEventShow",params:{uuid:d.uuid}}):d.type=="exam"?y.push({name:"ExamSchedule"}):d.type=="diary"?y.push({name:"ResourceDiaryShow",params:{uuid:d.uuid}}):d.type=="assignment"?y.push({name:"ResourceAssignmentShow",params:{uuid:d.uuid}}):d.type=="learning_material"?y.push({name:"ResourceLearningMaterialShow",params:{uuid:d.uuid}}):d.type=="meal"&&y.push({name:"MessMealLogShow",params:{uuid:d.uuid}}))};return(d,g)=>{const i=f("TextMuted"),l=f("BaseAlert");return e(),a("div",pt,[(e(!0),a(x,null,$(S.feedItems,m=>(e(),a("div",{class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:v=>p(m)},[t("div",ft,[t("div",yt,[t("div",{class:M(["rounded-full p-2",[m.color]])},[t("i",{class:M([m.icon,"flex h-6 w-6 items-center justify-center text-white"])},null,2)],2)]),t("div",vt,[t("div",null,[t("p",xt,[_(s(m.title)+" ",1),m.isPinned?(e(),a("i",kt)):h("",!0)]),m.subTitle?(e(),w(i,{key:0,block:""},{default:o(()=>[_(s(m.subTitle),1)]),_:2},1024)):h("",!0),c(i,{block:""},{default:o(()=>[_(s(m.duration),1)]),_:2},1024)])])])],8,bt))),256)),S.feedItems.length==0?(e(),a("div",$t,[c(l,{size:"xs",design:"info"},{default:o(()=>[_(s(d.$trans("dashboard.nothing_to_show")),1)]),_:1})])):h("",!0)])}}},St={class:"scroller-thin-y scroller-hidden max-h-96"},Ct={class:"p-2"},Tt={key:0,class:"text-center text-sm font-semibold text-gray-800 dark:text-gray-200"},Bt={class:"mt-2"},Mt={class:"mt-2 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-800"},Dt={class:"flex justify-between items-center text-sm"},Lt={class:"font-medium"},jt={class:"text-xs"},Ft={key:0,class:"mt-1 flex justify-between items-center text-xs"},Nt={key:0},At={key:1,class:"mt-1 text-xs"},zt={key:0,class:"p-2"},Pt={key:0,class:"mt-2 p-2"},It={class:"flex justify-between items-center text-sm"},Ot={class:"font-medium"},Rt={class:"text-xs"},Gt={class:"mt-1 flex justify-between items-center text-xs"},Vt={key:0},Yt={key:0},Et={key:0,class:"mt-1 text-xs"},qt={key:1,class:"p-2"},Ht={class:"p-2"},Ut={__name:"Timetable",setup(S){const y=L(),p=D(!1),d=j({students:[],sessions:[],employee:null}),g=async()=>{p.value=!0,await y.dispatch("dashboard/getTimetable").then(l=>{P(["student","guardian"],"any")?d.students=l:(d.sessions=l.sessions||[],d.employee=l.employee||{}),p.value=!1}).catch(l=>{p.value=!1})},i=()=>{window.open("/app/academic/timetables/teacher/export?action=print")};return F(async()=>{await g()}),(l,m)=>{const v=f("BaseAlert"),r=f("BaseFieldset"),n=f("BaseCard"),b=f("BaseButton");return e(),a("div",St,[k(P)(["student","guardian"],"any")?(e(),w(n,{key:0,"no-content-padding":"","no-padding":"","is-loading":p.value},{default:o(()=>[(e(!0),a(x,null,$(d.students,(T,B)=>(e(),a("div",Ct,[c(r,null,{legend:o(()=>[_(s(T.name)+" - "+s(T.batch),1)]),default:o(()=>[T.room?(e(),a("p",Tt,s(T.room),1)):h("",!0),t("div",Bt,[T.info?(e(),w(v,{key:0,size:"xs",design:"info"},{default:o(()=>[_(s(T.info),1)]),_:2},1024)):h("",!0),t("div",Mt,[(e(!0),a(x,null,$(T.sessions,(u,I)=>(e(),a("div",{key:I,class:M(["",["p-3",I%2===0&&!u.isCurrent?"bg-white dark:bg-dark-body":"bg-gray-100 dark:bg-dark-header",u.isCurrent?"bg-success dark:bg-success text-white":"text-gray-800 dark:text-gray-200"]])},[t("div",Dt,[t("span",Lt,s(u.name),1),t("span",jt,[_(s(u.startTime.formatted)+" - "+s(u.endTime.formatted)+" ",1),m[0]||(m[0]=t("i",{class:"far fa-clock"},null,-1))])]),(e(!0),a(x,null,$(u.allotments,(N,V)=>{var O,R;return e(),a("div",{key:`allotment-${V}`},[(O=N.subject)!=null&&O.name?(e(),a("div",Ft,[t("span",null,s(N.subject.name)+" ("+s(N.subject.code)+")",1),(R=N.employee)!=null&&R.name?(e(),a("span",Nt,s(N.employee.name)+" ("+s(N.employee.designation)+") ",1)):h("",!0)])):h("",!0),u.room?(e(),a("div",At,s(u.room),1)):h("",!0)])}),128))],2))),128))])])]),_:2},1024)]))),256)),d.students.length==0?(e(),a("div",zt,[c(v,{size:"xs",design:"info"},{default:o(()=>[_(s(l.$trans("dashboard.nothing_to_show")),1)]),_:1})])):h("",!0)]),_:1},8,["is-loading"])):(e(),w(n,{key:1,"no-content-padding":"","no-padding":"","is-loading":p.value},{default:o(()=>{var T;return[(T=d.employee)!=null&&T.name?(e(),a("div",Pt,[c(r,null,{legend:o(()=>[_(s(d.employee.name)+" ("+s(d.employee.designation)+") ",1)]),default:o(()=>[(e(!0),a(x,null,$(d.sessions,(B,u)=>(e(),a("div",{key:u,class:M(["",["p-3",u%2===0?"bg-white dark:bg-dark-body":"bg-gray-100 dark:bg-dark-header"]])},[t("div",It,[t("span",Ot,s(B.name),1),t("span",Rt,[_(s(B.startTime.formatted)+" - "+s(B.endTime.formatted)+" ",1),m[1]||(m[1]=t("i",{class:"far fa-clock"},null,-1))])]),t("div",Gt,[B.batch?(e(),a("span",Vt,s(B.batch),1)):h("",!0),t("span",null,[_(s(B.subject.name)+" ",1),B.subject.code?(e(),a("span",Yt,"("+s(B.subject.code)+")",1)):h("",!0)])]),B.room?(e(),a("div",Et,s(B.room),1)):h("",!0)],2))),128))]),_:1})])):h("",!0),d.sessions.length==0?(e(),a("div",qt,[c(v,{size:"xs",design:"info"},{default:o(()=>[_(s(l.$trans("dashboard.nothing_to_show")),1)]),_:1})])):h("",!0),t("div",Ht,[c(b,{block:"",design:"primary",onClick:i},{default:o(()=>[_(s(l.$trans("global.print",{attribute:l.$trans("academic.timetable.teacher_timetable")})),1)]),_:1})])]}),_:1},8,["is-loading"]))])}}},Wt={class:"scroller-thin-y scroller-hidden max-h-96"},Jt={class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 text-gray-700 dark:text-gray-300"},Kt={class:"text-center text-sm"},Qt={key:0,class:"mt-4 border-2 border-primary dark:border-gray-200 rounded-lg px-4 py-2"},Xt={class:"flex text-sm"},Zt={class:"flex-1"},es={class:"font-medium"},ts={class:"flex-1"},ss={class:"mt-4 flex justify-between"},as={class:"flex-1"},ns={class:""},rs={class:"mt-1 flex text-xs"},ls={class:"flex-1"},os={class:"flex-1"},is={class:"flex-1"},ds={class:"mt-1 flex text-xs"},cs={class:"flex-1"},us={class:"flex-1"},ms={key:0,class:"p-2"},_s={__name:"TransportRoute",setup(S){const y=L(),p=D(!1),d=j({transportRoutes:[]}),g=async()=>{p.value=!0,await y.dispatch("dashboard/getTransportRoute").then(i=>{d.transportRoutes=i,p.value=!1}).catch(i=>{p.value=!1})};return F(async()=>{await g()}),(i,l)=>{const m=f("TextMuted"),v=f("BaseAlert"),r=f("BaseLoader");return e(),a("div",Wt,[c(r,{"is-loading":p.value},{default:o(()=>[(e(!0),a(x,null,$(d.transportRoutes,n=>(e(),a("div",Jt,[t("div",Kt,[_(s(n.vehicle.name)+" ",1),c(m,null,{default:o(()=>[_("("+s(n.vehicle.registrationNumber)+")",1)]),_:2},1024)]),n.employees.length>0?(e(),a("div",Qt,[(e(!0),a(x,null,$(n.employees,b=>(e(),a("div",Xt,[t("div",Zt,[t("div",es,s(b.name),1)]),t("div",ts,[_(s(b.title)+" ",1),c(m,null,{default:o(()=>[_(s(b.contactNumber),1)]),_:2},1024)])]))),256))])):h("",!0),t("div",ss,[t("div",as,[t("div",ns,[l[0]||(l[0]=t("i",{class:"fas fa-arrow-up"},null,-1)),_(" "+s(i.$trans("transport.circle.directions.arrival")),1)]),(e(!0),a(x,null,$(n.arrivalStoppages,b=>(e(),a("div",rs,[t("div",ls,[t("div",null,s(b.name),1)]),t("div",os,s(b.arrivalTime.formatted),1)]))),256))]),t("div",is,[t("div",null,[l[1]||(l[1]=t("i",{class:"fas fa-arrow-down"},null,-1)),_(" "+s(i.$trans("transport.circle.directions.departure")),1)]),(e(!0),a(x,null,$(n.departureStoppages,b=>(e(),a("div",ds,[t("div",cs,[t("div",null,s(b.name),1)]),t("div",us,s(b.arrivalTime.formatted),1)]))),256))])])]))),256)),d.transportRoutes.length==0?(e(),a("div",ms,[c(v,{size:"xs",design:"info"},{default:o(()=>[_(s(i.$trans("dashboard.nothing_to_show")),1)]),_:1})])):h("",!0)]),_:1},8,["is-loading"])])}}},hs={class:"scroller-thin-y scroller-hidden max-h-96"},gs={class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 text-gray-700 dark:text-gray-300"},ps={class:"text-sm"},bs={class:"mt-2"},fs={class:"text-sm font-semibold"},ys={class:"mt-1"},vs={key:0,class:"p-2"},xs={__name:"MessSchedule",setup(S){const y=L(),p=D(!1),d=j({messSchedules:[]}),g=async()=>{p.value=!0,await y.dispatch("dashboard/getMessSchedule").then(i=>{d.messSchedules=i,p.value=!1}).catch(i=>{p.value=!1})};return F(async()=>{await g()}),(i,l)=>{const m=f("TextMuted"),v=f("BaseAlert"),r=f("BaseLoader");return e(),a("div",hs,[c(r,{"is-loading":p.value},{default:o(()=>[(e(!0),a(x,null,$(d.messSchedules,n=>(e(),a("div",gs,[t("div",ps,[l[0]||(l[0]=t("i",{class:"fas fa-calendar-days mr-2"},null,-1)),t("span",null,s(i.moment(n.date.value).format("dddd Do, MMMM YYYY")),1)]),(e(!0),a(x,null,$(n.meals,b=>(e(),a("div",bs,[t("div",fs,s(b.name),1),t("div",ys,[c(m,{block:""},{default:o(()=>[_(s(b.items),1)]),_:2},1024)])]))),256))]))),256)),d.messSchedules.length==0?(e(),a("div",vs,[c(v,{size:"xs",design:"info"},{default:o(()=>[_(s(i.$trans("dashboard.nothing_to_show")),1)]),_:1})])):h("",!0)]),_:1},8,["is-loading"])])}}},ks={class:"scroller-thin-y scroller-hidden max-h-96"},$s={__name:"InstituteInfo",setup(S){const y=L(),p=D(!1),d=j({info:[],incharges:[]}),g=async()=>{p.value=!0,await y.dispatch("dashboard/getInstituteInfo").then(i=>{d.info=i.info,d.incharges=i.incharges,p.value=!1}).catch(i=>{p.value=!1})};return F(async()=>{await g()}),(i,l)=>{const m=f("ListItemView"),v=f("ListContainerVertical"),r=f("TextMuted"),n=f("BaseLoader");return e(),a("div",ks,[c(n,{"is-loading":p.value},{default:o(()=>[c(v,null,{default:o(()=>[(e(!0),a(x,null,$(d.info,b=>(e(),w(m,{truncate:!1,label:b.label||"Â "},{default:o(()=>[_(s(b.value),1)]),_:2},1032,["label"]))),256))]),_:1}),c(v,null,{default:o(()=>[(e(!0),a(x,null,$(d.incharges,b=>(e(),w(m,{truncate:!1,label:b.title},{default:o(()=>[_(s(b.name)+" ",1),b.email?(e(),w(r,{key:0,block:""},{default:o(()=>[_(s(b.email),1)]),_:2},1024)):h("",!0),b.contactNumber?(e(),w(r,{key:1,block:""},{default:o(()=>[_(s(b.contactNumber),1)]),_:2},1024)):h("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),_:1},8,["is-loading"])])}}},ws={class:"text-2xl font-semibold"},Ss={name:"DashboardFeed"},Cs=Object.assign(Ss,{setup(S){A();const y=L(),p=Z("moment"),d=W("profile.name"),g=G("mess.showMessScheduleInDashboard"),i=G("transport.showTransportRouteInDashboard"),l=D(!1),m=j({activeTab:"feed",feedItems:[],calendar:{days:[],lastMonthDate:"",nextMonthDate:""}}),v=async(r="")=>{l.value=!0,await y.dispatch("dashboard/getSchedule",{type:r,lastMonthDate:m.calendar.lastMonthDate,nextMonthDate:m.calendar.nextMonthDate}).then(n=>{l.value=!1,m.feedItems=n.feedItems,m.calendar=n.calendar}).catch(n=>{l.value=!1})};return F(async()=>{await v()}),(r,n)=>{const b=f("TabItem"),T=f("TabGroup"),B=f("BaseFlexCard");return e(),a(x,null,[c(B,{class:"md:w-1/3","is-loading":l.value},{title:o(()=>[_(s(r.$trans("general.greeting_message",{name:k(d)}))+" ",1),t("h3",ws,s(k(p)().format("dddd Do, MMMM YYYY")),1)]),default:o(()=>[c(T,null,{default:o(()=>[c(b,{first:"",label:r.$trans("dashboard.feed"),onClick:n[0]||(n[0]=u=>m.activeTab="feed"),"is-active":m.activeTab=="feed"},null,8,["label","is-active"]),c(b,{label:r.$trans("academic.timetable.timetable"),onClick:n[1]||(n[1]=u=>m.activeTab="timetable"),"is-active":m.activeTab=="timetable"},null,8,["label","is-active"]),k(i)&&k(P)(["student","guardian"],"any")?(e(),w(b,{key:0,label:r.$trans("transport.transport"),onClick:n[2]||(n[2]=u=>m.activeTab="transport"),"is-active":m.activeTab=="transport"},null,8,["label","is-active"])):h("",!0),k(g)?(e(),w(b,{key:1,label:r.$trans("mess.mess"),onClick:n[3]||(n[3]=u=>m.activeTab="mess"),"is-active":m.activeTab=="mess"},null,8,["label","is-active"])):h("",!0),c(b,{last:"",label:r.$trans("general.institute_info"),onClick:n[4]||(n[4]=u=>m.activeTab="instituteInfo"),"is-active":m.activeTab=="instituteInfo"},null,8,["label","is-active"])]),_:1}),m.activeTab=="feed"?(e(),w(wt,{key:0,"feed-items":m.feedItems},null,8,["feed-items"])):h("",!0),m.activeTab=="timetable"?(e(),w(Ut,{key:1})):h("",!0),m.activeTab=="instituteInfo"?(e(),w($s,{key:2})):h("",!0),m.activeTab=="transport"&&k(P)(["student","guardian"],"any")?(e(),w(_s,{key:3})):h("",!0),m.activeTab=="mess"?(e(),w(xs,{key:4})):h("",!0)]),_:1},8,["is-loading"]),c(B,{class:"md:w-2/3","is-loading":l.value},{default:o(()=>[m.calendar.days.length>0?(e(),w(gt,{key:0,calendar:m.calendar,onPreviousMonth:n[5]||(n[5]=u=>v("previous")),onNextMonth:n[6]||(n[6]=u=>v("next"))},null,8,["calendar"])):h("",!0)]),_:1},8,["is-loading"])],64)}}}),Ts={class:"relative bg-black sm:rounded-lg"},Bs={key:0,class:"absolute right-0 top-0 mt-2 mr-2"},Ms={class:"flex"},Ds={class:"text-xs"},Ls={class:"-mt-12 flex w-full justify-center sm:-mt-16"},js=["src"],Fs={class:"mt-4 text-center text-white"},Ns={key:1,class:"py-2 flex justify-center items-center flex-wrap gap-1 text-white"},As={class:"text-white"},zs={class:"py-2 flex justify-center flex-wrap gap-2"},Ps={class:"px-4 py-2 space-y-2"},Is={name:"DashboardStudentList"},Os=Object.assign(Is,{setup(S){const y=A(),p=L(),{screenSize:d}=ee(),g=te(()=>l.fees.filter(r=>{var n;return r.studentUuid===((n=l.selectedStudent)==null?void 0:n.uuid)})),i=D(!1),l=j({selectedStudent:{},students:[],fees:[]}),m=r=>{l.selectedStudent=r},v=async(r="")=>{i.value=!0,await p.dispatch("dashboard/getStudentList").then(n=>{i.value=!1,l.fees=n.fees,l.students=n.students.map((b,T)=>(b.idNumber=T+1,b)),l.selectedStudent=l.students[0]||{}}).catch(n=>{i.value=!1})};return F(async()=>{await v()}),(r,n)=>{const b=f("BaseButton"),T=f("DropdownItem"),B=f("DropdownMenu"),u=f("TextMuted"),I=f("BaseBadge"),N=f("BaseFlexCard"),V=f("BaseLabel"),O=f("ProgressBar"),R=f("BaseFlexContainer"),J=q("tooltip");return e(),a(x,null,[c(ue,{student:l.selectedStudent},null,8,["student"]),c(R,null,{default:o(()=>[c(N,{class:"md:w-1/3 bg-black","is-loading":i.value},{default:o(()=>[t("div",Ts,[l.students.length>1?(e(),a("div",Bs,[c(B,{"double-top-margin":"","right-margin":!1,"no-width":""},{clickable:o(()=>[c(b,{size:"xs",design:"white"},{default:o(()=>[t("span",Ms,[H(r.$slots,"moduleOptionLabel",{},()=>[_(s(l.selectedStudent.name),1)]),c(k(se),{class:M(["ml-1 h-4 w-4"]),"aria-hidden":"true"})])]),_:3})]),default:o(()=>[(e(!0),a(x,null,$(l.students,(C,z)=>(e(),a(x,null,[C.uuid!==l.selectedStudent.uuid?(e(),w(T,{key:0,onClick:ua=>m(C)},{default:o(()=>[t("span",Ds,s(C.name)+" ("+s(C.idNumber)+")",1)]),_:2},1032,["onClick"])):h("",!0)],64))),256))]),_:3})])):h("",!0),n[5]||(n[5]=t("img",{class:"h-16 w-full object-cover sm:rounded-tl-lg sm:rounded-tr-lg lg:h-24",src:"/images/user-cover.jpeg",alt:""},null,-1)),t("div",Ls,[t("img",{onClick:n[0]||(n[0]=C=>k(y).push({name:"StudentShow",params:{uuid:l.selectedStudent.uuid}})),class:"h-24 w-24 rounded-full ring-4 ring-white sm:h-32 sm:w-32 cursor-pointer",src:l.selectedStudent.photo,alt:""},null,8,js)]),t("div",Fs,[t("h1",{class:"font-bold cursor-pointer",onClick:n[1]||(n[1]=C=>k(y).push({name:"StudentShow",params:{uuid:l.selectedStudent.uuid}}))},s(l.selectedStudent.name)+" ("+s(l.selectedStudent.idNumber)+") ",1),t("p",null,[_(s(l.selectedStudent.courseName)+" "+s(l.selectedStudent.batchName)+" ",1),c(u,{black:"",block:""},{default:o(()=>[_(s(l.selectedStudent.codeNumber),1)]),_:1})]),t("p",null,[n[3]||(n[3]=t("i",{class:"fas fa-mobile-alt"},null,-1)),_(" "+s(l.selectedStudent.contactNumber),1)])]),l.selectedStudent.mentor?U((e(),a("div",Ns,[n[4]||(n[4]=t("i",{class:"fas fa-crown"},null,-1)),_(" "+s(l.selectedStudent.mentor.name)+" ",1),t("span",As," ("+s(l.selectedStudent.mentor.designation)+") ",1)])),[[J,r.$trans("student.mentor.mentor")]]):h("",!0),t("div",zs,[(e(!0),a(x,null,$(l.selectedStudent.services,C=>(e(),w(I,{design:"info"},{default:o(()=>{var z;return[_(s((z=C.type)==null?void 0:z.label),1)]}),_:2},1024))),256))])])]),_:3},8,["is-loading"]),c(N,{class:"md:w-2/3","is-loading":i.value},{title:o(()=>[_(s(r.$trans("dashboard.fee_summary")),1)]),action:o(()=>[c(b,{size:"xs",design:"primary",onClick:n[2]||(n[2]=C=>k(y).push({name:"StudentShowFee",params:{uuid:l.selectedStudent.uuid}}))},{default:o(()=>[_(s(r.$trans("global.view",{attribute:r.$trans("student.fee.fee")})),1)]),_:1})]),default:o(()=>[t("div",Ps,[(e(!0),a(x,null,$(g.value,C=>(e(),a("div",null,[c(V,null,{default:o(()=>{var z;return[t("span",null,[_(s(C.installmentTitle)+" ",1),c(u,{block:!!k(d).small},{default:o(()=>[_("("+s(C.feeGroupName)+") ",1)]),_:2},1032,["block"]),(z=C.dueDate)!=null&&z.value?(e(),a("span",{key:0,class:M(["text-xs italic block sm:inline",{"text-danger":C.overdueDays>0,"text-success":C.overdueDays<=0}])},[_(s(C.dueOn)+" ",1),C.overdueDays>0?(e(),a("span",{key:0,class:M({block:!!k(d).small})}," ("+s(C.overdueBy)+")",3)):h("",!0)],2)):h("",!0)]),c(u,null,{default:o(()=>[_(s(C.paid.formatted)+" / "+s(C.total.formatted),1)]),_:2},1024)]}),_:2},1024),c(O,{space:"",height:"h-2",percent:C.percent,max:C.total.value,color:C.color},null,8,["percent","max","color"])]))),256))])]),_:1},8,["is-loading"])]),_:3})],64)}}}),Rs={key:0},Gs={name:"DashboardFormList"},Vs=Object.assign(Gs,{setup(S){ae();const y=A(),p=L(),d=D(!1),g=j({forms:[]}),i=async()=>{d.value=!0,await p.dispatch("dashboard/getFormList").then(l=>{g.forms=l,d.value=!1}).catch(l=>{d.value=!1})};return F(async()=>{await i()}),(l,m)=>{const v=f("TextMuted"),r=f("BaseAlert");return g.forms.length>0?(e(),a("div",Rs,[(e(!0),a(x,null,$(g.forms,n=>(e(),w(r,{design:"info",size:"xs",key:n.uuid,class:"cursor-pointer",onClick:b=>k(y).push({name:"FormSubmit",params:{uuid:n.uuid}})},{default:o(()=>[_(s(n.name)+" ",1),c(v,{block:"",class:"text-white"},{default:o(()=>[_(s(n.summary),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):h("",!0)}}}),Ys={key:0,class:"mt-4 px-4"},Es={class:"flex gap-4 scroller-thin-x scroller-hidden scrollbar-track-transparent scrollbar-thumb-body dark:scrollbar-thumb-dm-body"},qs={class:"inline-block flex-shrink-0 text-center w-32"},Hs={class:"flex justify-center"},Us=["src"],Ws={class:"mt-2 text-xs text-gray-500 flex flex-col gap-1"},Js={name:"DashboardCelebration"},Ks=Object.assign(Js,{setup(S){A();const y=L(),p=D(!1);D(!1);const d=j({data:[]}),g=async()=>{p.value=!0,await y.dispatch("dashboard/fetchCelebration").then(i=>{p.value=!1,d.data=i}).catch(i=>{p.value=!1})};return F(async()=>{await g()}),(i,l)=>{const m=f("BaseCard"),v=f("ParentTransition");return d.data.length>0?(e(),a("div",Ys,[c(v,{appear:"",visibility:!0},{default:o(()=>[c(m,null,{title:o(()=>[t("h1",null,s(i.$trans("calendar.celebration.celebration")),1)]),default:o(()=>[t("div",Es,[(e(!0),a(x,null,$(d.data,r=>{var n;return e(),a("div",qs,[t("div",Hs,[t("img",{src:r.photo,class:"w-24 h-24 rounded-full border-2 border-primary object-cover"},null,8,Us)]),t("div",Ws,[t("h1",null,s(r.name),1),t("p",null,s(r.detail),1),t("p",null,s((n=r.birthDate.age)==null?void 0:n.short),1)])])}),256))])]),_:1})]),_:1})])):h("",!0)}}}),Qs={key:0},Xs={class:"mt-4 px-4"},Zs={class:"mt-4 grid grid-cols-3 gap-4"},ea=["onClick"],ta={class:"relative h-72 flex border border-gray-200 dark:border-gray-700 shadow-lg"},sa={class:"relative overflow-hidden w-full h-full"},aa=["src"],na={class:"absolute py-1 bottom-0 w-full bg-black opacity-70 flex items-center justify-center rounded-b-lg"},ra={class:"px-4 text-center truncate text-gray-50"},la={class:"mt-1 block text-gray-50 text-xs"},oa={name:"DashboardGallery"},ia=Object.assign(oa,{setup(S){A();const y=L(),p=D(!1),d=D(!1),g=j({images:[],galleries:[]}),i=async(m="")=>{p.value=!0,await y.dispatch("dashboard/fetchGallery").then(v=>{p.value=!1,g.galleries=v}).catch(v=>{p.value=!1})},l=m=>{g.images=m.images.map(v=>v.url),d.value=!d.value};return F(async()=>{await i()}),(m,v)=>{const r=f("ParentTransition");return g.galleries?(e(),a("div",Qs,[t("div",Xs,[c(r,{appear:"",visibility:!0},{default:o(()=>[t("div",Zs,[(e(!0),a(x,null,$(g.galleries,n=>(e(),a("div",{class:"col-span-3 sm:col-span-1 cursor-pointer",onClick:b=>l(n)},[t("div",ta,[t("div",sa,[t("img",{src:n.thumbnailUrl,class:"w-full h-full object-cover rounded-lg"},null,8,aa),t("div",na,[t("div",ra,[_(s(n.title)+" ",1),t("span",la,s(n.date.formatted),1)])])])])],8,ea))),256))])]),_:1})]),c(k(me),{toggler:d.value,sources:g.images},null,8,["toggler","sources"])])):h("",!0)}}}),da={key:1,class:"mt-4 px-4"},ca={key:2,class:"mt-4 px-4"},pa={__name:"Index",setup(S){const y=W("currentPeriodId"),p=G("calendar.showCelebrationInDashboard"),d=G("gallery.showGalleryInDashboard");return(g,i)=>{const l=f("BaseFlexContainer");return e(),a("div",null,[k(Y)("dashboard:stat")?(e(),w(De,{key:0})):h("",!0),k(y)&&k(Y)("form:submit")?(e(),a("div",da,[c(Vs)])):h("",!0),k(P)(["student","guardian"],"any")?(e(),a("div",ca,[c(Os)])):h("",!0),c(l,{class:"mt-4 px-4"},{default:o(()=>[c(Cs)]),_:1}),k(y)&&k(p)?(e(),w(Ks,{key:3})):h("",!0),k(y)&&k(d)&&k(P)(["student","guardian"],"any")?(e(),w(ia,{key:4})):h("",!0)])}}};export{pa as default};
