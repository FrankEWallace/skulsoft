import{m as B,r as o,t as _,o as b,w as e,d as h,e as t,u as U,i as j,k as L,z as g,p as M,f as u,a as A,F as w,y as O,v as l,x as i,b as S}from"./app-Cvm44xuh.js";const E={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},q={class:"col-span-3 sm:col-span-1"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(d,{emit:y}){const f=y,v={name:"",alias:"",number:""},r=B({...v});return($,s)=>{const c=o("BaseInput"),F=o("FilterForm");return b(),_(F,{"init-form":v,form:r,onHide:s[3]||(s[3]=n=>f("hide"))},{default:e(()=>[h("div",E,[h("div",z,[t(c,{type:"text",modelValue:r.name,"onUpdate:modelValue":s[0]||(s[0]=n=>r.name=n),name:"name",label:$.$trans("finance.account.props.name")},null,8,["modelValue","label"])]),h("div",q,[t(c,{type:"text",modelValue:r.alias,"onUpdate:modelValue":s[1]||(s[1]=n=>r.alias=n),name:"alias",label:$.$trans("finance.account.props.alias")},null,8,["modelValue","label"])]),h("div",G,[t(c,{type:"text",modelValue:r.number,"onUpdate:modelValue":s[2]||(s[2]=n=>r.number=n),name:"number",label:$.$trans("finance.account.props.number")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},K={name:"StudentAccountList"},W=Object.assign(K,{props:{student:{type:Object,default(){return{}}}},setup(d){const y=U(),f=j(),v=L("emitter");let r=["filter"];(g("student:edit")||g("student-record:manage"))&&r.unshift("create");const $="student/account/",s=M(!1),c=B({}),F=n=>{Object.assign(c,n)};return(n,m)=>{const I=o("PageHeaderAction"),D=o("PageHeader"),V=o("ParentTransition"),p=o("DataCell"),k=o("FloatingMenuItem"),N=o("FloatingMenu"),H=o("DataRow"),P=o("BaseButton"),R=o("DataTable"),T=o("ListItem");return b(),_(T,{"init-url":$,uuid:u(y).params.uuid,onSetItems:F},{header:e(()=>[d.student.uuid?(b(),_(D,{key:0,title:n.$trans("finance.account.account"),navs:[{label:n.$trans("student.student"),path:"Student"},{label:d.student.contact.name,path:{name:"StudentShow",params:{uuid:d.student.uuid}}}]},{default:e(()=>[t(I,{url:`students/${d.student.uuid}/accounts/`,name:"StudentAccount",title:n.$trans("finance.account.account"),actions:u(r),"dropdown-actions":["print","pdf","excel"],onToggleFilter:m[0]||(m[0]=a=>s.value=!s.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):S("",!0)]),filter:e(()=>[t(V,{appear:"",visibility:s.value},{default:e(()=>[t(J,{onRefresh:m[1]||(m[1]=a=>u(v).emit("listItems")),onHide:m[2]||(m[2]=a=>s.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(V,{appear:"",visibility:!0},{default:e(()=>[t(R,{header:c.headers,meta:c.meta,module:"student.account",onRefresh:m[4]||(m[4]=a=>u(v).emit("listItems"))},{actionButton:e(()=>[u(g)("student:edit")||u(g)("student-record:manage")?(b(),_(P,{key:0,onClick:m[3]||(m[3]=a=>u(f).push({name:"StudentAccountCreate"}))},{default:e(()=>[l(i(n.$trans("global.add",{attribute:n.$trans("finance.account.account")})),1)]),_:1})):S("",!0)]),default:e(()=>[(b(!0),A(w,null,O(c.data,a=>(b(),_(H,{key:a.uuid,onDoubleClick:C=>u(f).push({name:"StudentAccountShow",params:{uuid:d.student.uuid,muuid:a.uuid}})},{default:e(()=>[t(p,{name:"name"},{default:e(()=>[l(i(a.name),1)]),_:2},1024),t(p,{name:"alias"},{default:e(()=>[l(i(a.alias),1)]),_:2},1024),t(p,{name:"number"},{default:e(()=>[l(i(a.number),1)]),_:2},1024),t(p,{name:"bankName"},{default:e(()=>[l(i(a.bankName),1)]),_:2},1024),t(p,{name:"branchName"},{default:e(()=>[l(i(a.branchName),1)]),_:2},1024),t(p,{name:"createdAt"},{default:e(()=>[l(i(a.createdAt.formatted),1)]),_:2},1024),t(p,{name:"action"},{default:e(()=>[t(N,null,{default:e(()=>[t(k,{icon:"fas fa-arrow-circle-right",onClick:C=>u(f).push({name:"StudentAccountShow",params:{uuid:d.student.uuid,muuid:a.uuid}})},{default:e(()=>[l(i(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),u(g)("student:edit")||u(g)("student-record:manage")?(b(),A(w,{key:0},[t(k,{icon:"fas fa-edit",onClick:C=>u(f).push({name:"StudentAccountEdit",params:{uuid:d.student.uuid,muuid:a.uuid}})},{default:e(()=>[l(i(n.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t(k,{icon:"fas fa-copy",onClick:C=>u(f).push({name:"StudentAccountDuplicate",params:{uuid:d.student.uuid,muuid:a.uuid}})},{default:e(()=>[l(i(n.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),t(k,{icon:"fas fa-trash",onClick:C=>u(v).emit("deleteItem",{uuid:d.student.uuid,moduleUuid:a.uuid})},{default:e(()=>[l(i(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])],64)):S("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{W as default};
