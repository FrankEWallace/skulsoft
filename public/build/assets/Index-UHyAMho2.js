import{u as q,m as B,q as A,r as d,t as v,o as c,w as e,d as k,e as t,i as H,k as O,p as j,f as p,a as L,F as W,y as z,v as r,x as s,b as F}from"./app-Cvm44xuh.js";import{u as G}from"./useColumnVisibility-BfQRdpHQ.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={__name:"Filter",emits:["hide"],setup(I,{emit:b}){q();const y=b,D={issueStartDate:"",issueEndDate:"",dueStartDate:"",dueEndDate:"",codeNumber:""},m=B({...D}),$=B({isLoaded:!1});return A(async()=>{$.isLoaded=!0}),(f,i)=>{const _=d("BaseInput"),g=d("DatePicker"),l=d("FilterForm");return c(),v(l,{"init-form":D,form:m,multiple:[],onHide:i[5]||(i[5]=n=>y("hide"))},{default:e(()=>[k("div",J,[k("div",K,[t(_,{type:"text",modelValue:m.codeNumber,"onUpdate:modelValue":i[0]||(i[0]=n=>m.codeNumber=n),name:"codeNumber",label:f.$trans("library.transaction.props.code_number")},null,8,["modelValue","label"])]),k("div",Q,[t(g,{start:m.issueStartDate,"onUpdate:start":i[1]||(i[1]=n=>m.issueStartDate=n),end:m.issueEndDate,"onUpdate:end":i[2]||(i[2]=n=>m.issueEndDate=n),name:"issueDateBetween",as:"range",label:f.$trans("global.date_between",{attribute:f.$trans("library.transaction.props.issue_date")})},null,8,["start","end","label"])]),k("div",X,[t(g,{start:m.dueStartDate,"onUpdate:start":i[3]||(i[3]=n=>m.dueStartDate=n),end:m.dueEndDate,"onUpdate:end":i[4]||(i[4]=n=>m.dueEndDate=n),name:"dueDateBetween",as:"range",label:f.$trans("global.date_between",{attribute:f.$trans("library.transaction.props.due_date")})},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Z={key:1},x={name:"LibraryBookWiseTransactionList"},te=Object.assign(x,{setup(I){const b=H(),y=O("emitter"),{applyVisibility:D}=G("LibraryBookWiseTransaction");let m=["create","filter"],$=["print","pdf","excel"];const f="library/bookWiseTransaction/",i=j(!1),_=B({}),g=l=>{l.headers=D(l.headers),Object.assign(_,l)};return(l,n)=>{const T=d("BaseButton"),h=d("PageHeaderAction"),N=d("PageHeader"),C=d("ParentTransition"),u=d("DataCell"),S=d("TextMuted"),U=d("BaseBadge"),w=d("FloatingMenuItem"),V=d("FloatingMenu"),E=d("DataRow"),P=d("DataTable"),M=d("ListItem");return c(),v(M,{"init-url":f,onSetItems:g},{header:e(()=>[t(N,{title:l.$trans("library.transaction.book_wise_issue_return"),navs:[{label:l.$trans("library.library"),path:"Library"}]},{default:e(()=>[t(h,{url:"library/book-wise-transactions/",name:"LibraryTransaction",title:l.$trans("library.transaction.issue_return"),actions:p(m),"dropdown-actions":p($),headers:_.headers,onToggleFilter:n[1]||(n[1]=a=>i.value=!i.value)},{default:e(()=>[t(T,{design:"white",onClick:n[0]||(n[0]=a=>p(b).push({name:"LibraryTransactionList"}))},{default:e(()=>[r(s(l.$trans("library.transaction.issue_return")),1)]),_:1})]),_:1},8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(C,{appear:"",visibility:i.value},{default:e(()=>[t(Y,{onRefresh:n[2]||(n[2]=a=>p(y).emit("listItems")),onHide:n[3]||(n[3]=a=>i.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(C,{appear:"",visibility:!0},{default:e(()=>[t(P,{header:_.headers,meta:_.meta,module:"library.transaction",onRefresh:n[5]||(n[5]=a=>p(y).emit("listItems"))},{actionButton:e(()=>[t(T,{onClick:n[4]||(n[4]=a=>p(b).push({name:"LibraryTransactionCreate"}))},{default:e(()=>[r(s(l.$trans("global.add",{attribute:l.$trans("library.transaction.transaction")})),1)]),_:1})]),default:e(()=>[(c(!0),L(W,null,z(_.data,a=>(c(),v(E,{key:a.uuid,onDoubleClick:o=>p(b).push({name:"LibraryTransactionShow",params:{uuid:a.transactionUuid}})},{default:e(()=>[t(u,{name:"codeNumber"},{default:e(()=>[r(s(a.codeNumber),1)]),_:2},1024),t(u,{name:"to"},{default:e(()=>[r(s(a.to.label),1)]),_:2},1024),t(u,{name:"requester"},{default:e(()=>[r(s(a.requester.name)+" ",1),t(S,{block:""},{default:e(()=>[r(s(a.requester.contactNumber),1)]),_:2},1024)]),_:2},1024),t(u,{name:"requesterDetail"},{default:e(()=>[r(s(a.requesterDetail),1)]),_:2},1024),t(u,{name:"bookTitle"},{default:e(()=>[r(s(a.bookTitle),1)]),_:2},1024),t(u,{name:"bookNumber"},{default:e(()=>[r(s(a.bookCopyNumber),1)]),_:2},1024),t(u,{name:"issueDate"},{default:e(()=>[r(s(a.issueDate.formatted),1)]),_:2},1024),t(u,{name:"dueDate"},{default:e(()=>{var o;return[r(s(((o=a.dueDate)==null?void 0:o.formatted)||"-"),1)]}),_:2},1024),t(u,{name:"dueInDays"},{default:e(()=>[a.isOverdue?(c(),v(U,{key:0,design:"danger"},{default:e(()=>[r(s(a.dueInDays),1)]),_:2},1024)):F("",!0),a.isOverdue?F("",!0):(c(),L("span",Z,s(a.dueInDays),1))]),_:2},1024),t(u,{name:"returnDate"},{default:e(()=>{var o;return[r(s(((o=a.returnDate)==null?void 0:o.formatted)||"-"),1)]}),_:2},1024),t(u,{name:"charges"},{default:e(()=>{var o;return[r(s(((o=a.charge)==null?void 0:o.formatted)||"-"),1)]}),_:2},1024),t(u,{name:"returnStatus"},{default:e(()=>{var o;return[r(s(((o=a.returnStatus)==null?void 0:o.label)||"-"),1)]}),_:2},1024),t(u,{name:"condition"},{default:e(()=>{var o;return[r(s(((o=a.condition)==null?void 0:o.name)||"-"),1)]}),_:2},1024),t(u,{name:"createdAt"},{default:e(()=>[r(s(a.createdAt.formatted),1)]),_:2},1024),t(u,{name:"action"},{default:e(()=>[t(V,null,{default:e(()=>[t(w,{icon:"fas fa-arrow-circle-right",onClick:o=>p(b).push({name:"LibraryTransactionShow",params:{uuid:a.transactionUuid}})},{default:e(()=>[r(s(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(w,{icon:"fas fa-edit",onClick:o=>p(b).push({name:"LibraryTransactionEdit",params:{uuid:a.transactionUuid}})},{default:e(()=>[r(s(l.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t(w,{icon:"fas fa-trash",onClick:o=>p(y).emit("deleteItem",{uuid:a.transactionUuid})},{default:e(()=>[r(s(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{te as default};
