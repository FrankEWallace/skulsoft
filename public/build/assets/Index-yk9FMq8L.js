import{m as B,r as s,t as k,o as c,w as e,d as F,e as a,i as x,j as z,k as E,c as I,p as O,f as l,a as w,F as U,y as q,v as i,b,x as r}from"./app-Cvm44xuh.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(D,{emit:m}){const _=m,g={name:""},d=B({...g});return(h,f)=>{const T=s("BaseInput"),v=s("FilterForm");return c(),k(v,{"init-form":g,form:d,onHide:f[1]||(f[1]=p=>_("hide"))},{default:e(()=>[F("div",G,[F("div",J,[a(T,{type:"text",modelValue:d.name,"onUpdate:modelValue":f[0]||(f[0]=p=>d.name=p),name:"name",label:h.$trans("team.props.name")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},Q={key:0},W={name:"TeamList"},Y=Object.assign(W,{setup(D){const m=x(),_=z(),g=E("emitter"),d=I(()=>_.getters["auth/user/currentTeamId"]),h=I(()=>_.getters["auth/user/isSuperAdmin"]);let f=["filter"];h.value&&f.unshift("create");const T="team/",v=O(!1),p=B({}),S=n=>{Object.assign(p,n)},V=async n=>{n.id!=d.value&&await _.dispatch("team/select",{uuid:n.uuid}).then(async o=>{await _.dispatch("auth/user/fetch"),location.reload()}).catch(o=>{})};return(n,o)=>{const A=s("PageHeaderAction"),H=s("PageHeader"),y=s("ParentTransition"),M=s("TextMuted"),C=s("DataCell"),$=s("FloatingMenuItem"),P=s("FloatingMenu"),R=s("DataRow"),j=s("BaseButton"),L=s("DataTable"),N=s("ListItem");return c(),k(N,{"init-url":T,onSetItems:S},{header:e(()=>[a(H,{title:n.$trans("team.team")},{default:e(()=>[a(A,{url:"teams/",name:"Team",title:n.$trans("team.team"),actions:l(f),"dropdown-actions":["print","pdf","excel"],onToggleFilter:o[0]||(o[0]=t=>v.value=!v.value)},null,8,["title","actions"])]),_:1},8,["title"])]),filter:e(()=>[a(y,{appear:"",visibility:v.value},{default:e(()=>[a(K,{onRefresh:o[1]||(o[1]=t=>l(g).emit("listItems")),onHide:o[2]||(o[2]=t=>v.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(y,{appear:"",visibility:!0},{default:e(()=>[a(L,{header:p.headers,meta:p.meta,module:"team",onRefresh:o[4]||(o[4]=t=>l(g).emit("listItems"))},{actionButton:e(()=>[h.value?(c(),k(j,{key:0,onClick:o[3]||(o[3]=t=>l(m).push({name:"TeamCreate"}))},{default:e(()=>[i(r(n.$trans("global.add",{attribute:n.$trans("team.team")})),1)]),_:1})):b("",!0)]),default:e(()=>[(c(!0),w(U,null,q(p.data,t=>(c(),k(R,{key:t.uuid,onDoubleClick:u=>l(m).push({name:"TeamShow",params:{uuid:t.uuid}})},{default:e(()=>[a(C,{name:"name"},{default:e(()=>[i(r(t.name)+" ",1),t.id==d.value?(c(),w("span",Q,o[5]||(o[5]=[F("i",{class:"fas fa-check-circle fa-lg text-success cursor-pointer"},null,-1)]))):b("",!0),t.code?(c(),k(M,{key:1,block:"",class:"text-xs"},{default:e(()=>[i(r(t.code),1)]),_:2},1024)):b("",!0)]),_:2},1024),a(C,{name:"organization"},{default:e(()=>{var u;return[i(r(((u=t.organization)==null?void 0:u.name)||"-"),1)]}),_:2},1024),a(C,{name:"createdAt"},{default:e(()=>[i(r(t.createdAt.formatted),1)]),_:2},1024),a(C,{name:"action"},{default:e(()=>[a(P,null,{default:e(()=>[a($,{icon:"fas fa-arrow-circle-right",onClick:u=>l(m).push({name:"TeamShow",params:{uuid:t.uuid}})},{default:e(()=>[i(r(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),t.id!=d.value?(c(),k($,{key:0,icon:"fas fa-check-circle",onClick:u=>V(t)},{default:e(()=>[i(r(n.$trans("global.select",{attribute:n.$trans("team.team")})),1)]),_:2},1032,["onClick"])):b("",!0),a($,{icon:"fas fa-cog",onClick:u=>l(m).push({name:"TeamConfig",params:{uuid:t.uuid}})},{default:e(()=>[i(r(n.$trans("team.config.config")),1)]),_:2},1032,["onClick"]),a($,{icon:"fas fa-edit",onClick:u=>l(m).push({name:"TeamEdit",params:{uuid:t.uuid}})},{default:e(()=>[i(r(n.$trans("general.edit")),1)]),_:2},1032,["onClick"]),a($,{icon:"fas fa-trash",onClick:u=>l(g).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[i(r(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
