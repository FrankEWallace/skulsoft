import{j as w,u as H,i as E,g as P,H as k,I as z,p as K,m as _,r as l,t as R,o as b,w as p,b as B,d as u,f as n,a as f,C as G,e as r,v as y,x as i,K as j,F as J}from"./app-Cvm44xuh.js";const Q=["innerHTML"],W={class:"mt-4 grid grid-cols-3 gap-6"},X={key:0,class:"col-span-3 sm:col-span-1"},Y={key:1,class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={key:2,class:"col-span-3 sm:col-span-1"},se={class:"col-span-3"},oe={class:"mt-4 grid grid-cols-1"},ne={class:"col"},ae={name:"StudentServiceRequestForm"},re=Object.assign(ae,{setup(F){w();const g=H();E();const d=P("student.serviceRequestInstruction").value,c={student:"",date:"",type:"",requestType:"",description:"",media:[],mediaUpdated:!1,mediaToken:k(),mediaHash:[]},S="student/serviceRequest/",a=z(S);K(!1);const m=_({students:[],types:[],requestTypes:[],transportStoppages:[]}),v=_({selectedStudent:null}),s=_({...c}),V=_({student:"",isLoaded:!g.params.uuid}),O=o=>{Object.assign(m,o),Object.assign(s,j(c))},C=()=>{s.mediaToken=k(),s.mediaHash=[]},A=o=>{var q;let t=o.student;v.selectedStudent={uuid:t.uuid,name:t.name,codeNumber:t.codeNumber,courseName:t.courseName,batchName:t.batchName,joiningDate:t.joiningDate},Object.assign(c,{...o,student:t.uuid,date:o.date.value,type:o.type.value,requestType:o.requestType.value,transportStoppage:(q=o.transportStoppage)==null?void 0:q.uuid}),Object.assign(s,j(c)),V.isLoaded=!0},U=o=>{s.student=o?o.uuid:""},T=()=>{v.selectedStudent=null,s.student=""};return(o,t)=>{const q=l("BaseAlert"),N=l("BaseSelect"),D=l("BaseSelectSearch"),M=l("DatePicker"),$=l("CustomCheckbox"),I=l("BaseTextarea"),L=l("MediaUpload"),h=l("FormAction");return b(),R(h,{"pre-requisites":!0,onSetPreRequisites:O,"init-url":S,"init-form":c,form:s,"set-form":A,redirect:"StudentServiceRequest",onResetMediaFiles:C},{default:p(()=>[n(d)?(b(),R(q,{key:0,design:"info",size:"xs"},{default:p(()=>[u("div",{innerHTML:n(d)},null,8,Q)]),_:1})):B("",!0),u("div",W,[n(G)(["student","guardian"],"any")?(b(),f("div",X,[r(N,{name:"student",label:o.$trans("global.select",{attribute:o.$trans("student.student")}),modelValue:v.selectedStudent,"onUpdate:modelValue":t[0]||(t[0]=e=>v.selectedStudent=e),error:n(a).student,"onUpdate:error":t[1]||(t[1]=e=>n(a).student=e),options:m.students,"value-prop":"uuid","object-prop":!0,onSelected:U,onRemoved:T},{selectedOption:p(e=>[y(i(e.value.name)+" ("+i(e.value.courseName+" "+e.value.batchName)+") ",1)]),listOption:p(e=>[y(i(e.option.name)+" ("+i(e.option.courseName+" "+e.option.batchName)+") ",1)]),_:1},8,["label","modelValue","error","options"])])):(b(),f("div",Y,[r(D,{name:"student",label:o.$trans("global.select",{attribute:o.$trans("student.student")}),modelValue:v.selectedStudent,"onUpdate:modelValue":t[2]||(t[2]=e=>v.selectedStudent=e),error:n(a).student,"onUpdate:error":t[3]||(t[3]=e=>n(a).student=e),"value-prop":"uuid","object-prop":!0,"init-search":V.student,"search-key":"name","search-action":"student/summary",onSelected:U,onRemoved:T,"additional-search-query":{status:"all"}},{selectedOption:p(e=>[y(i(e.value.name)+" ("+i(e.value.courseName+" "+e.value.batchName)+") ",1)]),listOption:p(e=>[y(i(e.option.name)+" ("+i(e.option.courseName+" "+e.option.batchName)+") ",1)]),_:1},8,["label","modelValue","error","init-search"])])),u("div",Z,[r(M,{modelValue:s.date,"onUpdate:modelValue":t[4]||(t[4]=e=>s.date=e),name:"date",label:o.$trans("student.service_request.props.date"),"no-clear":"",error:n(a).date,"onUpdate:error":t[5]||(t[5]=e=>n(a).date=e)},null,8,["modelValue","label","error"])]),u("div",x,[r($,{label:o.$trans("student.service_request.props.type"),options:m.types,modelValue:s.type,"onUpdate:modelValue":t[6]||(t[6]=e=>s.type=e),error:n(a).type,"onUpdate:error":t[7]||(t[7]=e=>n(a).type=e)},null,8,["label","options","modelValue","error"])]),u("div",ee,[r($,{label:o.$trans("student.service_request.props.request_type"),options:m.requestTypes,modelValue:s.requestType,"onUpdate:modelValue":t[8]||(t[8]=e=>s.requestType=e),error:n(a).requestType,"onUpdate:error":t[9]||(t[9]=e=>n(a).requestType=e)},null,8,["label","options","modelValue","error"])]),s.type==="transport"&&s.requestType=="opt_in"?(b(),f("div",te,[r(N,{name:"transportStoppage",label:o.$trans("transport.stoppage.stoppage"),modelValue:s.transportStoppage,"onUpdate:modelValue":t[10]||(t[10]=e=>s.transportStoppage=e),error:n(a).transportStoppage,"onUpdate:error":t[11]||(t[11]=e=>n(a).transportStoppage=e),options:m.transportStoppages,"value-prop":"uuid","label-prop":"name"},null,8,["label","modelValue","error","options"])])):B("",!0),u("div",se,[r(I,{rows:1,modelValue:s.description,"onUpdate:modelValue":t[12]||(t[12]=e=>s.description=e),name:"description",label:o.$trans("student.service_request.props.description"),error:n(a).description,"onUpdate:error":t[13]||(t[13]=e=>n(a).description=e)},null,8,["modelValue","label","error"])])]),u("div",oe,[u("div",ne,[r(L,{multiple:"",label:o.$trans("general.file"),module:"student_service_request",media:s.media,"media-token":s.mediaToken,onIsUpdated:t[14]||(t[14]=e=>s.mediaUpdated=!0),onSetHash:t[15]||(t[15]=e=>s.mediaHash.push(e)),error:n(a).media,"onUpdate:error":t[16]||(t[16]=e=>n(a).media=e)},null,8,["label","media","media-token","error"])])])]),_:1},8,["form"])}}}),le={name:"StudentServiceRequestAction"},ue=Object.assign(le,{setup(F){const g=H();return(d,c)=>{const S=l("PageHeaderAction"),a=l("PageHeader"),m=l("ParentTransition");return b(),f(J,null,[r(a,{title:d.$trans(n(g).meta.trans,{attribute:d.$trans(n(g).meta.label)}),navs:[{label:d.$trans("student.student"),path:"Student"},{label:d.$trans("student.service_request.service_request"),path:"StudentServiceRequest"}]},{default:p(()=>[r(S,{name:"StudentServiceRequest",title:d.$trans("student.service_request.service_request"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),r(m,{appear:"",visibility:!0},{default:p(()=>[r(re)]),_:1})],64)}}});export{ue as default};
