import{u as P,k as A,m as b,I as L,q as T,r as i,t as F,o as v,w as a,d as R,b as O,e,i as x,j as M,z as Q,p as $,a as k,f as w,F as j,y as E,v as u,x as d}from"./app-Cvm44xuh.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",props:{initUrl:{type:String,default:""},preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(h,{emit:m}){const _=P();A("moment");const D=m,g=h,p={inventory:"",startDate:"",endDate:""},n=b({...p});L(g.initUrl);const l=b({isLoaded:!_.query.inventory});return T(async()=>{l.isLoaded=!0}),(y,t)=>{const q=i("BaseSelect"),f=i("DatePicker"),r=i("FilterForm");return v(),F(r,{"init-form":p,multiple:[],form:n,onHide:t[3]||(t[3]=o=>D("hide"))},{default:a(()=>[R("div",z,[R("div",G,[l.isLoaded?(v(),F(q,{key:0,name:"inventory",label:y.$trans("global.select",{attribute:y.$trans("inventory.inventory")}),modelValue:n.inventory,"onUpdate:modelValue":t[0]||(t[0]=o=>n.inventory=o),options:h.preRequisites.inventories,"value-prop":"uuid","label-prop":"name"},null,8,["label","modelValue","options"])):O("",!0)]),R("div",J,[e(f,{start:n.startDate,"onUpdate:start":t[1]||(t[1]=o=>n.startDate=o),end:n.endDate,"onUpdate:end":t[2]||(t[2]=o=>n.endDate=o),name:"dateBetween",as:"range",label:y.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},W={name:"InventoryReportItemSummary"},Y=Object.assign(W,{setup(h){const m=P();x();const _=M();let D=["filter"],g=[];Q("inventory:export")&&(g=["print","pdf","excel"]);const p="inventory/report/",n=$(!0),l=$(!1),y=b({inventories:[]}),t=b({headers:[],data:[],meta:{total:0}}),q=async()=>{l.value=!0,await _.dispatch(p+"preRequisite",{name:"item-summary",params:m.query}).then(r=>{l.value=!1,Object.assign(y,r)}).catch(r=>{l.value=!1})},f=async()=>{l.value=!0,await _.dispatch(p+"fetchReport",{name:"item-summary",params:m.query}).then(r=>{l.value=!1,Object.assign(t,r)}).catch(r=>{l.value=!1})};return T(async()=>{await q(),m.query.inventory&&m.query.startDate&&m.query.endDate&&await f()}),(r,o)=>{const C=i("PageHeaderAction"),I=i("PageHeader"),B=i("ParentTransition"),c=i("DataCell"),S=i("TextMuted"),V=i("DataRow"),H=i("DataTable"),N=i("BaseCard");return v(),k(j,null,[e(I,{title:r.$trans(w(m).meta.label),navs:[{label:r.$trans("inventory.inventory"),path:"Inventory"},{label:r.$trans("inventory.report.report"),path:"InventoryReport"}]},{default:a(()=>[e(C,{url:"inventory/reports/item-summary/",name:"InventoryReportItemSummary",title:r.$trans("inventory.report.item_summary.item_summary"),actions:w(D),"dropdown-actions":w(g),headers:t.headers,onToggleFilter:o[0]||(o[0]=s=>n.value=!n.value)},null,8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"]),e(B,{appear:"",visibility:n.value},{default:a(()=>[e(K,{onAfterFilter:f,"init-url":p,"pre-requisites":y,onHide:o[1]||(o[1]=s=>n.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"]),e(B,{appear:"",visibility:!0},{default:a(()=>[e(N,{"no-padding":"","no-content-padding":"","is-loading":l.value},{default:a(()=>[e(H,{header:t.headers,footer:t.footers,meta:t.meta,module:"inventory.report.item_summary",onRefresh:f},{default:a(()=>[(v(!0),k(j,null,E(t.data,(s,U)=>(v(),F(V,{key:s.uuid},{default:a(()=>[e(c,{name:"sno"},{default:a(()=>[u(d(t.meta.sno+U),1)]),_:2},1024),e(c,{name:"name"},{default:a(()=>[u(d(s.name),1)]),_:2},1024),e(c,{name:"category_name"},{default:a(()=>[u(d(s.categoryName)+" ",1),e(S,{block:""},{default:a(()=>[u(d(s.inventoryName),1)]),_:2},1024)]),_:2},1024),e(c,{name:"opening_balance"},{default:a(()=>[u(d(s.openingBalance),1)]),_:2},1024),e(c,{name:"purchased_quantity"},{default:a(()=>[u(d(s.purchasedQuantity),1)]),_:2},1024),e(c,{name:"returned_quantity"},{default:a(()=>[u(d(s.returnedQuantity),1)]),_:2},1024),e(c,{name:"adjusted_quantity"},{default:a(()=>[u(d(s.adjustedQuantity),1)]),_:2},1024),e(c,{name:"current_balance"},{default:a(()=>[u(d(s.currentBalance),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","footer","meta"])]),_:1},8,["is-loading"])]),_:1})],64)}}});export{Y as default};
