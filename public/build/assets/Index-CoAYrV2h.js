import{u as j,k as z,m as N,I as E,q as x,r as s,t as y,o as _,w as a,d as w,e,i as G,j as J,z as K,p as U,a as R,f as $,F as q,y as Q,v as l,b as P,x as i}from"./app-Cvm44xuh.js";const W={class:"grid grid-cols-3 gap-6"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={__name:"Filter",props:{initUrl:{type:String,default:""},preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(C,{emit:h}){j(),z("moment");const D=h,F=C,b={codeNumber:"",startDate:"",endDate:"",status:""},d=N({...b});E(F.initUrl);const g=N({isLoaded:!0});return N({}),x(async()=>{g.isLoaded=!0}),(f,u)=>{const p=s("BaseInput"),v=s("DatePicker"),c=s("FilterForm");return _(),y(c,{"init-form":b,multiple:[],form:d,onHide:u[3]||(u[3]=r=>D("hide"))},{default:a(()=>[w("div",W,[w("div",X,[e(p,{type:"text",modelValue:d.codeNumber,"onUpdate:modelValue":u[0]||(u[0]=r=>d.codeNumber=r),name:"codeNumber",label:f.$trans("finance.bank_transfer.props.code_number")},null,8,["modelValue","label"])]),w("div",Y,[e(v,{start:d.startDate,"onUpdate:start":u[1]||(u[1]=r=>d.startDate=r),end:d.endDate,"onUpdate:end":u[2]||(u[2]=r=>d.endDate=r),name:"dateBetween",as:"range",label:f.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},T={name:"FinanceReportBankTransfer"},te=Object.assign(T,{setup(C){const h=j();G();const D=J();let F=["filter"],b=[];K("finance:export")&&(b=["print","pdf","excel"]);const d="finance/report/",g=U(!1),f=U(!1),u=N({}),p=N({headers:[],data:[],meta:{total:0}}),v=async()=>{f.value=!0,await D.dispatch(d+"fetchReport",{name:"bank-transfer",params:h.query}).then(c=>{f.value=!1,Object.assign(p,c)}).catch(c=>{f.value=!1})};return x(async()=>{await v()}),(c,r)=>{const A=s("PageHeaderAction"),L=s("PageHeader"),V=s("ParentTransition"),B=s("TextMuted"),m=s("DataCell"),I=s("BaseBadge"),M=s("DataRow"),O=s("DataTable"),S=s("BaseCard");return _(),R(q,null,[e(L,{title:c.$trans($(h).meta.label),navs:[{label:c.$trans("finance.finance"),path:"Finance"},{label:c.$trans("finance.report.report"),path:"FinanceReport"}]},{default:a(()=>[e(A,{url:"finance/reports/bank-transfer/",name:"FinanceReportBankTransfer",title:c.$trans("finance.report.bank_transfer.bank_transfer"),actions:$(F),"dropdown-actions":$(b),headers:p.headers,onToggleFilter:r[0]||(r[0]=t=>g.value=!g.value)},null,8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"]),e(V,{appear:"",visibility:g.value},{default:a(()=>[e(Z,{onAfterFilter:v,"init-url":d,"pre-requisites":u,onHide:r[1]||(r[1]=t=>g.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"]),e(V,{appear:"",visibility:!0},{default:a(()=>[e(S,{"no-padding":"","no-content-padding":"","is-loading":f.value},{default:a(()=>[e(O,{header:p.headers,footer:p.footers,meta:p.meta,module:"finance.report.bank_transfer",onRefresh:v},{default:a(()=>[(_(!0),R(q,null,Q(p.data,t=>(_(),y(M,{key:t.uuid},{default:a(()=>[e(m,{name:"codeNumber"},{default:a(()=>{var n;return[l(i(t.codeNumber)+" ",1),(n=t.transaction)!=null&&n.uuid?(_(),y(B,{key:0,block:""},{default:a(()=>{var o;return[l(i((o=t.transaction)==null?void 0:o.voucherNumber),1)]}),_:2},1024)):P("",!0)]}),_:2},1024),e(m,{name:"name"},{default:a(()=>{var n,o,k;return[((n=t.details)==null?void 0:n.type)==="student"?(_(),R(q,{key:0},[l(i((o=t.details)==null?void 0:o.name)+" ",1),(k=t.details)!=null&&k.codeNumber?(_(),y(B,{key:0,block:""},{default:a(()=>{var H;return[l(i((H=t.details)==null?void 0:H.codeNumber),1)]}),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024),e(m,{name:"fatherName"},{default:a(()=>{var n;return[l(i((n=t.details)==null?void 0:n.fatherName)+" ",1),e(B,{block:""},{default:a(()=>{var o;return[l(i((o=t.details)==null?void 0:o.contactNumber),1)]}),_:2},1024)]}),_:2},1024),e(m,{name:"course"},{default:a(()=>{var n,o;return[l(i(((n=t.details)==null?void 0:n.courseName)+" "+((o=t.details)==null?void 0:o.batchName)),1)]}),_:2},1024),e(m,{name:"amount"},{default:a(()=>[l(i(t.amount.formatted),1)]),_:2},1024),e(m,{name:"date"},{default:a(()=>[l(i(t.date.formatted),1)]),_:2},1024),e(m,{name:"status"},{default:a(()=>[e(I,{design:t.status.color,size:"sm"},{default:a(()=>[l(i(t.status.label),1)]),_:2},1032,["design"])]),_:2},1024),e(m,{name:"requester"},{default:a(()=>{var n,o;return[l(i(((o=(n=t.requester)==null?void 0:n.profile)==null?void 0:o.name)||"-"),1)]}),_:2},1024),e(m,{name:"action"})]),_:2},1024))),128))]),_:1},8,["header","footer","meta"])]),_:1},8,["is-loading"])]),_:1})],64)}}});export{te as default};
