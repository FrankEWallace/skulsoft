import{u as M,m as I,q as U,r as l,t as $,o as _,w as e,d as y,e as t,v as s,x as o,i as x,k as E,z as v,p as O,f as i,a as z,F as Q,y as G,b as T,aj as J}from"./app-Cvm44xuh.js";const K={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"grid grid-cols-3 gap-6"},Y={class:"col-span-3 flex gap-2"},Z={__name:"Filter",emits:["hide"],setup(P,{emit:F}){const m=M(),k=F,b={name:"",inclusions:["timing","passenger"]},d=I({...b}),w=I({isLoaded:!0});return U(async()=>{d.inclusions=m.query.inclusions?m.query.inclusions.split(","):[],w.isLoaded=!0}),(c,u)=>{const B=l("BaseInput"),h=l("BaseArrayCheckbox"),a=l("BaseFieldset"),r=l("FilterForm");return _(),$(r,{"init-form":b,form:d,onHide:u[3]||(u[3]=p=>k("hide"))},{default:e(()=>[y("div",K,[y("div",W,[t(B,{type:"text",modelValue:d.name,"onUpdate:modelValue":u[0]||(u[0]=p=>d.name=p),name:"name",label:c.$trans("transport.route.props.name")},null,8,["modelValue","label"])])]),t(a,{class:"mt-4"},{legend:e(()=>[s(o(c.$trans("general.detail")),1)]),default:e(()=>[y("div",X,[y("div",Y,[t(h,{items:d.inclusions,"onUpdate:items":u[1]||(u[1]=p=>d.inclusions=p),value:"timing",label:c.$trans("transport.route.timing")},null,8,["items","label"]),t(h,{items:d.inclusions,"onUpdate:items":u[2]||(u[2]=p=>d.inclusions=p),value:"passenger",label:c.$trans("transport.route.passenger")},null,8,["items","label"])])])]),_:1})]),_:1},8,["form"])}}},R={class:"text-xs"},ee={name:"TransportRouteList"},ne=Object.assign(ee,{setup(P){const F=M(),m=x(),k=E("emitter");let b=["filter"];v("transport:config")&&b.unshift("config"),v("transport-route:create")&&b.unshift("create");let d=[];v("transport-route:export")&&(d=["print","pdf","excel"]);const w="transport/route/",c=O(!1),u=I({}),B=a=>{Object.assign(u,a)},h=a=>{let r="/app/transport/routes/"+a.uuid+"/export",p=F.query;window.open(J(r,p),"_blank").focus()};return(a,r)=>{const p=l("BaseButton"),V=l("PageHeaderAction"),H=l("PageHeader"),A=l("ParentTransition"),D=l("TextMuted"),g=l("DataCell"),C=l("FloatingMenuItem"),L=l("FloatingMenu"),q=l("DataRow"),N=l("DataTable"),j=l("ListItem");return _(),$(j,{"init-url":w,onSetItems:B},{header:e(()=>[t(H,{title:a.$trans("transport.route.route"),navs:[{label:a.$trans("transport.transport"),path:"Transport"}]},{default:e(()=>[t(V,{url:"transport/routes/",name:"TransportRoute",title:a.$trans("transport.route.route"),actions:i(b),"dropdown-actions":i(d),"config-path":"TransportConfig",onToggleFilter:r[1]||(r[1]=n=>c.value=!c.value)},{default:e(()=>[t(p,{design:"white",onClick:r[0]||(r[0]=n=>i(m).push({name:"TransportStoppage"}))},{default:e(()=>[s(o(a.$trans("transport.stoppage.stoppage")),1)]),_:1})]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(A,{appear:"",visibility:c.value},{default:e(()=>[t(Z,{onRefresh:r[2]||(r[2]=n=>i(k).emit("listItems")),onHide:r[3]||(r[3]=n=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(A,{appear:"",visibility:!0},{default:e(()=>[t(N,{header:u.headers,meta:u.meta,module:"transport.route",onRefresh:r[5]||(r[5]=n=>i(k).emit("listItems"))},{actionButton:e(()=>[i(v)("transport-route:create")?(_(),$(p,{key:0,onClick:r[4]||(r[4]=n=>i(m).push({name:"TransportRouteCreate"}))},{default:e(()=>[s(o(a.$trans("global.add",{attribute:a.$trans("transport.route.route")})),1)]),_:1})):T("",!0)]),default:e(()=>[(_(!0),z(Q,null,G(u.data,n=>(_(),$(q,{key:n.uuid,onDoubleClick:f=>i(m).push({name:"TransportRouteShow",params:{uuid:n.uuid}})},{default:e(()=>[t(g,{name:"name"},{default:e(()=>[s(o(n.name)+" ",1),t(D,{block:""},{default:e(()=>[s(o(n.direction.label),1)]),_:2},1024)]),_:2},1024),t(g,{name:"vehicle"},{default:e(()=>{var f;return[s(o((f=n.vehicle)==null?void 0:f.name)+" ",1),t(D,{block:""},{default:e(()=>{var S;return[s(o((S=n.vehicle)==null?void 0:S.registrationNumber),1)]}),_:2},1024)]}),_:2},1024),t(g,{name:"time"},{default:e(()=>[s(o(n.arrivalStartsAt.formatted)+" ",1),t(D,{block:""},{default:e(()=>[s(o(n.departureStartsAt.formatted),1)]),_:2},1024)]),_:2},1024),t(g,{name:"maxCapacity"},{default:e(()=>[y("span",R,o(n.routePassengersCount),1),s("/"+o(n.maxCapacity),1)]),_:2},1024),t(g,{name:"routeStoppagesCount"},{default:e(()=>[s(o(n.routeStoppagesCount),1)]),_:2},1024),t(g,{name:"createdAt"},{default:e(()=>[s(o(n.createdAt.formatted),1)]),_:2},1024),t(g,{name:"action"},{default:e(()=>[t(L,null,{default:e(()=>[t(C,{icon:"fas fa-arrow-circle-right",onClick:f=>i(m).push({name:"TransportRouteShow",params:{uuid:n.uuid}})},{default:e(()=>[s(o(a.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(C,{icon:"fas fa-print",onClick:f=>h(n)},{default:e(()=>[s(o(a.$trans("global.print",{attribute:a.$trans("transport.route.route")})),1)]),_:2},1032,["onClick"]),i(v)("transport-route:edit")?(_(),$(C,{key:0,icon:"fas fa-edit",onClick:f=>i(m).push({name:"TransportRouteEdit",params:{uuid:n.uuid}})},{default:e(()=>[s(o(a.$trans("general.edit")),1)]),_:2},1032,["onClick"])):T("",!0),i(v)("transport-route:create")?(_(),$(C,{key:1,icon:"fas fa-copy",onClick:f=>i(m).push({name:"TransportRouteDuplicate",params:{uuid:n.uuid}})},{default:e(()=>[s(o(a.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):T("",!0),i(v)("transport-route:delete")?(_(),$(C,{key:2,icon:"fas fa-trash",onClick:f=>i(k).emit("deleteItem",{uuid:n.uuid})},{default:e(()=>[s(o(a.$trans("general.delete")),1)]),_:2},1032,["onClick"])):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDoubleClick"]))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{ne as default};
